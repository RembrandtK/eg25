"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@worldcoin";
exports.ids = ["vendor-chunks/@worldcoin"];
exports.modules = {

/***/ "(rsc)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js":
/*!********************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* binding */ encodeAction),\n/* harmony export */   generateSignal: () => (/* binding */ generateSignal),\n/* harmony export */   hashToField: () => (/* binding */ hashToField),\n/* harmony export */   packAndEncode: () => (/* binding */ packAndEncode),\n/* harmony export */   solidityEncode: () => (/* binding */ solidityEncode)\n/* harmony export */ });\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer/index.js */ \"(rsc)/./node_modules/buffer/index.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ox */ \"(rsc)/./node_modules/ox/_esm/core/Bytes.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ox */ \"(rsc)/./node_modules/ox/_esm/core/Hex.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ox */ \"(rsc)/./node_modules/ox/_esm/core/AbiParameters.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ox */ \"(rsc)/./node_modules/ox/_esm/core/Hash.js\");\n// src/lib/hashing.ts\n\n\nfunction hashToField(input) {\n  if (ox__WEBPACK_IMPORTED_MODULE_1__.validate(input) || ox__WEBPACK_IMPORTED_MODULE_2__.validate(input)) return hashEncodedBytes(input);\n  return hashString(input);\n}\nfunction packAndEncode(input) {\n  const [types, values] = input.reduce(\n    ([types2, values2], [type, value]) => {\n      types2.push(type);\n      values2.push(value);\n      return [types2, values2];\n    },\n    [[], []]\n  );\n  return hashEncodedBytes(ox__WEBPACK_IMPORTED_MODULE_3__.encodePacked(types, values));\n}\nfunction hashString(input) {\n  const bytesInput = buffer_index_js__WEBPACK_IMPORTED_MODULE_0__.Buffer.from(input);\n  return hashEncodedBytes(bytesInput);\n}\nfunction hashEncodedBytes(input) {\n  const hash = BigInt(ox__WEBPACK_IMPORTED_MODULE_4__.keccak256(input, { as: \"Hex\" })) >> 8n;\n  const rawDigest = hash.toString(16);\n  return { hash, digest: `0x${rawDigest.padStart(64, \"0\")}` };\n}\nvar solidityEncode = (types, values) => {\n  if (types.length !== values.length) {\n    throw new Error(\"Types and values arrays must have the same length.\");\n  }\n  return { types, values };\n};\nvar generateSignal = (signal) => {\n  if (!signal || typeof signal === \"string\") return hashToField(signal ?? \"\");\n  return packAndEncode(signal.types.map((type, index) => [type, signal.values[index]]));\n};\nvar encodeAction = (action) => {\n  if (!action) return \"\";\n  if (typeof action === \"string\") return action;\n  return action.types.map((type, index) => `${type}(${action.values[index]})`).join(\",\");\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2NodW5rLUhaMlNRQTVWLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUNZO0FBQ3JEO0FBQ0EsTUFBTSx3Q0FBYyxXQUFXLHdDQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBMEI7QUFDcEQ7QUFDQTtBQUNBLHFCQUFxQixtREFBTTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseUNBQWMsVUFBVSxXQUFXO0FBQ3pEO0FBQ0EsV0FBVyxtQkFBbUIsNEJBQTRCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxLQUFLLEdBQUcscUJBQXFCO0FBQzNFOztBQVFFIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvY2h1bmstSFoyU1FBNVYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9oYXNoaW5nLnRzXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBYmlQYXJhbWV0ZXJzLCBCeXRlcywgSGV4LCBIYXNoIH0gZnJvbSBcIm94XCI7XG5mdW5jdGlvbiBoYXNoVG9GaWVsZChpbnB1dCkge1xuICBpZiAoQnl0ZXMudmFsaWRhdGUoaW5wdXQpIHx8IEhleC52YWxpZGF0ZShpbnB1dCkpIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGlucHV0KTtcbiAgcmV0dXJuIGhhc2hTdHJpbmcoaW5wdXQpO1xufVxuZnVuY3Rpb24gcGFja0FuZEVuY29kZShpbnB1dCkge1xuICBjb25zdCBbdHlwZXMsIHZhbHVlc10gPSBpbnB1dC5yZWR1Y2UoXG4gICAgKFt0eXBlczIsIHZhbHVlczJdLCBbdHlwZSwgdmFsdWVdKSA9PiB7XG4gICAgICB0eXBlczIucHVzaCh0eXBlKTtcbiAgICAgIHZhbHVlczIucHVzaCh2YWx1ZSk7XG4gICAgICByZXR1cm4gW3R5cGVzMiwgdmFsdWVzMl07XG4gICAgfSxcbiAgICBbW10sIFtdXVxuICApO1xuICByZXR1cm4gaGFzaEVuY29kZWRCeXRlcyhBYmlQYXJhbWV0ZXJzLmVuY29kZVBhY2tlZCh0eXBlcywgdmFsdWVzKSk7XG59XG5mdW5jdGlvbiBoYXNoU3RyaW5nKGlucHV0KSB7XG4gIGNvbnN0IGJ5dGVzSW5wdXQgPSBCdWZmZXIuZnJvbShpbnB1dCk7XG4gIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGJ5dGVzSW5wdXQpO1xufVxuZnVuY3Rpb24gaGFzaEVuY29kZWRCeXRlcyhpbnB1dCkge1xuICBjb25zdCBoYXNoID0gQmlnSW50KEhhc2gua2VjY2FrMjU2KGlucHV0LCB7IGFzOiBcIkhleFwiIH0pKSA+PiA4bjtcbiAgY29uc3QgcmF3RGlnZXN0ID0gaGFzaC50b1N0cmluZygxNik7XG4gIHJldHVybiB7IGhhc2gsIGRpZ2VzdDogYDB4JHtyYXdEaWdlc3QucGFkU3RhcnQoNjQsIFwiMFwiKX1gIH07XG59XG52YXIgc29saWRpdHlFbmNvZGUgPSAodHlwZXMsIHZhbHVlcykgPT4ge1xuICBpZiAodHlwZXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZXMgYW5kIHZhbHVlcyBhcnJheXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cIik7XG4gIH1cbiAgcmV0dXJuIHsgdHlwZXMsIHZhbHVlcyB9O1xufTtcbnZhciBnZW5lcmF0ZVNpZ25hbCA9IChzaWduYWwpID0+IHtcbiAgaWYgKCFzaWduYWwgfHwgdHlwZW9mIHNpZ25hbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGhhc2hUb0ZpZWxkKHNpZ25hbCA/PyBcIlwiKTtcbiAgcmV0dXJuIHBhY2tBbmRFbmNvZGUoc2lnbmFsLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IFt0eXBlLCBzaWduYWwudmFsdWVzW2luZGV4XV0pKTtcbn07XG52YXIgZW5jb2RlQWN0aW9uID0gKGFjdGlvbikgPT4ge1xuICBpZiAoIWFjdGlvbikgcmV0dXJuIFwiXCI7XG4gIGlmICh0eXBlb2YgYWN0aW9uID09PSBcInN0cmluZ1wiKSByZXR1cm4gYWN0aW9uO1xuICByZXR1cm4gYWN0aW9uLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IGAke3R5cGV9KCR7YWN0aW9uLnZhbHVlc1tpbmRleF19KWApLmpvaW4oXCIsXCIpO1xufTtcblxuZXhwb3J0IHtcbiAgaGFzaFRvRmllbGQsXG4gIHBhY2tBbmRFbmNvZGUsXG4gIHNvbGlkaXR5RW5jb2RlLFxuICBnZW5lcmF0ZVNpZ25hbCxcbiAgZW5jb2RlQWN0aW9uXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@worldcoin/idkit-core/build/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppErrorCodes: () => (/* binding */ AppErrorCodes),\n/* harmony export */   CredentialType: () => (/* binding */ CredentialType),\n/* harmony export */   DEFAULT_VERIFICATION_LEVEL: () => (/* binding */ DEFAULT_VERIFICATION_LEVEL),\n/* harmony export */   VerificationLevel: () => (/* binding */ VerificationLevel),\n/* harmony export */   VerificationState: () => (/* binding */ VerificationState),\n/* harmony export */   useWorldBridgeStore: () => (/* binding */ useWorldBridgeStore),\n/* harmony export */   verification_level_to_credential_types: () => (/* binding */ verification_level_to_credential_types)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-HZ2SQA5V.js */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zustand */ \"(rsc)/./node_modules/zustand/esm/index.mjs\");\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer/index.js */ \"(rsc)/./node_modules/buffer/index.js\");\n\n\n// src/types/bridge.ts\nvar AppErrorCodes = /* @__PURE__ */ ((AppErrorCodes2) => {\n  AppErrorCodes2[\"ConnectionFailed\"] = \"connection_failed\";\n  AppErrorCodes2[\"VerificationRejected\"] = \"verification_rejected\";\n  AppErrorCodes2[\"MaxVerificationsReached\"] = \"max_verifications_reached\";\n  AppErrorCodes2[\"CredentialUnavailable\"] = \"credential_unavailable\";\n  AppErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  AppErrorCodes2[\"InvalidNetwork\"] = \"invalid_network\";\n  AppErrorCodes2[\"InclusionProofFailed\"] = \"inclusion_proof_failed\";\n  AppErrorCodes2[\"InclusionProofPending\"] = \"inclusion_proof_pending\";\n  AppErrorCodes2[\"UnexpectedResponse\"] = \"unexpected_response\";\n  AppErrorCodes2[\"FailedByHostApp\"] = \"failed_by_host_app\";\n  AppErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return AppErrorCodes2;\n})(AppErrorCodes || {});\nvar VerificationState = /* @__PURE__ */ ((VerificationState2) => {\n  VerificationState2[\"PreparingClient\"] = \"loading_widget\";\n  VerificationState2[\"WaitingForConnection\"] = \"awaiting_connection\";\n  VerificationState2[\"WaitingForApp\"] = \"awaiting_app\";\n  VerificationState2[\"Confirmed\"] = \"confirmed\";\n  VerificationState2[\"Failed\"] = \"failed\";\n  return VerificationState2;\n})(VerificationState || {});\n\n// src/types/config.ts\nvar CredentialType = /* @__PURE__ */ ((CredentialType2) => {\n  CredentialType2[\"Orb\"] = \"orb\";\n  CredentialType2[\"SecureDocument\"] = \"secure_document\";\n  CredentialType2[\"Document\"] = \"document\";\n  CredentialType2[\"Device\"] = \"device\";\n  return CredentialType2;\n})(CredentialType || {});\nvar VerificationLevel = /* @__PURE__ */ ((VerificationLevel2) => {\n  VerificationLevel2[\"Orb\"] = \"orb\";\n  VerificationLevel2[\"SecureDocument\"] = \"secure_document\";\n  VerificationLevel2[\"Document\"] = \"document\";\n  VerificationLevel2[\"Device\"] = \"device\";\n  return VerificationLevel2;\n})(VerificationLevel || {});\n\n// src/bridge.ts\n\n\n// src/lib/validation.ts\nfunction validate_bridge_url(bridge_url, is_staging) {\n  try {\n    new URL(bridge_url);\n  } catch (e) {\n    return { valid: false, errors: [\"Failed to parse Bridge URL.\"] };\n  }\n  const test_url = new URL(bridge_url);\n  const errors = [];\n  if (is_staging && [\"localhost\", \"127.0.0.1\"].includes(test_url.hostname)) {\n    console.log(\"Using staging app_id with localhost bridge_url. Skipping validation.\");\n    return { valid: true };\n  }\n  if (test_url.protocol !== \"https:\") {\n    errors.push(\"Bridge URL must use HTTPS.\");\n  }\n  if (test_url.port) {\n    errors.push(\"Bridge URL must use the default port (443).\");\n  }\n  if (test_url.pathname !== \"/\") {\n    errors.push(\"Bridge URL must not have a path.\");\n  }\n  if (test_url.search) {\n    errors.push(\"Bridge URL must not have query parameters.\");\n  }\n  if (test_url.hash) {\n    errors.push(\"Bridge URL must not have a fragment.\");\n  }\n  if (!test_url.hostname.endsWith(\".worldcoin.org\") && !test_url.hostname.endsWith(\".toolsforhumanity.com\")) {\n    console.warn(\n      \"Bridge URL should be a subdomain of worldcoin.org or toolsforhumanity.com. The user's identity wallet may refuse to connect. This is a temporary measure and may be removed in the future.\"\n    );\n  }\n  if (errors.length) {\n    return { valid: false, errors };\n  }\n  return { valid: true };\n}\n\n// src/lib/utils.ts\n\nvar DEFAULT_VERIFICATION_LEVEL = \"orb\" /* Orb */;\nvar buffer_encode = (buffer) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(buffer).toString(\"base64\");\n};\nvar buffer_decode = (encoded) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(encoded, \"base64\");\n};\nvar verification_level_to_credential_types = (verification_level) => {\n  switch (verification_level) {\n    case \"device\" /* Device */:\n      return [\"orb\" /* Orb */, \"device\" /* Device */];\n    case \"document\" /* Document */:\n      return [\"document\" /* Document */, \"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"secure_document\" /* SecureDocument */:\n      return [\"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"orb\" /* Orb */:\n      return [\"orb\" /* Orb */];\n    default:\n      throw new Error(`Unknown verification level: ${verification_level}`);\n  }\n};\nvar credential_type_to_verification_level = (credential_type) => {\n  switch (credential_type) {\n    case \"orb\" /* Orb */:\n      return \"orb\" /* Orb */;\n    case \"secure_document\" /* SecureDocument */:\n      return \"secure_document\" /* SecureDocument */;\n    case \"document\" /* Document */:\n      return \"document\" /* Document */;\n    case \"device\" /* Device */:\n      return \"device\" /* Device */;\n    default:\n      throw new Error(`Unknown credential_type: ${credential_type}`);\n  }\n};\n\n// src/lib/crypto.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar generateKey = async () => {\n  return {\n    iv: window.crypto.getRandomValues(new Uint8Array(12)),\n    key: await window.crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"])\n  };\n};\nvar exportKey = async (key) => {\n  return buffer_encode(await window.crypto.subtle.exportKey(\"raw\", key));\n};\nvar encryptRequest = async (key, iv, request) => {\n  return {\n    iv: buffer_encode(iv),\n    payload: buffer_encode(\n      await window.crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, encoder.encode(request))\n    )\n  };\n};\nvar decryptResponse = async (key, iv, payload) => {\n  return decoder.decode(await window.crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, buffer_decode(payload)));\n};\n\n// src/bridge.ts\nvar DEFAULT_BRIDGE_URL = \"https://bridge.worldcoin.org\";\nvar useWorldBridgeStore = (0,zustand__WEBPACK_IMPORTED_MODULE_2__.create)((set, get) => ({\n  iv: null,\n  key: null,\n  result: null,\n  errorCode: null,\n  requestId: null,\n  connectorURI: null,\n  bridge_url: DEFAULT_BRIDGE_URL,\n  verificationState: \"loading_widget\" /* PreparingClient */,\n  createClient: async ({ bridge_url, app_id, verification_level, action_description, action, signal, partner }) => {\n    const { key, iv } = await generateKey();\n    if (bridge_url) {\n      const validation = validate_bridge_url(bridge_url, app_id.includes(\"staging\"));\n      if (!validation.valid) {\n        console.error(validation.errors.join(\"\\n\"));\n        set({ verificationState: \"failed\" /* Failed */ });\n        throw new Error(\"Invalid bridge_url. Please check the console for more details.\");\n      }\n    }\n    const res = await fetch(new URL(\"/request\", bridge_url ?? DEFAULT_BRIDGE_URL), {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(\n        await encryptRequest(\n          key,\n          iv,\n          JSON.stringify({\n            app_id,\n            action_description,\n            action: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction)(action),\n            signal: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal)(signal).digest,\n            credential_types: verification_level_to_credential_types(\n              verification_level ?? DEFAULT_VERIFICATION_LEVEL\n            ),\n            verification_level: verification_level ?? DEFAULT_VERIFICATION_LEVEL\n          })\n        )\n      )\n    });\n    if (!res.ok) {\n      set({ verificationState: \"failed\" /* Failed */ });\n      throw new Error(\"Failed to create client\");\n    }\n    const { request_id } = await res.json();\n    set({\n      iv,\n      key,\n      requestId: request_id,\n      bridge_url: bridge_url ?? DEFAULT_BRIDGE_URL,\n      verificationState: \"awaiting_connection\" /* WaitingForConnection */,\n      connectorURI: `https://world.org/verify?t=wld&i=${request_id}&k=${encodeURIComponent(\n        await exportKey(key)\n      )}${bridge_url && bridge_url !== DEFAULT_BRIDGE_URL ? `&b=${encodeURIComponent(bridge_url)}` : \"\"}${partner ? `&partner=${encodeURIComponent(true)}` : \"\"}`\n    });\n  },\n  pollForUpdates: async () => {\n    const key = get().key;\n    if (!key) throw new Error(\"No keypair found. Please call `createClient` first.\");\n    const res = await fetch(new URL(`/response/${get().requestId}`, get().bridge_url));\n    if (!res.ok) {\n      return set({\n        errorCode: \"connection_failed\" /* ConnectionFailed */,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    const { response, status } = await res.json();\n    if (status != \"completed\" /* Completed */) {\n      return set({\n        verificationState: status == \"retrieved\" /* Retrieved */ ? \"awaiting_app\" /* WaitingForApp */ : \"awaiting_connection\" /* WaitingForConnection */\n      });\n    }\n    let result = JSON.parse(\n      await decryptResponse(key, buffer_decode(response.iv), response.payload)\n    );\n    if (\"error_code\" in result) {\n      return set({\n        errorCode: result.error_code,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    if (\"credential_type\" in result) {\n      result = {\n        verification_level: credential_type_to_verification_level(result.credential_type),\n        ...result\n      };\n    }\n    set({\n      result,\n      key: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"confirmed\" /* Confirmed */\n    });\n  },\n  reset: () => {\n    set({\n      iv: null,\n      key: null,\n      result: null,\n      errorCode: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"loading_widget\" /* PreparingClient */\n    });\n  }\n}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFHNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHFCQUFxQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCOztBQUUxQjtBQUNpQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDeUM7QUFDekM7QUFDQTtBQUNBLFNBQVMsbURBQU07QUFDZjtBQUNBO0FBQ0EsU0FBUyxtREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxtQkFBbUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhCQUE4QjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELHFCQUFxQjtBQUNsRjs7QUFFQTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscUZBQXFGO0FBQzlHLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQTBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFZO0FBQ2hDLG9CQUFvQixrRUFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsWUFBWSwwQ0FBMEM7QUFDdEQ7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsV0FBVyxLQUFLO0FBQ3hFO0FBQ0EsUUFBUSxFQUFFLHdEQUF3RCwrQkFBK0IsT0FBTyxFQUFFLHNCQUFzQix5QkFBeUIsT0FBTztBQUNoSyxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnQkFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQVNDIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZW5jb2RlQWN0aW9uLFxuICBnZW5lcmF0ZVNpZ25hbFxufSBmcm9tIFwiLi9jaHVuay1IWjJTUUE1Vi5qc1wiO1xuXG4vLyBzcmMvdHlwZXMvYnJpZGdlLnRzXG52YXIgQXBwRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKEFwcEVycm9yQ29kZXMyKSA9PiB7XG4gIEFwcEVycm9yQ29kZXMyW1wiQ29ubmVjdGlvbkZhaWxlZFwiXSA9IFwiY29ubmVjdGlvbl9mYWlsZWRcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJWZXJpZmljYXRpb25SZWplY3RlZFwiXSA9IFwidmVyaWZpY2F0aW9uX3JlamVjdGVkXCI7XG4gIEFwcEVycm9yQ29kZXMyW1wiTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRcIl0gPSBcIm1heF92ZXJpZmljYXRpb25zX3JlYWNoZWRcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJDcmVkZW50aWFsVW5hdmFpbGFibGVcIl0gPSBcImNyZWRlbnRpYWxfdW5hdmFpbGFibGVcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJtYWxmb3JtZWRfcmVxdWVzdFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkludmFsaWROZXR3b3JrXCJdID0gXCJpbnZhbGlkX25ldHdvcmtcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJJbmNsdXNpb25Qcm9vZkZhaWxlZFwiXSA9IFwiaW5jbHVzaW9uX3Byb29mX2ZhaWxlZFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkluY2x1c2lvblByb29mUGVuZGluZ1wiXSA9IFwiaW5jbHVzaW9uX3Byb29mX3BlbmRpbmdcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJVbmV4cGVjdGVkUmVzcG9uc2VcIl0gPSBcInVuZXhwZWN0ZWRfcmVzcG9uc2VcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJGYWlsZWRCeUhvc3RBcHBcIl0gPSBcImZhaWxlZF9ieV9ob3N0X2FwcFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gQXBwRXJyb3JDb2RlczI7XG59KShBcHBFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBWZXJpZmljYXRpb25TdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFZlcmlmaWNhdGlvblN0YXRlMikgPT4ge1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJQcmVwYXJpbmdDbGllbnRcIl0gPSBcImxvYWRpbmdfd2lkZ2V0XCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIldhaXRpbmdGb3JDb25uZWN0aW9uXCJdID0gXCJhd2FpdGluZ19jb25uZWN0aW9uXCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIldhaXRpbmdGb3JBcHBcIl0gPSBcImF3YWl0aW5nX2FwcFwiO1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJDb25maXJtZWRcIl0gPSBcImNvbmZpcm1lZFwiO1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJGYWlsZWRcIl0gPSBcImZhaWxlZFwiO1xuICByZXR1cm4gVmVyaWZpY2F0aW9uU3RhdGUyO1xufSkoVmVyaWZpY2F0aW9uU3RhdGUgfHwge30pO1xuXG4vLyBzcmMvdHlwZXMvY29uZmlnLnRzXG52YXIgQ3JlZGVudGlhbFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChDcmVkZW50aWFsVHlwZTIpID0+IHtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiT3JiXCJdID0gXCJvcmJcIjtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiU2VjdXJlRG9jdW1lbnRcIl0gPSBcInNlY3VyZV9kb2N1bWVudFwiO1xuICBDcmVkZW50aWFsVHlwZTJbXCJEb2N1bWVudFwiXSA9IFwiZG9jdW1lbnRcIjtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiRGV2aWNlXCJdID0gXCJkZXZpY2VcIjtcbiAgcmV0dXJuIENyZWRlbnRpYWxUeXBlMjtcbn0pKENyZWRlbnRpYWxUeXBlIHx8IHt9KTtcbnZhciBWZXJpZmljYXRpb25MZXZlbCA9IC8qIEBfX1BVUkVfXyAqLyAoKFZlcmlmaWNhdGlvbkxldmVsMikgPT4ge1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJPcmJcIl0gPSBcIm9yYlwiO1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJTZWN1cmVEb2N1bWVudFwiXSA9IFwic2VjdXJlX2RvY3VtZW50XCI7XG4gIFZlcmlmaWNhdGlvbkxldmVsMltcIkRvY3VtZW50XCJdID0gXCJkb2N1bWVudFwiO1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJEZXZpY2VcIl0gPSBcImRldmljZVwiO1xuICByZXR1cm4gVmVyaWZpY2F0aW9uTGV2ZWwyO1xufSkoVmVyaWZpY2F0aW9uTGV2ZWwgfHwge30pO1xuXG4vLyBzcmMvYnJpZGdlLnRzXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tIFwienVzdGFuZFwiO1xuXG4vLyBzcmMvbGliL3ZhbGlkYXRpb24udHNcbmZ1bmN0aW9uIHZhbGlkYXRlX2JyaWRnZV91cmwoYnJpZGdlX3VybCwgaXNfc3RhZ2luZykge1xuICB0cnkge1xuICAgIG5ldyBVUkwoYnJpZGdlX3VybCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yczogW1wiRmFpbGVkIHRvIHBhcnNlIEJyaWRnZSBVUkwuXCJdIH07XG4gIH1cbiAgY29uc3QgdGVzdF91cmwgPSBuZXcgVVJMKGJyaWRnZV91cmwpO1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgaWYgKGlzX3N0YWdpbmcgJiYgW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCJdLmluY2x1ZGVzKHRlc3RfdXJsLmhvc3RuYW1lKSkge1xuICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgc3RhZ2luZyBhcHBfaWQgd2l0aCBsb2NhbGhvc3QgYnJpZGdlX3VybC4gU2tpcHBpbmcgdmFsaWRhdGlvbi5cIik7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbiAgfVxuICBpZiAodGVzdF91cmwucHJvdG9jb2wgIT09IFwiaHR0cHM6XCIpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCB1c2UgSFRUUFMuXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5wb3J0KSB7XG4gICAgZXJyb3JzLnB1c2goXCJCcmlkZ2UgVVJMIG11c3QgdXNlIHRoZSBkZWZhdWx0IHBvcnQgKDQ0MykuXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5wYXRobmFtZSAhPT0gXCIvXCIpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCBub3QgaGF2ZSBhIHBhdGguXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5zZWFyY2gpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCBub3QgaGF2ZSBxdWVyeSBwYXJhbWV0ZXJzLlwiKTtcbiAgfVxuICBpZiAodGVzdF91cmwuaGFzaCkge1xuICAgIGVycm9ycy5wdXNoKFwiQnJpZGdlIFVSTCBtdXN0IG5vdCBoYXZlIGEgZnJhZ21lbnQuXCIpO1xuICB9XG4gIGlmICghdGVzdF91cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIud29ybGRjb2luLm9yZ1wiKSAmJiAhdGVzdF91cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIudG9vbHNmb3JodW1hbml0eS5jb21cIikpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkJyaWRnZSBVUkwgc2hvdWxkIGJlIGEgc3ViZG9tYWluIG9mIHdvcmxkY29pbi5vcmcgb3IgdG9vbHNmb3JodW1hbml0eS5jb20uIFRoZSB1c2VyJ3MgaWRlbnRpdHkgd2FsbGV0IG1heSByZWZ1c2UgdG8gY29ubmVjdC4gVGhpcyBpcyBhIHRlbXBvcmFyeSBtZWFzdXJlIGFuZCBtYXkgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlwiXG4gICAgKTtcbiAgfVxuICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JzIH07XG4gIH1cbiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbn1cblxuLy8gc3JjL2xpYi91dGlscy50c1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlci9pbmRleC5qc1wiO1xudmFyIERFRkFVTFRfVkVSSUZJQ0FUSU9OX0xFVkVMID0gXCJvcmJcIiAvKiBPcmIgKi87XG52YXIgYnVmZmVyX2VuY29kZSA9IChidWZmZXIpID0+IHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1ZmZlcikudG9TdHJpbmcoXCJiYXNlNjRcIik7XG59O1xudmFyIGJ1ZmZlcl9kZWNvZGUgPSAoZW5jb2RlZCkgPT4ge1xuICByZXR1cm4gQnVmZmVyLmZyb20oZW5jb2RlZCwgXCJiYXNlNjRcIik7XG59O1xudmFyIHZlcmlmaWNhdGlvbl9sZXZlbF90b19jcmVkZW50aWFsX3R5cGVzID0gKHZlcmlmaWNhdGlvbl9sZXZlbCkgPT4ge1xuICBzd2l0Y2ggKHZlcmlmaWNhdGlvbl9sZXZlbCkge1xuICAgIGNhc2UgXCJkZXZpY2VcIiAvKiBEZXZpY2UgKi86XG4gICAgICByZXR1cm4gW1wib3JiXCIgLyogT3JiICovLCBcImRldmljZVwiIC8qIERldmljZSAqL107XG4gICAgY2FzZSBcImRvY3VtZW50XCIgLyogRG9jdW1lbnQgKi86XG4gICAgICByZXR1cm4gW1wiZG9jdW1lbnRcIiAvKiBEb2N1bWVudCAqLywgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLywgXCJvcmJcIiAvKiBPcmIgKi9dO1xuICAgIGNhc2UgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLzpcbiAgICAgIHJldHVybiBbXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLywgXCJvcmJcIiAvKiBPcmIgKi9dO1xuICAgIGNhc2UgXCJvcmJcIiAvKiBPcmIgKi86XG4gICAgICByZXR1cm4gW1wib3JiXCIgLyogT3JiICovXTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHZlcmlmaWNhdGlvbiBsZXZlbDogJHt2ZXJpZmljYXRpb25fbGV2ZWx9YCk7XG4gIH1cbn07XG52YXIgY3JlZGVudGlhbF90eXBlX3RvX3ZlcmlmaWNhdGlvbl9sZXZlbCA9IChjcmVkZW50aWFsX3R5cGUpID0+IHtcbiAgc3dpdGNoIChjcmVkZW50aWFsX3R5cGUpIHtcbiAgICBjYXNlIFwib3JiXCIgLyogT3JiICovOlxuICAgICAgcmV0dXJuIFwib3JiXCIgLyogT3JiICovO1xuICAgIGNhc2UgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLzpcbiAgICAgIHJldHVybiBcInNlY3VyZV9kb2N1bWVudFwiIC8qIFNlY3VyZURvY3VtZW50ICovO1xuICAgIGNhc2UgXCJkb2N1bWVudFwiIC8qIERvY3VtZW50ICovOlxuICAgICAgcmV0dXJuIFwiZG9jdW1lbnRcIiAvKiBEb2N1bWVudCAqLztcbiAgICBjYXNlIFwiZGV2aWNlXCIgLyogRGV2aWNlICovOlxuICAgICAgcmV0dXJuIFwiZGV2aWNlXCIgLyogRGV2aWNlICovO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY3JlZGVudGlhbF90eXBlOiAke2NyZWRlbnRpYWxfdHlwZX1gKTtcbiAgfVxufTtcblxuLy8gc3JjL2xpYi9jcnlwdG8udHNcbnZhciBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG52YXIgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xudmFyIGdlbmVyYXRlS2V5ID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGl2OiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxMikpLFxuICAgIGtleTogYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoeyBuYW1lOiBcIkFFUy1HQ01cIiwgbGVuZ3RoOiAyNTYgfSwgdHJ1ZSwgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl0pXG4gIH07XG59O1xudmFyIGV4cG9ydEtleSA9IGFzeW5jIChrZXkpID0+IHtcbiAgcmV0dXJuIGJ1ZmZlcl9lbmNvZGUoYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KFwicmF3XCIsIGtleSkpO1xufTtcbnZhciBlbmNyeXB0UmVxdWVzdCA9IGFzeW5jIChrZXksIGl2LCByZXF1ZXN0KSA9PiB7XG4gIHJldHVybiB7XG4gICAgaXY6IGJ1ZmZlcl9lbmNvZGUoaXYpLFxuICAgIHBheWxvYWQ6IGJ1ZmZlcl9lbmNvZGUoXG4gICAgICBhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHsgbmFtZTogXCJBRVMtR0NNXCIsIGl2IH0sIGtleSwgZW5jb2Rlci5lbmNvZGUocmVxdWVzdCkpXG4gICAgKVxuICB9O1xufTtcbnZhciBkZWNyeXB0UmVzcG9uc2UgPSBhc3luYyAoa2V5LCBpdiwgcGF5bG9hZCkgPT4ge1xuICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7IG5hbWU6IFwiQUVTLUdDTVwiLCBpdiB9LCBrZXksIGJ1ZmZlcl9kZWNvZGUocGF5bG9hZCkpKTtcbn07XG5cbi8vIHNyYy9icmlkZ2UudHNcbnZhciBERUZBVUxUX0JSSURHRV9VUkwgPSBcImh0dHBzOi8vYnJpZGdlLndvcmxkY29pbi5vcmdcIjtcbnZhciB1c2VXb3JsZEJyaWRnZVN0b3JlID0gY3JlYXRlKChzZXQsIGdldCkgPT4gKHtcbiAgaXY6IG51bGwsXG4gIGtleTogbnVsbCxcbiAgcmVzdWx0OiBudWxsLFxuICBlcnJvckNvZGU6IG51bGwsXG4gIHJlcXVlc3RJZDogbnVsbCxcbiAgY29ubmVjdG9yVVJJOiBudWxsLFxuICBicmlkZ2VfdXJsOiBERUZBVUxUX0JSSURHRV9VUkwsXG4gIHZlcmlmaWNhdGlvblN0YXRlOiBcImxvYWRpbmdfd2lkZ2V0XCIgLyogUHJlcGFyaW5nQ2xpZW50ICovLFxuICBjcmVhdGVDbGllbnQ6IGFzeW5jICh7IGJyaWRnZV91cmwsIGFwcF9pZCwgdmVyaWZpY2F0aW9uX2xldmVsLCBhY3Rpb25fZGVzY3JpcHRpb24sIGFjdGlvbiwgc2lnbmFsLCBwYXJ0bmVyIH0pID0+IHtcbiAgICBjb25zdCB7IGtleSwgaXYgfSA9IGF3YWl0IGdlbmVyYXRlS2V5KCk7XG4gICAgaWYgKGJyaWRnZV91cmwpIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZV9icmlkZ2VfdXJsKGJyaWRnZV91cmwsIGFwcF9pZC5pbmNsdWRlcyhcInN0YWdpbmdcIikpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodmFsaWRhdGlvbi5lcnJvcnMuam9pbihcIlxcblwiKSk7XG4gICAgICAgIHNldCh7IHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqLyB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBicmlkZ2VfdXJsLiBQbGVhc2UgY2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5cIik7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5ldyBVUkwoXCIvcmVxdWVzdFwiLCBicmlkZ2VfdXJsID8/IERFRkFVTFRfQlJJREdFX1VSTCksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgYXdhaXQgZW5jcnlwdFJlcXVlc3QoXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIGl2LFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGFwcF9pZCxcbiAgICAgICAgICAgIGFjdGlvbl9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGFjdGlvbjogZW5jb2RlQWN0aW9uKGFjdGlvbiksXG4gICAgICAgICAgICBzaWduYWw6IGdlbmVyYXRlU2lnbmFsKHNpZ25hbCkuZGlnZXN0LFxuICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlczogdmVyaWZpY2F0aW9uX2xldmVsX3RvX2NyZWRlbnRpYWxfdHlwZXMoXG4gICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9sZXZlbCA/PyBERUZBVUxUX1ZFUklGSUNBVElPTl9MRVZFTFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9sZXZlbDogdmVyaWZpY2F0aW9uX2xldmVsID8/IERFRkFVTFRfVkVSSUZJQ0FUSU9OX0xFVkVMXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICBzZXQoeyB2ZXJpZmljYXRpb25TdGF0ZTogXCJmYWlsZWRcIiAvKiBGYWlsZWQgKi8gfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIGNsaWVudFwiKTtcbiAgICB9XG4gICAgY29uc3QgeyByZXF1ZXN0X2lkIH0gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHNldCh7XG4gICAgICBpdixcbiAgICAgIGtleSxcbiAgICAgIHJlcXVlc3RJZDogcmVxdWVzdF9pZCxcbiAgICAgIGJyaWRnZV91cmw6IGJyaWRnZV91cmwgPz8gREVGQVVMVF9CUklER0VfVVJMLFxuICAgICAgdmVyaWZpY2F0aW9uU3RhdGU6IFwiYXdhaXRpbmdfY29ubmVjdGlvblwiIC8qIFdhaXRpbmdGb3JDb25uZWN0aW9uICovLFxuICAgICAgY29ubmVjdG9yVVJJOiBgaHR0cHM6Ly93b3JsZC5vcmcvdmVyaWZ5P3Q9d2xkJmk9JHtyZXF1ZXN0X2lkfSZrPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBhd2FpdCBleHBvcnRLZXkoa2V5KVxuICAgICAgKX0ke2JyaWRnZV91cmwgJiYgYnJpZGdlX3VybCAhPT0gREVGQVVMVF9CUklER0VfVVJMID8gYCZiPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGJyaWRnZV91cmwpfWAgOiBcIlwifSR7cGFydG5lciA/IGAmcGFydG5lcj0ke2VuY29kZVVSSUNvbXBvbmVudCh0cnVlKX1gIDogXCJcIn1gXG4gICAgfSk7XG4gIH0sXG4gIHBvbGxGb3JVcGRhdGVzOiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0KCkua2V5O1xuICAgIGlmICgha2V5KSB0aHJvdyBuZXcgRXJyb3IoXCJObyBrZXlwYWlyIGZvdW5kLiBQbGVhc2UgY2FsbCBgY3JlYXRlQ2xpZW50YCBmaXJzdC5cIik7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gobmV3IFVSTChgL3Jlc3BvbnNlLyR7Z2V0KCkucmVxdWVzdElkfWAsIGdldCgpLmJyaWRnZV91cmwpKTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgcmV0dXJuIHNldCh7XG4gICAgICAgIGVycm9yQ29kZTogXCJjb25uZWN0aW9uX2ZhaWxlZFwiIC8qIENvbm5lY3Rpb25GYWlsZWQgKi8sXG4gICAgICAgIHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqL1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcmVzcG9uc2UsIHN0YXR1cyB9ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBpZiAoc3RhdHVzICE9IFwiY29tcGxldGVkXCIgLyogQ29tcGxldGVkICovKSB7XG4gICAgICByZXR1cm4gc2V0KHtcbiAgICAgICAgdmVyaWZpY2F0aW9uU3RhdGU6IHN0YXR1cyA9PSBcInJldHJpZXZlZFwiIC8qIFJldHJpZXZlZCAqLyA/IFwiYXdhaXRpbmdfYXBwXCIgLyogV2FpdGluZ0ZvckFwcCAqLyA6IFwiYXdhaXRpbmdfY29ubmVjdGlvblwiIC8qIFdhaXRpbmdGb3JDb25uZWN0aW9uICovXG4gICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UoXG4gICAgICBhd2FpdCBkZWNyeXB0UmVzcG9uc2Uoa2V5LCBidWZmZXJfZGVjb2RlKHJlc3BvbnNlLml2KSwgcmVzcG9uc2UucGF5bG9hZClcbiAgICApO1xuICAgIGlmIChcImVycm9yX2NvZGVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHJldHVybiBzZXQoe1xuICAgICAgICBlcnJvckNvZGU6IHJlc3VsdC5lcnJvcl9jb2RlLFxuICAgICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJmYWlsZWRcIiAvKiBGYWlsZWQgKi9cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoXCJjcmVkZW50aWFsX3R5cGVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiBjcmVkZW50aWFsX3R5cGVfdG9fdmVyaWZpY2F0aW9uX2xldmVsKHJlc3VsdC5jcmVkZW50aWFsX3R5cGUpLFxuICAgICAgICAuLi5yZXN1bHRcbiAgICAgIH07XG4gICAgfVxuICAgIHNldCh7XG4gICAgICByZXN1bHQsXG4gICAgICBrZXk6IG51bGwsXG4gICAgICByZXF1ZXN0SWQ6IG51bGwsXG4gICAgICBjb25uZWN0b3JVUkk6IG51bGwsXG4gICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJjb25maXJtZWRcIiAvKiBDb25maXJtZWQgKi9cbiAgICB9KTtcbiAgfSxcbiAgcmVzZXQ6ICgpID0+IHtcbiAgICBzZXQoe1xuICAgICAgaXY6IG51bGwsXG4gICAgICBrZXk6IG51bGwsXG4gICAgICByZXN1bHQ6IG51bGwsXG4gICAgICBlcnJvckNvZGU6IG51bGwsXG4gICAgICByZXF1ZXN0SWQ6IG51bGwsXG4gICAgICBjb25uZWN0b3JVUkk6IG51bGwsXG4gICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJsb2FkaW5nX3dpZGdldFwiIC8qIFByZXBhcmluZ0NsaWVudCAqL1xuICAgIH0pO1xuICB9XG59KSk7XG5leHBvcnQge1xuICBBcHBFcnJvckNvZGVzLFxuICBDcmVkZW50aWFsVHlwZSxcbiAgREVGQVVMVF9WRVJJRklDQVRJT05fTEVWRUwsXG4gIFZlcmlmaWNhdGlvbkxldmVsLFxuICBWZXJpZmljYXRpb25TdGF0ZSxcbiAgdXNlV29ybGRCcmlkZ2VTdG9yZSxcbiAgdmVyaWZpY2F0aW9uX2xldmVsX3RvX2NyZWRlbnRpYWxfdHlwZXNcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@worldcoin/idkit-core/build/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/lib/backend.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyCloudProof: () => (/* binding */ verifyCloudProof)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var browser_or_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! browser-or-node */ \"(rsc)/./node_modules/browser-or-node/dist/index.mjs\");\n\n\n// src/lib/backend.ts\n\nasync function verifyCloudProof(proof, app_id, action, signal, endpoint) {\n  if (browser_or_node__WEBPACK_IMPORTED_MODULE_1__.isBrowser) {\n    throw new Error(\"verifyCloudProof can only be used in the backend.\");\n  }\n  const response = await fetch(endpoint ?? `https://developer.worldcoin.org/api/v2/verify/${app_id}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      ...proof,\n      action,\n      signal_hash: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField)(signal ?? \"\").digest\n    })\n  });\n  if (response.ok) {\n    return { success: true };\n  } else {\n    return { success: false, ...await response.json() };\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9iYWNrZW5kLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUU4Qjs7QUFFOUI7QUFDNEM7QUFDNUM7QUFDQSxNQUFNLHNEQUFTO0FBQ2Y7QUFDQTtBQUNBLDRGQUE0RixPQUFPO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0RBQVc7QUFDOUIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsiL1VzZXJzL21hdGVvc2F1dG9uL01hdHRlby1Qcm9qZWN0L215LWFwcC9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9iYWNrZW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGhhc2hUb0ZpZWxkXG59IGZyb20gXCIuLi9jaHVuay1IWjJTUUE1Vi5qc1wiO1xuXG4vLyBzcmMvbGliL2JhY2tlbmQudHNcbmltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gXCJicm93c2VyLW9yLW5vZGVcIjtcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUNsb3VkUHJvb2YocHJvb2YsIGFwcF9pZCwgYWN0aW9uLCBzaWduYWwsIGVuZHBvaW50KSB7XG4gIGlmIChpc0Jyb3dzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2ZXJpZnlDbG91ZFByb29mIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGJhY2tlbmQuXCIpO1xuICB9XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQgPz8gYGh0dHBzOi8vZGV2ZWxvcGVyLndvcmxkY29pbi5vcmcvYXBpL3YyL3ZlcmlmeS8ke2FwcF9pZH1gLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgLi4ucHJvb2YsXG4gICAgICBhY3Rpb24sXG4gICAgICBzaWduYWxfaGFzaDogaGFzaFRvRmllbGQoc2lnbmFsID8/IFwiXCIpLmRpZ2VzdFxuICAgIH0pXG4gIH0pO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIC4uLmF3YWl0IHJlc3BvbnNlLmpzb24oKSB9O1xuICB9XG59XG5leHBvcnQge1xuICB2ZXJpZnlDbG91ZFByb29mXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/lib/hashing.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction),\n/* harmony export */   generateSignal: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal),\n/* harmony export */   hashToField: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField),\n/* harmony export */   packAndEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.packAndEncode),\n/* harmony export */   solidityEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.solidityEncode)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9oYXNoaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQU04QjtBQU81QiIsInNvdXJjZXMiOlsiL1VzZXJzL21hdGVvc2F1dG9uL01hdHRlby1Qcm9qZWN0L215LWFwcC9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9oYXNoaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufSBmcm9tIFwiLi4vY2h1bmstSFoyU1FBNVYuanNcIjtcbmV4cG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@worldcoin/minikit-js/build/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@worldcoin/minikit-js/build/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* binding */ GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* binding */ GetPermissionsErrorMessage),\n/* harmony export */   MiniKit: () => (/* binding */ MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* binding */ MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* binding */ MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* binding */ Network),\n/* harmony export */   PaymentErrorCodes: () => (/* binding */ PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* binding */ PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* binding */ PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* binding */ RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* binding */ RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* binding */ ResponseEvent),\n/* harmony export */   SAFE_CONTRACT_ABI: () => (/* binding */ SAFE_CONTRACT_ABI),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* binding */ SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* binding */ SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* binding */ SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* binding */ SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* binding */ ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* binding */ ShareContactsErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* binding */ SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* binding */ SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* binding */ SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* binding */ SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* binding */ TokenDecimals),\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   VerificationErrorCodes: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   VerificationErrorMessage: () => (/* binding */ VerificationErrorMessage),\n/* harmony export */   VerificationLevel: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel),\n/* harmony export */   WalletAuthErrorCodes: () => (/* binding */ WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* binding */ WalletAuthErrorMessage),\n/* harmony export */   getIsUserVerified: () => (/* binding */ getIsUserVerified),\n/* harmony export */   parseSiweMessage: () => (/* binding */ parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* binding */ tokenToDecimals),\n/* harmony export */   verifyCloudProof: () => (/* reexport safe */ _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_10__.verifyCloudProof),\n/* harmony export */   verifySiweMessage: () => (/* binding */ verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var _worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @worldcoin/idkit-core/hashing */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/utils/abi/decodeAbiParameters.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/utils/abi/encodeAbiParameters.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem/chains */ \"(rsc)/./node_modules/viem/_esm/chains/definitions/worldchain.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/utils/signature/hashMessage.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/actions/getContract.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! viem */ \"(rsc)/./node_modules/viem/_esm/utils/signature/recoverAddress.js\");\n/* harmony import */ var _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @worldcoin/idkit-core/backend */ \"(rsc)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js\");\n// minikit.ts\n\n\n\n// types/payment.ts\nvar Tokens = /* @__PURE__ */ ((Tokens3) => {\n  Tokens3[\"USDCE\"] = \"USDCE\";\n  Tokens3[\"WLD\"] = \"WLD\";\n  return Tokens3;\n})(Tokens || {});\nvar TokenDecimals = {\n  [\"USDCE\" /* USDCE */]: 6,\n  [\"WLD\" /* WLD */]: 18\n};\nvar Network = /* @__PURE__ */ ((Network2) => {\n  Network2[\"Optimism\"] = \"optimism\";\n  Network2[\"WorldChain\"] = \"worldchain\";\n  return Network2;\n})(Network || {});\n\n// helpers/payment/client.ts\nvar tokenToDecimals = (amount, token) => {\n  const decimals = TokenDecimals[token];\n  if (decimals === void 0) {\n    throw new Error(`Invalid token: ${token}`);\n  }\n  const factor = 10 ** decimals;\n  const result = amount * factor;\n  if (!Number.isInteger(result)) {\n    throw new Error(`The resulting amount is not a whole number: ${result}`);\n  }\n  return result;\n};\nvar validatePaymentPayload = (payload) => {\n  if (payload.tokens.some(\n    (token) => token.symbol == \"USDCE\" && parseFloat(token.token_amount) < 0.1\n  )) {\n    console.error(\"USDCE amount should be greater than $0.1\");\n    return false;\n  }\n  if (payload.reference.length > 36) {\n    console.error(\"Reference must not exceed 36 characters\");\n    return false;\n  }\n  if (typeof payload.reference !== \"string\") {\n    throw new Error(\"Reference must be a string\");\n  }\n  return true;\n};\n\n// helpers/proof/index.ts\n\n\nvar semaphoreVerifierAddress = \"0x79f46b94d134109EbcbbddBAeD0E88790409A0e4\";\nvar semaphoreVerifierAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"uint256[8]\",\n        name: \"proof\",\n        type: \"uint256[8]\"\n      }\n    ],\n    name: \"compressProof\",\n    outputs: [\n      {\n        internalType: \"uint256[4]\",\n        name: \"compressed\",\n        type: \"uint256[4]\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar compressAndPadProof = async (proof, rpcUrl) => {\n  try {\n    const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({\n      chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain,\n      transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)(\n        rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n      )\n    });\n    const decodedProof = (0,viem__WEBPACK_IMPORTED_MODULE_5__.decodeAbiParameters)(\n      [{ type: \"uint256[8]\" }],\n      proof\n    )[0];\n    const compressedProof = await publicClient.readContract({\n      address: semaphoreVerifierAddress,\n      abi: semaphoreVerifierAbi,\n      functionName: \"compressProof\",\n      args: [decodedProof]\n    });\n    const paddedProof = [...compressedProof, 0n, 0n, 0n, 0n];\n    return (0,viem__WEBPACK_IMPORTED_MODULE_6__.encodeAbiParameters)([{ type: \"uint256[8]\" }], [paddedProof]);\n  } catch (e) {\n    console.log(\"Failed to compress proof\", {\n      e,\n      proof\n    });\n    return proof;\n  }\n};\n\n// helpers/siwe/siwe.ts\n\n\nvar PREAMBLE = \" wants you to sign in with your Ethereum account:\";\nvar URI_TAG = \"URI: \";\nvar VERSION_TAG = \"Version: \";\nvar CHAIN_TAG = \"Chain ID: \";\nvar NONCE_TAG = \"Nonce: \";\nvar IAT_TAG = \"Issued At: \";\nvar EXP_TAG = \"Expiration Time: \";\nvar NBF_TAG = \"Not Before: \";\nvar RID_TAG = \"Request ID: \";\nvar ERC_191_PREFIX = \"\u0019Ethereum Signed Message:\\n\";\nvar tagged = (line, tag) => {\n  if (line && line.includes(tag)) {\n    return line.replace(tag, \"\");\n  } else {\n    throw new Error(`Missing '${tag}'`);\n  }\n};\nvar parseSiweMessage = (inputString) => {\n  const lines = inputString.split(\"\\n\")[Symbol.iterator]();\n  const domain = tagged(lines.next()?.value, PREAMBLE);\n  const address = lines.next()?.value;\n  lines.next();\n  const nextValue = lines.next()?.value;\n  let statement;\n  if (nextValue) {\n    statement = nextValue;\n    lines.next();\n  }\n  const uri = tagged(lines.next()?.value, URI_TAG);\n  const version = tagged(lines.next()?.value, VERSION_TAG);\n  const chain_id = tagged(lines.next()?.value, CHAIN_TAG);\n  const nonce = tagged(lines.next()?.value, NONCE_TAG);\n  const issued_at = tagged(lines.next()?.value, IAT_TAG);\n  let expiration_time, not_before, request_id;\n  for (let line of lines) {\n    if (line.startsWith(EXP_TAG)) {\n      expiration_time = tagged(line, EXP_TAG);\n    } else if (line.startsWith(NBF_TAG)) {\n      not_before = tagged(line, NBF_TAG);\n    } else if (line.startsWith(RID_TAG)) {\n      request_id = tagged(line, RID_TAG);\n    }\n  }\n  if (lines.next().done === false) {\n    throw new Error(\"Extra lines in the input\");\n  }\n  const siweMessageData = {\n    domain,\n    address,\n    statement,\n    uri,\n    version,\n    chain_id,\n    nonce,\n    issued_at,\n    expiration_time,\n    not_before,\n    request_id\n  };\n  return siweMessageData;\n};\nvar generateSiweMessage = (siweMessageData) => {\n  let siweMessage = \"\";\n  if (siweMessageData.scheme) {\n    siweMessage += `${siweMessageData.scheme}://${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  } else {\n    siweMessage += `${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  }\n  if (siweMessageData.address) {\n    siweMessage += `${siweMessageData.address}\n`;\n  } else {\n    siweMessage += \"{address}\\n\";\n  }\n  siweMessage += \"\\n\";\n  if (siweMessageData.statement) {\n    siweMessage += `${siweMessageData.statement}\n`;\n  }\n  siweMessage += \"\\n\";\n  siweMessage += `URI: ${siweMessageData.uri}\n`;\n  siweMessage += `Version: ${siweMessageData.version}\n`;\n  siweMessage += `Chain ID: ${siweMessageData.chain_id}\n`;\n  siweMessage += `Nonce: ${siweMessageData.nonce}\n`;\n  siweMessage += `Issued At: ${siweMessageData.issued_at}\n`;\n  if (siweMessageData.expiration_time) {\n    siweMessage += `Expiration Time: ${siweMessageData.expiration_time}\n`;\n  }\n  if (siweMessageData.not_before) {\n    siweMessage += `Not Before: ${siweMessageData.not_before}\n`;\n  }\n  if (siweMessageData.request_id) {\n    siweMessage += `Request ID: ${siweMessageData.request_id}\n`;\n  }\n  return siweMessage;\n};\nvar SAFE_CONTRACT_ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\"\n      }\n    ],\n    name: \"isOwner\",\n    outputs: [\n      {\n        internalType: \"bool\",\n        name: \"\",\n        type: \"bool\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar verifySiweMessage = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Verify can only be called in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  if (siweMessageData.expiration_time) {\n    const expirationTime = new Date(siweMessageData.expiration_time);\n    if (expirationTime < /* @__PURE__ */ new Date()) {\n      throw new Error(\"Expired message\");\n    }\n  }\n  if (siweMessageData.not_before) {\n    const notBefore = new Date(siweMessageData.not_before);\n    if (notBefore > /* @__PURE__ */ new Date()) {\n      throw new Error(\"Not Before time has not passed\");\n    }\n  }\n  if (nonce && siweMessageData.nonce !== nonce) {\n    throw new Error(\n      `Nonce mismatch. Got: ${siweMessageData.nonce}, Expected: ${nonce}`\n    );\n  }\n  if (statement && siweMessageData.statement !== statement) {\n    throw new Error(\n      `Statement mismatch. Got: ${siweMessageData.statement}, Expected: ${statement}`\n    );\n  }\n  if (requestId && siweMessageData.request_id !== requestId) {\n    throw new Error(\n      `Request ID mismatch. Got: ${siweMessageData.request_id}, Expected: ${requestId}`\n    );\n  }\n  let provider = userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)() });\n  const signedMessage = `${ERC_191_PREFIX}${message.length}${message}`;\n  const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_7__.hashMessage)(signedMessage);\n  const contract = (0,viem__WEBPACK_IMPORTED_MODULE_8__.getContract)({\n    address,\n    abi: SAFE_CONTRACT_ABI,\n    client: provider\n  });\n  try {\n    const recoveredAddress = await (0,viem__WEBPACK_IMPORTED_MODULE_9__.recoverAddress)({\n      hash: hashedMessage,\n      signature: `0x${signature}`\n    });\n    const isOwner = await contract.read.isOwner([recoveredAddress]);\n    if (!isOwner) {\n      throw new Error(\"Signature verification failed, invalid owner\");\n    }\n  } catch (error) {\n    throw new Error(\"Signature verification failed\");\n  }\n  return { isValid: true, siweMessageData };\n};\n\n// helpers/siwe/validate-wallet-auth-command-input.ts\nvar validateWalletAuthCommandInput = (params) => {\n  if (!params.nonce) {\n    return { valid: false, message: \"'nonce' is required\" };\n  }\n  if (params.nonce.length < 8) {\n    return { valid: false, message: \"'nonce' must be at least 8 characters\" };\n  }\n  if (params.statement && params.statement.includes(\"\\n\")) {\n    return { valid: false, message: \"'statement' must not contain newlines\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) < /* @__PURE__ */ new Date()) {\n    return { valid: false, message: \"'expirationTime' must be in the future\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'expirationTime' must be within 7 days\" };\n  }\n  if (params.notBefore && new Date(params.notBefore) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'notBefore' must be within 7 days\" };\n  }\n  return { valid: true };\n};\n\n// helpers/transaction/validate-payload.ts\nvar isValidHex = (str) => {\n  return /^0x[0-9A-Fa-f]+$/.test(str);\n};\nvar processPayload = (payload) => {\n  if (typeof payload === \"boolean\" || typeof payload === \"string\" || payload === null || payload === void 0) {\n    return payload;\n  }\n  if (typeof payload === \"number\" || typeof payload === \"bigint\") {\n    return String(payload);\n  }\n  if (Array.isArray(payload)) {\n    return payload.map((value) => processPayload(value));\n  }\n  if (typeof payload === \"object\") {\n    const result = { ...payload };\n    if (\"value\" in result && result.value !== void 0) {\n      if (typeof result.value !== \"string\") {\n        result.value = String(result.value);\n      }\n      if (!isValidHex(result.value)) {\n        console.error(\n          \"Transaction value must be a valid hex string\",\n          result.value\n        );\n        throw new Error(\n          `Transaction value must be a valid hex string: ${result.value}`\n        );\n      }\n    }\n    for (const key in result) {\n      if (Object.prototype.hasOwnProperty.call(result, key)) {\n        result[key] = processPayload(result[key]);\n      }\n    }\n    return result;\n  }\n  return payload;\n};\nvar validateSendTransactionPayload = (payload) => {\n  return processPayload(payload);\n};\n\n// helpers/usernames/index.ts\nvar getUserProfile = async (address) => {\n  const res = await fetch(\"https://usernames.worldcoin.org/api/v1/query\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      addresses: [address]\n    })\n  });\n  const usernames = await res.json();\n  return usernames?.[0] ?? { username: null, profilePictureUrl: null };\n};\n\n// types/commands.ts\nvar Command = /* @__PURE__ */ ((Command2) => {\n  Command2[\"Verify\"] = \"verify\";\n  Command2[\"Pay\"] = \"pay\";\n  Command2[\"WalletAuth\"] = \"wallet-auth\";\n  Command2[\"SendTransaction\"] = \"send-transaction\";\n  Command2[\"SignMessage\"] = \"sign-message\";\n  Command2[\"SignTypedData\"] = \"sign-typed-data\";\n  Command2[\"ShareContacts\"] = \"share-contacts\";\n  Command2[\"RequestPermission\"] = \"request-permission\";\n  Command2[\"GetPermissions\"] = \"get-permissions\";\n  Command2[\"SendHapticFeedback\"] = \"send-haptic-feedback\";\n  return Command2;\n})(Command || {});\nvar Permission = /* @__PURE__ */ ((Permission2) => {\n  Permission2[\"Notifications\"] = \"notifications\";\n  Permission2[\"Contacts\"] = \"contacts\";\n  return Permission2;\n})(Permission || {});\n\n// types/errors.ts\n\n\nvar VerificationErrorMessage = {\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected]: \"You've cancelled the request in World App.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MaxVerificationsReached]: \"You have already verified the maximum number of times for this action.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.CredentialUnavailable]: \"It seems you do not have the verification level required by this app.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MalformedRequest]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InvalidNetwork]: \"Invalid network. If you are the app owner, visit docs.worldcoin.org/test for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofFailed]: \"There was an issue fetching your credential. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofPending]: \"Your identity is still being registered. Please wait a few minutes and try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.UnexpectedResponse]: \"Unexpected response from your wallet. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.FailedByHostApp]: \"Verification failed by the app. Please contact the app owner for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.GenericError]: \"Something unexpected went wrong. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.ConnectionFailed]: \"Connection to your wallet failed. Please try again.\"\n};\nvar PaymentErrorCodes = /* @__PURE__ */ ((PaymentErrorCodes2) => {\n  PaymentErrorCodes2[\"InputError\"] = \"input_error\";\n  PaymentErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  PaymentErrorCodes2[\"PaymentRejected\"] = \"payment_rejected\";\n  PaymentErrorCodes2[\"InvalidReceiver\"] = \"invalid_receiver\";\n  PaymentErrorCodes2[\"InsufficientBalance\"] = \"insufficient_balance\";\n  PaymentErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  PaymentErrorCodes2[\"GenericError\"] = \"generic_error\";\n  PaymentErrorCodes2[\"UserBlocked\"] = \"user_blocked\";\n  return PaymentErrorCodes2;\n})(PaymentErrorCodes || {});\nvar PaymentErrorMessage = {\n  [\"input_error\" /* InputError */]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [\"user_rejected\" /* UserRejected */]: \"You have cancelled the payment in World App.\",\n  [\"payment_rejected\" /* PaymentRejected */]: \"You've cancelled the payment in World App.\",\n  [\"invalid_receiver\" /* InvalidReceiver */]: \"The receiver address is invalid. Please contact the app owner.\",\n  [\"insufficient_balance\" /* InsufficientBalance */]: \"You do not have enough balance to complete this transaction.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"user_blocked\" /* UserBlocked */]: \"User's region is blocked from making payments.\"\n};\nvar PaymentValidationErrors = /* @__PURE__ */ ((PaymentValidationErrors2) => {\n  PaymentValidationErrors2[\"MalformedRequest\"] = \"There was a problem with this request. Please try again or contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidTokenAddress\"] = \"The token address is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidAppId\"] = \"The app ID is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"DuplicateReference\"] = \"This reference ID already exists please generate a new one and try again.\";\n  return PaymentValidationErrors2;\n})(PaymentValidationErrors || {});\nvar WalletAuthErrorCodes = /* @__PURE__ */ ((WalletAuthErrorCodes2) => {\n  WalletAuthErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  WalletAuthErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  WalletAuthErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return WalletAuthErrorCodes2;\n})(WalletAuthErrorCodes || {});\nvar WalletAuthErrorMessage = {\n  [\"malformed_request\" /* MalformedRequest */]: \"Provided parameters in the request are invalid.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SendTransactionErrorCodes = /* @__PURE__ */ ((SendTransactionErrorCodes2) => {\n  SendTransactionErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SendTransactionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SendTransactionErrorCodes2[\"InputError\"] = \"input_error\";\n  SendTransactionErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SendTransactionErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  SendTransactionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendTransactionErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SendTransactionErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SendTransactionErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  SendTransactionErrorCodes2[\"DailyTxLimitReached\"] = \"daily_tx_limit_reached\";\n  SendTransactionErrorCodes2[\"PermittedAmountExceedsSlippage\"] = \"permitted_amount_exceeds_slippage\";\n  SendTransactionErrorCodes2[\"PermittedAmountNotFound\"] = \"permitted_amount_not_found\";\n  return SendTransactionErrorCodes2;\n})(SendTransactionErrorCodes || {});\nvar SendTransactionErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again later.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\",\n  [\"daily_tx_limit_reached\" /* DailyTxLimitReached */]: \"Daily transaction limit reached. Max 100 transactions per day. Wait until the next day.\",\n  [\"permitted_amount_exceeds_slippage\" /* PermittedAmountExceedsSlippage */]: \"Permitted amount exceeds slippage. You must spend at least 90% of the permitted amount.\",\n  [\"permitted_amount_not_found\" /* PermittedAmountNotFound */]: \"Permitted amount not found in permit2 payload.\"\n};\nvar SignMessageErrorCodes = /* @__PURE__ */ ((SignMessageErrorCodes2) => {\n  SignMessageErrorCodes2[\"InvalidMessage\"] = \"invalid_message\";\n  SignMessageErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignMessageErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return SignMessageErrorCodes2;\n})(SignMessageErrorCodes || {});\nvar SignMessageErrorMessage = {\n  [\"invalid_message\" /* InvalidMessage */]: \"Invalid message requested\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SignTypedDataErrorCodes = /* @__PURE__ */ ((SignTypedDataErrorCodes2) => {\n  SignTypedDataErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SignTypedDataErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignTypedDataErrorCodes2[\"InputError\"] = \"input_error\";\n  SignTypedDataErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SignTypedDataErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SignTypedDataErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SignTypedDataErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SignTypedDataErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  return SignTypedDataErrorCodes2;\n})(SignTypedDataErrorCodes || {});\nvar SignTypedDataErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\"\n};\nvar MiniKitInstallErrorCodes = /* @__PURE__ */ ((MiniKitInstallErrorCodes2) => {\n  MiniKitInstallErrorCodes2[\"Unknown\"] = \"unknown\";\n  MiniKitInstallErrorCodes2[\"AlreadyInstalled\"] = \"already_installed\";\n  MiniKitInstallErrorCodes2[\"OutsideOfWorldApp\"] = \"outside_of_worldapp\";\n  MiniKitInstallErrorCodes2[\"NotOnClient\"] = \"not_on_client\";\n  MiniKitInstallErrorCodes2[\"AppOutOfDate\"] = \"app_out_of_date\";\n  return MiniKitInstallErrorCodes2;\n})(MiniKitInstallErrorCodes || {});\nvar MiniKitInstallErrorMessage = {\n  [\"unknown\" /* Unknown */]: \"Failed to install MiniKit.\",\n  [\"already_installed\" /* AlreadyInstalled */]: \"MiniKit is already installed.\",\n  [\"outside_of_worldapp\" /* OutsideOfWorldApp */]: \"MiniApp launched outside of WorldApp.\",\n  [\"not_on_client\" /* NotOnClient */]: \"Window object is not available.\",\n  [\"app_out_of_date\" /* AppOutOfDate */]: \"WorldApp is out of date. Please update the app.\"\n};\nvar ShareContactsErrorCodes = /* @__PURE__ */ ((ShareContactsErrorCodes2) => {\n  ShareContactsErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareContactsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ShareContactsErrorCodes2;\n})(ShareContactsErrorCodes || {});\nvar ShareContactsErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar RequestPermissionErrorCodes = /* @__PURE__ */ ((RequestPermissionErrorCodes2) => {\n  RequestPermissionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  RequestPermissionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  RequestPermissionErrorCodes2[\"AlreadyRequested\"] = \"already_requested\";\n  RequestPermissionErrorCodes2[\"PermissionDisabled\"] = \"permission_disabled\";\n  RequestPermissionErrorCodes2[\"AlreadyGranted\"] = \"already_granted\";\n  RequestPermissionErrorCodes2[\"UnsupportedPermission\"] = \"unsupported_permission\";\n  return RequestPermissionErrorCodes2;\n})(RequestPermissionErrorCodes || {});\nvar RequestPermissionErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User declined sharing contacts\",\n  [\"generic_error\" /* GenericError */]: \"Request failed for unknown reason.\",\n  [\"already_requested\" /* AlreadyRequested */]: \"User has already declined turning on notifications once\",\n  [\"permission_disabled\" /* PermissionDisabled */]: \"User does not have this permission enabled in World App\",\n  [\"already_granted\" /* AlreadyGranted */]: \"If the user has already granted this mini app permission\",\n  [\"unsupported_permission\" /* UnsupportedPermission */]: \"The permission requested is not supported by this mini app\"\n};\nvar GetPermissionsErrorCodes = /* @__PURE__ */ ((GetPermissionsErrorCodes2) => {\n  GetPermissionsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return GetPermissionsErrorCodes2;\n})(GetPermissionsErrorCodes || {});\nvar GetPermissionsErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\"\n};\nvar SendHapticFeedbackErrorCodes = /* @__PURE__ */ ((SendHapticFeedbackErrorCodes2) => {\n  SendHapticFeedbackErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendHapticFeedbackErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  return SendHapticFeedbackErrorCodes2;\n})(SendHapticFeedbackErrorCodes || {});\nvar SendHapticFeedbackErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\"\n};\n\n// helpers/send-webview-event.ts\nvar sendWebviewEvent = (payload) => {\n  if (window.webkit) {\n    window.webkit?.messageHandlers?.minikit?.postMessage?.(payload);\n  } else if (window.Android) {\n    window.Android.postMessage?.(JSON.stringify(payload));\n  }\n};\n\n// types/responses.ts\nvar ResponseEvent = /* @__PURE__ */ ((ResponseEvent2) => {\n  ResponseEvent2[\"MiniAppVerifyAction\"] = \"miniapp-verify-action\";\n  ResponseEvent2[\"MiniAppPayment\"] = \"miniapp-payment\";\n  ResponseEvent2[\"MiniAppWalletAuth\"] = \"miniapp-wallet-auth\";\n  ResponseEvent2[\"MiniAppSendTransaction\"] = \"miniapp-send-transaction\";\n  ResponseEvent2[\"MiniAppSignMessage\"] = \"miniapp-sign-message\";\n  ResponseEvent2[\"MiniAppSignTypedData\"] = \"miniapp-sign-typed-data\";\n  ResponseEvent2[\"MiniAppShareContacts\"] = \"miniapp-share-contacts\";\n  ResponseEvent2[\"MiniAppRequestPermission\"] = \"miniapp-request-permission\";\n  ResponseEvent2[\"MiniAppGetPermissions\"] = \"miniapp-get-permissions\";\n  ResponseEvent2[\"MiniAppSendHapticFeedback\"] = \"miniapp-send-haptic-feedback\";\n  return ResponseEvent2;\n})(ResponseEvent || {});\n\n// minikit.ts\nvar sendMiniKitEvent = (payload) => {\n  sendWebviewEvent(payload);\n};\nvar _MiniKit = class _MiniKit {\n  static sendInit() {\n    sendWebviewEvent({\n      command: \"init\",\n      payload: { version: this.MINIKIT_VERSION }\n    });\n  }\n  static subscribe(event, handler) {\n    if (event === \"miniapp-wallet-auth\" /* MiniAppWalletAuth */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"success\") {\n          _MiniKit.walletAddress = payload.address;\n          _MiniKit.getUserByAddress(payload.address).then((user) => {\n            _MiniKit.user = user;\n          });\n        }\n        originalHandler(payload);\n      };\n      this.listeners[event] = wrappedHandler;\n    } else if (event === \"miniapp-verify-action\" /* MiniAppVerifyAction */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"success\" && payload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          compressAndPadProof(payload.proof).then(\n            (compressedProof) => {\n              payload.proof = compressedProof;\n              originalHandler(payload);\n            }\n          );\n        } else {\n          originalHandler(payload);\n        }\n      };\n      this.listeners[event] = wrappedHandler;\n    } else {\n      this.listeners[event] = handler;\n    }\n  }\n  static unsubscribe(event) {\n    delete this.listeners[event];\n  }\n  static trigger(event, payload) {\n    if (!this.listeners[event]) {\n      console.error(`No handler for event ${event}`);\n      return;\n    }\n    this.listeners[event](payload);\n  }\n  static async awaitCommand(event, command, executor) {\n    return new Promise((resolve) => {\n      let commandPayload = null;\n      const handleAndUnsubscribe = (payload) => {\n        this.unsubscribe(event);\n        resolve({ commandPayload, finalPayload: payload });\n      };\n      this.subscribe(event, handleAndUnsubscribe);\n      commandPayload = executor();\n    });\n  }\n  static commandsValid(worldAppSupportedCommands) {\n    return Object.entries(this.miniKitCommandVersion).every(\n      ([minikitCommandName, version]) => {\n        const commandInput = worldAppSupportedCommands.find(\n          (command) => command.name === minikitCommandName\n        );\n        if (!commandInput) {\n          console.error(\n            `Command ${minikitCommandName} is not supported by the app. Try updating the app version`\n          );\n        } else {\n          _MiniKit.isCommandAvailable[minikitCommandName] = true;\n        }\n        return commandInput ? commandInput.supported_versions.includes(version) : false;\n      }\n    );\n  }\n  static install(appId) {\n    if (typeof window === \"undefined\" || Boolean(window.MiniKit)) {\n      return {\n        success: false,\n        errorCode: \"already_installed\" /* AlreadyInstalled */,\n        errorMessage: MiniKitInstallErrorMessage[\"already_installed\" /* AlreadyInstalled */]\n      };\n    }\n    if (!appId) {\n      console.warn(\"App ID not provided during install\");\n    } else {\n      _MiniKit.appId = appId;\n    }\n    if (!window.WorldApp) {\n      return {\n        success: false,\n        errorCode: \"outside_of_worldapp\" /* OutsideOfWorldApp */,\n        errorMessage: MiniKitInstallErrorMessage[\"outside_of_worldapp\" /* OutsideOfWorldApp */]\n      };\n    }\n    try {\n      window.MiniKit = _MiniKit;\n      this.sendInit();\n    } catch (error) {\n      console.error(\n        MiniKitInstallErrorMessage[\"unknown\" /* Unknown */],\n        error\n      );\n      return {\n        success: false,\n        errorCode: \"unknown\" /* Unknown */,\n        errorMessage: MiniKitInstallErrorMessage[\"unknown\" /* Unknown */]\n      };\n    }\n    if (!this.commandsValid(window.WorldApp.supported_commands)) {\n      return {\n        success: false,\n        errorCode: \"app_out_of_date\" /* AppOutOfDate */,\n        errorMessage: MiniKitInstallErrorMessage[\"app_out_of_date\" /* AppOutOfDate */]\n      };\n    }\n    return { success: true };\n  }\n  static isInstalled(debug) {\n    if (debug) console.log(\"MiniKit is alive!\");\n    const isInstalled = Boolean(window.MiniKit);\n    if (!isInstalled)\n      console.error(\n        \"MiniKit is not installed. Make sure you're running the application inside of World App\"\n      );\n    return isInstalled;\n  }\n};\n_MiniKit.MINIKIT_VERSION = 1;\n_MiniKit.miniKitCommandVersion = {\n  [\"verify\" /* Verify */]: 1,\n  [\"pay\" /* Pay */]: 1,\n  [\"wallet-auth\" /* WalletAuth */]: 1,\n  [\"send-transaction\" /* SendTransaction */]: 1,\n  [\"sign-message\" /* SignMessage */]: 1,\n  [\"sign-typed-data\" /* SignTypedData */]: 1,\n  [\"share-contacts\" /* ShareContacts */]: 1,\n  [\"request-permission\" /* RequestPermission */]: 1,\n  [\"get-permissions\" /* GetPermissions */]: 1,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: 1\n};\n_MiniKit.isCommandAvailable = {\n  [\"verify\" /* Verify */]: false,\n  [\"pay\" /* Pay */]: false,\n  [\"wallet-auth\" /* WalletAuth */]: false,\n  [\"send-transaction\" /* SendTransaction */]: false,\n  [\"sign-message\" /* SignMessage */]: false,\n  [\"sign-typed-data\" /* SignTypedData */]: false,\n  [\"share-contacts\" /* ShareContacts */]: false,\n  [\"request-permission\" /* RequestPermission */]: false,\n  [\"get-permissions\" /* GetPermissions */]: false,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: false\n};\n_MiniKit.listeners = {\n  [\"miniapp-verify-action\" /* MiniAppVerifyAction */]: () => {\n  },\n  [\"miniapp-payment\" /* MiniAppPayment */]: () => {\n  },\n  [\"miniapp-wallet-auth\" /* MiniAppWalletAuth */]: () => {\n  },\n  [\"miniapp-send-transaction\" /* MiniAppSendTransaction */]: () => {\n  },\n  [\"miniapp-sign-message\" /* MiniAppSignMessage */]: () => {\n  },\n  [\"miniapp-sign-typed-data\" /* MiniAppSignTypedData */]: () => {\n  },\n  [\"miniapp-share-contacts\" /* MiniAppShareContacts */]: () => {\n  },\n  [\"miniapp-request-permission\" /* MiniAppRequestPermission */]: () => {\n  },\n  [\"miniapp-get-permissions\" /* MiniAppGetPermissions */]: () => {\n  },\n  [\"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */]: () => {\n  }\n};\n_MiniKit.appId = null;\n/**\n * @deprecated you should use MiniKit.user.walletAddress instead\n */\n_MiniKit.walletAddress = null;\n_MiniKit.user = null;\n_MiniKit.getUserByAddress = async (address) => {\n  const userProfile = await getUserProfile(address);\n  return {\n    walletAddress: address,\n    username: userProfile.username,\n    profilePictureUrl: userProfile.profilePictureUrl\n  };\n};\n_MiniKit.commands = {\n  verify: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"verify\" /* Verify */]) {\n      console.error(\n        \"'verify' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n    const eventPayload = {\n      action: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__.encodeAction)(payload.action),\n      signal: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__.generateSignal)(payload.signal).digest,\n      verification_level: payload.verification_level || _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb,\n      timestamp\n    };\n    sendMiniKitEvent({\n      command: \"verify\" /* Verify */,\n      version: _MiniKit.miniKitCommandVersion[\"verify\" /* Verify */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  pay: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"pay\" /* Pay */]) {\n      console.error(\n        \"'pay' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!validatePaymentPayload(payload)) {\n      return null;\n    }\n    const network = \"worldchain\" /* WorldChain */;\n    const eventPayload = {\n      ...payload,\n      network\n    };\n    sendMiniKitEvent({\n      command: \"pay\" /* Pay */,\n      version: _MiniKit.miniKitCommandVersion[\"pay\" /* Pay */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  walletAuth: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"wallet-auth\" /* WalletAuth */]) {\n      console.error(\n        \"'walletAuth' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validationResult = validateWalletAuthCommandInput(payload);\n    if (!validationResult.valid) {\n      console.error(\n        \"Failed to validate wallet auth input:\\n\\n -->\",\n        validationResult.message\n      );\n      return null;\n    }\n    let protocol = null;\n    try {\n      const currentUrl = new URL(window.location.href);\n      protocol = currentUrl.protocol.split(\":\")[0];\n    } catch (error) {\n      console.error(\"Failed to get current URL\", error);\n      return null;\n    }\n    const siweMessage = generateSiweMessage({\n      scheme: protocol,\n      domain: window.location.host,\n      statement: payload.statement ?? void 0,\n      uri: window.location.href,\n      version: 1,\n      chain_id: 480,\n      nonce: payload.nonce,\n      issued_at: (/* @__PURE__ */ new Date()).toISOString(),\n      expiration_time: payload.expirationTime?.toISOString() ?? void 0,\n      not_before: payload.notBefore?.toISOString() ?? void 0,\n      request_id: payload.requestId ?? void 0\n    });\n    const walletAuthPayload = { siweMessage };\n    sendMiniKitEvent({\n      command: \"wallet-auth\" /* WalletAuth */,\n      version: _MiniKit.miniKitCommandVersion[\"wallet-auth\" /* WalletAuth */],\n      payload: walletAuthPayload\n    });\n    return walletAuthPayload;\n  },\n  sendTransaction: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-transaction\" /* SendTransaction */]) {\n      console.error(\n        \"'sendTransaction' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validatedPayload = validateSendTransactionPayload(payload);\n    sendMiniKitEvent({\n      command: \"send-transaction\" /* SendTransaction */,\n      version: _MiniKit.miniKitCommandVersion[\"send-transaction\" /* SendTransaction */],\n      payload: validatedPayload\n    });\n    return validatedPayload;\n  },\n  signMessage: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-message\" /* SignMessage */]) {\n      console.error(\n        \"'signMessage' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-message\" /* SignMessage */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-message\" /* SignMessage */],\n      payload\n    });\n    return payload;\n  },\n  signTypedData: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'signTypedData' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-typed-data\" /* SignTypedData */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-typed-data\" /* SignTypedData */],\n      payload\n    });\n    return payload;\n  },\n  shareContacts: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'shareContacts' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"share-contacts\" /* ShareContacts */,\n      version: _MiniKit.miniKitCommandVersion[\"share-contacts\" /* ShareContacts */],\n      payload\n    });\n    return payload;\n  },\n  requestPermission: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"request-permission\" /* RequestPermission */]) {\n      console.error(\n        \"'requestPermission' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"request-permission\" /* RequestPermission */,\n      version: _MiniKit.miniKitCommandVersion[\"request-permission\" /* RequestPermission */],\n      payload\n    });\n    return payload;\n  },\n  getPermissions: () => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"get-permissions\" /* GetPermissions */]) {\n      console.error(\n        \"'getPermissions' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"get-permissions\" /* GetPermissions */,\n      version: _MiniKit.miniKitCommandVersion[\"get-permissions\" /* GetPermissions */],\n      payload: {}\n    });\n    return {\n      status: \"sent\"\n    };\n  },\n  sendHapticFeedback: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-haptic-feedback\" /* SendHapticFeedback */]) {\n      console.error(\n        \"'sendHapticFeedback' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"send-haptic-feedback\" /* SendHapticFeedback */,\n      version: _MiniKit.miniKitCommandVersion[\"send-haptic-feedback\" /* SendHapticFeedback */],\n      payload\n    });\n    return payload;\n  }\n};\n/**\n * This object contains async versions of all the commands.\n * Instead of using event listeners, you can just `await` these.\n *\n * They return a standardized object\n *\n * commandPayload - object returned by the command function\n *\n * finalPayload - object returned by the event listener, or in other words, WorldApp response\n */\n_MiniKit.commandsAsync = {\n  verify: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-verify-action\" /* MiniAppVerifyAction */,\n          \"verify\" /* Verify */,\n          () => _MiniKit.commands.verify(payload)\n        );\n        if (response.finalPayload.status === \"success\" && response.finalPayload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          response.finalPayload.proof = await compressAndPadProof(\n            response.finalPayload.proof\n          );\n        }\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  pay: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-payment\" /* MiniAppPayment */,\n          \"pay\" /* Pay */,\n          () => _MiniKit.commands.pay(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  walletAuth: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-wallet-auth\" /* MiniAppWalletAuth */,\n          \"wallet-auth\" /* WalletAuth */,\n          () => _MiniKit.commands.walletAuth(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendTransaction: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-transaction\" /* MiniAppSendTransaction */,\n          \"send-transaction\" /* SendTransaction */,\n          () => _MiniKit.commands.sendTransaction(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signMessage: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-message\" /* MiniAppSignMessage */,\n          \"sign-message\" /* SignMessage */,\n          () => _MiniKit.commands.signMessage(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signTypedData: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-typed-data\" /* MiniAppSignTypedData */,\n          \"sign-typed-data\" /* SignTypedData */,\n          () => _MiniKit.commands.signTypedData(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  shareContacts: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share-contacts\" /* MiniAppShareContacts */,\n          \"share-contacts\" /* ShareContacts */,\n          () => _MiniKit.commands.shareContacts(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  requestPermission: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-request-permission\" /* MiniAppRequestPermission */,\n          \"request-permission\" /* RequestPermission */,\n          () => _MiniKit.commands.requestPermission(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  getPermissions: async () => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-get-permissions\" /* MiniAppGetPermissions */,\n          \"get-permissions\" /* GetPermissions */,\n          () => _MiniKit.commands.getPermissions()\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendHapticFeedback: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */,\n          \"send-haptic-feedback\" /* SendHapticFeedback */,\n          () => _MiniKit.commands.sendHapticFeedback(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n};\nvar MiniKit = _MiniKit;\n\n// index.ts\n\n\n\n// helpers/address-book/index.ts\n\n\nvar worldIdAddressBookContractAddress = \"0x57b930D551e677CC36e2fA036Ae2fe8FdaE0330D\";\nvar addressVerifiedUntilAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"\",\n        type: \"address\"\n      }\n    ],\n    name: \"addressVerifiedUntil\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar getIsUserVerified = async (walletAddress, rpcUrl) => {\n  const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({\n    chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain,\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)(\n      rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n    )\n  });\n  try {\n    const verifiedUntilResponse = await publicClient.readContract({\n      address: worldIdAddressBookContractAddress,\n      abi: addressVerifiedUntilAbi,\n      functionName: \"addressVerifiedUntil\",\n      args: [walletAddress]\n    });\n    const verifiedUntil = Number(verifiedUntilResponse.toString());\n    if (!Number.isFinite(verifiedUntil)) {\n      console.warn(\"Invalid verifiedUntil value:\", verifiedUntil);\n      return false;\n    }\n    const currentTime = Math.floor(Date.now() / 1e3);\n    return verifiedUntil > currentTime;\n  } catch (error) {\n    console.error(\"Error verifying user:\", error);\n    return false;\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LWpzL2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQzBEO0FBQ21COztBQUU3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxjQUFjO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZUFBZTs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsTUFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxPQUFPO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBTWM7QUFDMkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUFrQjtBQUMzQyxhQUFhLG1EQUFVO0FBQ3ZCLGlCQUFpQiwwQ0FBSTtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMLHlCQUF5Qix5REFBbUI7QUFDNUMsU0FBUyxvQkFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxXQUFXLHlEQUFtQixJQUFJLG9CQUFvQjtBQUN0RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQU9jO0FBQzBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGdDQUFnQyxJQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1QkFBdUIsS0FBSyx3QkFBd0I7QUFDMUU7QUFDQSxJQUFJO0FBQ0osc0JBQXNCLHdCQUF3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxJQUFJO0FBQ0oscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsOEJBQThCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzQkFBc0IsY0FBYyxNQUFNO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDBCQUEwQixjQUFjLFVBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkJBQTJCLGNBQWMsVUFBVTtBQUN0RjtBQUNBO0FBQ0EsaUNBQWlDLHdEQUFtQixHQUFHLE9BQU8sbURBQVcsYUFBYSwwQ0FBSyxJQUFJO0FBQy9GLDJCQUEyQixlQUFlLEVBQUUsZUFBZSxFQUFFLFFBQVE7QUFDckUsd0JBQXdCLGlEQUFXO0FBQ25DLG1CQUFtQixpREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxtQ0FBbUMsb0RBQWM7QUFDakQ7QUFDQSxzQkFBc0IsVUFBVTtBQUNoQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSw2QkFBNkI7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGVBQWU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtCQUFrQjs7QUFFbkI7QUFDc0Q7QUFDa0I7QUFDeEU7QUFDQSxHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywrQkFBK0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxpQ0FBaUM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDZCQUE2QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLCtCQUErQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsK0JBQStCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsbUNBQW1DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMscUJBQXFCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLDJFQUEyRSxvRUFBaUI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsTUFBTTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUNBQXVDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyRUFBWTtBQUMxQixjQUFjLDZFQUFjO0FBQzVCLHdEQUF3RCxvRUFBaUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RyxvRUFBaUI7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRjtBQUd6Qzs7QUFFdkM7QUFDZ0Y7QUFDeEI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBbUI7QUFDMUMsV0FBVyxtREFBVztBQUN0QixlQUFlLDBDQUFLO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBdUNFIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL21pbmlraXQtanMvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbWluaWtpdC50c1xuaW1wb3J0IHsgVmVyaWZpY2F0aW9uTGV2ZWwgfSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlXCI7XG5pbXBvcnQgeyBlbmNvZGVBY3Rpb24sIGdlbmVyYXRlU2lnbmFsIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZS9oYXNoaW5nXCI7XG5cbi8vIHR5cGVzL3BheW1lbnQudHNcbnZhciBUb2tlbnMgPSAvKiBAX19QVVJFX18gKi8gKChUb2tlbnMzKSA9PiB7XG4gIFRva2VuczNbXCJVU0RDRVwiXSA9IFwiVVNEQ0VcIjtcbiAgVG9rZW5zM1tcIldMRFwiXSA9IFwiV0xEXCI7XG4gIHJldHVybiBUb2tlbnMzO1xufSkoVG9rZW5zIHx8IHt9KTtcbnZhciBUb2tlbkRlY2ltYWxzID0ge1xuICBbXCJVU0RDRVwiIC8qIFVTRENFICovXTogNixcbiAgW1wiV0xEXCIgLyogV0xEICovXTogMThcbn07XG52YXIgTmV0d29yayA9IC8qIEBfX1BVUkVfXyAqLyAoKE5ldHdvcmsyKSA9PiB7XG4gIE5ldHdvcmsyW1wiT3B0aW1pc21cIl0gPSBcIm9wdGltaXNtXCI7XG4gIE5ldHdvcmsyW1wiV29ybGRDaGFpblwiXSA9IFwid29ybGRjaGFpblwiO1xuICByZXR1cm4gTmV0d29yazI7XG59KShOZXR3b3JrIHx8IHt9KTtcblxuLy8gaGVscGVycy9wYXltZW50L2NsaWVudC50c1xudmFyIHRva2VuVG9EZWNpbWFscyA9IChhbW91bnQsIHRva2VuKSA9PiB7XG4gIGNvbnN0IGRlY2ltYWxzID0gVG9rZW5EZWNpbWFsc1t0b2tlbl07XG4gIGlmIChkZWNpbWFscyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRva2VuOiAke3Rva2VufWApO1xuICB9XG4gIGNvbnN0IGZhY3RvciA9IDEwICoqIGRlY2ltYWxzO1xuICBjb25zdCByZXN1bHQgPSBhbW91bnQgKiBmYWN0b3I7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcmVzdWx0aW5nIGFtb3VudCBpcyBub3QgYSB3aG9sZSBudW1iZXI6ICR7cmVzdWx0fWApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIHZhbGlkYXRlUGF5bWVudFBheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZC50b2tlbnMuc29tZShcbiAgICAodG9rZW4pID0+IHRva2VuLnN5bWJvbCA9PSBcIlVTRENFXCIgJiYgcGFyc2VGbG9hdCh0b2tlbi50b2tlbl9hbW91bnQpIDwgMC4xXG4gICkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVVNEQ0UgYW1vdW50IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gJDAuMVwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHBheWxvYWQucmVmZXJlbmNlLmxlbmd0aCA+IDM2KSB7XG4gICAgY29uc29sZS5lcnJvcihcIlJlZmVyZW5jZSBtdXN0IG5vdCBleGNlZWQgMzYgY2hhcmFjdGVyc1wiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkLnJlZmVyZW5jZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlJlZmVyZW5jZSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8gaGVscGVycy9wcm9vZi9pbmRleC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50LFxuICBkZWNvZGVBYmlQYXJhbWV0ZXJzLFxuICBlbmNvZGVBYmlQYXJhbWV0ZXJzLFxuICBodHRwXG59IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgc2VtYXBob3JlVmVyaWZpZXJBZGRyZXNzID0gXCIweDc5ZjQ2Yjk0ZDEzNDEwOUViY2JiZGRCQWVEMEU4ODc5MDQwOUEwZTRcIjtcbnZhciBzZW1hcGhvcmVWZXJpZmllckFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwidWludDI1Nls4XVwiLFxuICAgICAgICBuYW1lOiBcInByb29mXCIsXG4gICAgICAgIHR5cGU6IFwidWludDI1Nls4XVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBuYW1lOiBcImNvbXByZXNzUHJvb2ZcIixcbiAgICBvdXRwdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJ1aW50MjU2WzRdXCIsXG4gICAgICAgIG5hbWU6IFwiY29tcHJlc3NlZFwiLFxuICAgICAgICB0eXBlOiBcInVpbnQyNTZbNF1cIlxuICAgICAgfVxuICAgIF0sXG4gICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgfVxuXTtcbnZhciBjb21wcmVzc0FuZFBhZFByb29mID0gYXN5bmMgKHByb29mLCBycGNVcmwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwdWJsaWNDbGllbnQgPSBjcmVhdGVQdWJsaWNDbGllbnQoe1xuICAgICAgY2hhaW46IHdvcmxkY2hhaW4sXG4gICAgICB0cmFuc3BvcnQ6IGh0dHAoXG4gICAgICAgIHJwY1VybCB8fCBcImh0dHBzOi8vd29ybGRjaGFpbi1tYWlubmV0LmcuYWxjaGVteS5jb20vcHVibGljXCJcbiAgICAgIClcbiAgICB9KTtcbiAgICBjb25zdCBkZWNvZGVkUHJvb2YgPSBkZWNvZGVBYmlQYXJhbWV0ZXJzKFxuICAgICAgW3sgdHlwZTogXCJ1aW50MjU2WzhdXCIgfV0sXG4gICAgICBwcm9vZlxuICAgIClbMF07XG4gICAgY29uc3QgY29tcHJlc3NlZFByb29mID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiBzZW1hcGhvcmVWZXJpZmllckFkZHJlc3MsXG4gICAgICBhYmk6IHNlbWFwaG9yZVZlcmlmaWVyQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImNvbXByZXNzUHJvb2ZcIixcbiAgICAgIGFyZ3M6IFtkZWNvZGVkUHJvb2ZdXG4gICAgfSk7XG4gICAgY29uc3QgcGFkZGVkUHJvb2YgPSBbLi4uY29tcHJlc3NlZFByb29mLCAwbiwgMG4sIDBuLCAwbl07XG4gICAgcmV0dXJuIGVuY29kZUFiaVBhcmFtZXRlcnMoW3sgdHlwZTogXCJ1aW50MjU2WzhdXCIgfV0sIFtwYWRkZWRQcm9vZl0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gY29tcHJlc3MgcHJvb2ZcIiwge1xuICAgICAgZSxcbiAgICAgIHByb29mXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb29mO1xuICB9XG59O1xuXG4vLyBoZWxwZXJzL3Npd2Uvc2l3ZS50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50IGFzIGNyZWF0ZVB1YmxpY0NsaWVudDIsXG4gIGdldENvbnRyYWN0LFxuICBoYXNoTWVzc2FnZSxcbiAgaHR0cCBhcyBodHRwMixcbiAgcmVjb3ZlckFkZHJlc3Ncbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gYXMgd29ybGRjaGFpbjIgfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBQUkVBTUJMRSA9IFwiIHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlwiO1xudmFyIFVSSV9UQUcgPSBcIlVSSTogXCI7XG52YXIgVkVSU0lPTl9UQUcgPSBcIlZlcnNpb246IFwiO1xudmFyIENIQUlOX1RBRyA9IFwiQ2hhaW4gSUQ6IFwiO1xudmFyIE5PTkNFX1RBRyA9IFwiTm9uY2U6IFwiO1xudmFyIElBVF9UQUcgPSBcIklzc3VlZCBBdDogXCI7XG52YXIgRVhQX1RBRyA9IFwiRXhwaXJhdGlvbiBUaW1lOiBcIjtcbnZhciBOQkZfVEFHID0gXCJOb3QgQmVmb3JlOiBcIjtcbnZhciBSSURfVEFHID0gXCJSZXF1ZXN0IElEOiBcIjtcbnZhciBFUkNfMTkxX1BSRUZJWCA9IFwiXHUwMDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XFxuXCI7XG52YXIgdGFnZ2VkID0gKGxpbmUsIHRhZykgPT4ge1xuICBpZiAobGluZSAmJiBsaW5lLmluY2x1ZGVzKHRhZykpIHtcbiAgICByZXR1cm4gbGluZS5yZXBsYWNlKHRhZywgXCJcIik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nICcke3RhZ30nYCk7XG4gIH1cbn07XG52YXIgcGFyc2VTaXdlTWVzc2FnZSA9IChpbnB1dFN0cmluZykgPT4ge1xuICBjb25zdCBsaW5lcyA9IGlucHV0U3RyaW5nLnNwbGl0KFwiXFxuXCIpW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgY29uc3QgZG9tYWluID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFBSRUFNQkxFKTtcbiAgY29uc3QgYWRkcmVzcyA9IGxpbmVzLm5leHQoKT8udmFsdWU7XG4gIGxpbmVzLm5leHQoKTtcbiAgY29uc3QgbmV4dFZhbHVlID0gbGluZXMubmV4dCgpPy52YWx1ZTtcbiAgbGV0IHN0YXRlbWVudDtcbiAgaWYgKG5leHRWYWx1ZSkge1xuICAgIHN0YXRlbWVudCA9IG5leHRWYWx1ZTtcbiAgICBsaW5lcy5uZXh0KCk7XG4gIH1cbiAgY29uc3QgdXJpID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFVSSV9UQUcpO1xuICBjb25zdCB2ZXJzaW9uID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFZFUlNJT05fVEFHKTtcbiAgY29uc3QgY2hhaW5faWQgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgQ0hBSU5fVEFHKTtcbiAgY29uc3Qgbm9uY2UgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgTk9OQ0VfVEFHKTtcbiAgY29uc3QgaXNzdWVkX2F0ID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIElBVF9UQUcpO1xuICBsZXQgZXhwaXJhdGlvbl90aW1lLCBub3RfYmVmb3JlLCByZXF1ZXN0X2lkO1xuICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aChFWFBfVEFHKSkge1xuICAgICAgZXhwaXJhdGlvbl90aW1lID0gdGFnZ2VkKGxpbmUsIEVYUF9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKE5CRl9UQUcpKSB7XG4gICAgICBub3RfYmVmb3JlID0gdGFnZ2VkKGxpbmUsIE5CRl9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKFJJRF9UQUcpKSB7XG4gICAgICByZXF1ZXN0X2lkID0gdGFnZ2VkKGxpbmUsIFJJRF9UQUcpO1xuICAgIH1cbiAgfVxuICBpZiAobGluZXMubmV4dCgpLmRvbmUgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXh0cmEgbGluZXMgaW4gdGhlIGlucHV0XCIpO1xuICB9XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHtcbiAgICBkb21haW4sXG4gICAgYWRkcmVzcyxcbiAgICBzdGF0ZW1lbnQsXG4gICAgdXJpLFxuICAgIHZlcnNpb24sXG4gICAgY2hhaW5faWQsXG4gICAgbm9uY2UsXG4gICAgaXNzdWVkX2F0LFxuICAgIGV4cGlyYXRpb25fdGltZSxcbiAgICBub3RfYmVmb3JlLFxuICAgIHJlcXVlc3RfaWRcbiAgfTtcbiAgcmV0dXJuIHNpd2VNZXNzYWdlRGF0YTtcbn07XG52YXIgZ2VuZXJhdGVTaXdlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEpID0+IHtcbiAgbGV0IHNpd2VNZXNzYWdlID0gXCJcIjtcbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5zY2hlbWUpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuc2NoZW1lfTovLyR7c2l3ZU1lc3NhZ2VEYXRhLmRvbWFpbn0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6XG5gO1xuICB9IGVsc2Uge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlxuYDtcbiAgfVxuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmFkZHJlc3MpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuYWRkcmVzc31cbmA7XG4gIH0gZWxzZSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gXCJ7YWRkcmVzc31cXG5cIjtcbiAgfVxuICBzaXdlTWVzc2FnZSArPSBcIlxcblwiO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9XG5gO1xuICB9XG4gIHNpd2VNZXNzYWdlICs9IFwiXFxuXCI7XG4gIHNpd2VNZXNzYWdlICs9IGBVUkk6ICR7c2l3ZU1lc3NhZ2VEYXRhLnVyaX1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBWZXJzaW9uOiAke3Npd2VNZXNzYWdlRGF0YS52ZXJzaW9ufVxuYDtcbiAgc2l3ZU1lc3NhZ2UgKz0gYENoYWluIElEOiAke3Npd2VNZXNzYWdlRGF0YS5jaGFpbl9pZH1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBOb25jZTogJHtzaXdlTWVzc2FnZURhdGEubm9uY2V9XG5gO1xuICBzaXdlTWVzc2FnZSArPSBgSXNzdWVkIEF0OiAke3Npd2VNZXNzYWdlRGF0YS5pc3N1ZWRfYXR9XG5gO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBFeHBpcmF0aW9uIFRpbWU6ICR7c2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZX1cbmA7XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gYE5vdCBCZWZvcmU6ICR7c2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmV9XG5gO1xuICB9XG4gIGlmIChzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBSZXF1ZXN0IElEOiAke3Npd2VNZXNzYWdlRGF0YS5yZXF1ZXN0X2lkfVxuYDtcbiAgfVxuICByZXR1cm4gc2l3ZU1lc3NhZ2U7XG59O1xudmFyIFNBRkVfQ09OVFJBQ1RfQUJJID0gW1xuICB7XG4gICAgaW5wdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJhZGRyZXNzXCIsXG4gICAgICAgIG5hbWU6IFwib3duZXJcIixcbiAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIG5hbWU6IFwiaXNPd25lclwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcImJvb2xcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJib29sXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgdmVyaWZ5U2l3ZU1lc3NhZ2UgPSBhc3luYyAocGF5bG9hZCwgbm9uY2UsIHN0YXRlbWVudCwgcmVxdWVzdElkLCB1c2VyUHJvdmlkZXIpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJWZXJpZnkgY2FuIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBiYWNrZW5kXCIpO1xuICB9XG4gIGNvbnN0IHsgbWVzc2FnZSwgc2lnbmF0dXJlLCBhZGRyZXNzIH0gPSBwYXlsb2FkO1xuICBjb25zdCBzaXdlTWVzc2FnZURhdGEgPSBwYXJzZVNpd2VNZXNzYWdlKG1lc3NhZ2UpO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSk7XG4gICAgaWYgKGV4cGlyYXRpb25UaW1lIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGlyZWQgbWVzc2FnZVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgY29uc3Qgbm90QmVmb3JlID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmUpO1xuICAgIGlmIChub3RCZWZvcmUgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEJlZm9yZSB0aW1lIGhhcyBub3QgcGFzc2VkXCIpO1xuICAgIH1cbiAgfVxuICBpZiAobm9uY2UgJiYgc2l3ZU1lc3NhZ2VEYXRhLm5vbmNlICE9PSBub25jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBOb25jZSBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5ub25jZX0sIEV4cGVjdGVkOiAke25vbmNlfWBcbiAgICApO1xuICB9XG4gIGlmIChzdGF0ZW1lbnQgJiYgc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCAhPT0gc3RhdGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFN0YXRlbWVudCBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9LCBFeHBlY3RlZDogJHtzdGF0ZW1lbnR9YFxuICAgICk7XG4gIH1cbiAgaWYgKHJlcXVlc3RJZCAmJiBzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCAhPT0gcmVxdWVzdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFJlcXVlc3QgSUQgbWlzbWF0Y2guIEdvdDogJHtzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZH0sIEV4cGVjdGVkOiAke3JlcXVlc3RJZH1gXG4gICAgKTtcbiAgfVxuICBsZXQgcHJvdmlkZXIgPSB1c2VyUHJvdmlkZXIgfHwgY3JlYXRlUHVibGljQ2xpZW50Mih7IGNoYWluOiB3b3JsZGNoYWluMiwgdHJhbnNwb3J0OiBodHRwMigpIH0pO1xuICBjb25zdCBzaWduZWRNZXNzYWdlID0gYCR7RVJDXzE5MV9QUkVGSVh9JHttZXNzYWdlLmxlbmd0aH0ke21lc3NhZ2V9YDtcbiAgY29uc3QgaGFzaGVkTWVzc2FnZSA9IGhhc2hNZXNzYWdlKHNpZ25lZE1lc3NhZ2UpO1xuICBjb25zdCBjb250cmFjdCA9IGdldENvbnRyYWN0KHtcbiAgICBhZGRyZXNzLFxuICAgIGFiaTogU0FGRV9DT05UUkFDVF9BQkksXG4gICAgY2xpZW50OiBwcm92aWRlclxuICB9KTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWNvdmVyZWRBZGRyZXNzID0gYXdhaXQgcmVjb3ZlckFkZHJlc3Moe1xuICAgICAgaGFzaDogaGFzaGVkTWVzc2FnZSxcbiAgICAgIHNpZ25hdHVyZTogYDB4JHtzaWduYXR1cmV9YFxuICAgIH0pO1xuICAgIGNvbnN0IGlzT3duZXIgPSBhd2FpdCBjb250cmFjdC5yZWFkLmlzT3duZXIoW3JlY292ZXJlZEFkZHJlc3NdKTtcbiAgICBpZiAoIWlzT3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkLCBpbnZhbGlkIG93bmVyXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKTtcbiAgfVxuICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzaXdlTWVzc2FnZURhdGEgfTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS92YWxpZGF0ZS13YWxsZXQtYXV0aC1jb21tYW5kLWlucHV0LnRzXG52YXIgdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0ID0gKHBhcmFtcykgPT4ge1xuICBpZiAoIXBhcmFtcy5ub25jZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm9uY2UnIGlzIHJlcXVpcmVkXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vbmNlLmxlbmd0aCA8IDgpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IFwiJ25vbmNlJyBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5zdGF0ZW1lbnQgJiYgcGFyYW1zLnN0YXRlbWVudC5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInc3RhdGVtZW50JyBtdXN0IG5vdCBjb250YWluIG5ld2xpbmVzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLmV4cGlyYXRpb25UaW1lICYmIG5ldyBEYXRlKHBhcmFtcy5leHBpcmF0aW9uVGltZSkgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInZXhwaXJhdGlvblRpbWUnIG11c3QgYmUgaW4gdGhlIGZ1dHVyZVwiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5leHBpcmF0aW9uVGltZSAmJiBuZXcgRGF0ZShwYXJhbXMuZXhwaXJhdGlvblRpbWUpID4gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxZTMpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIidleHBpcmF0aW9uVGltZScgbXVzdCBiZSB3aXRoaW4gNyBkYXlzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vdEJlZm9yZSAmJiBuZXcgRGF0ZShwYXJhbXMubm90QmVmb3JlKSA+IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMWUzKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm90QmVmb3JlJyBtdXN0IGJlIHdpdGhpbiA3IGRheXNcIiB9O1xuICB9XG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59O1xuXG4vLyBoZWxwZXJzL3RyYW5zYWN0aW9uL3ZhbGlkYXRlLXBheWxvYWQudHNcbnZhciBpc1ZhbGlkSGV4ID0gKHN0cikgPT4ge1xuICByZXR1cm4gL14weFswLTlBLUZhLWZdKyQvLnRlc3Qoc3RyKTtcbn07XG52YXIgcHJvY2Vzc1BheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiIHx8IHBheWxvYWQgPT09IG51bGwgfHwgcGF5bG9hZCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIFN0cmluZyhwYXlsb2FkKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgIHJldHVybiBwYXlsb2FkLm1hcCgodmFsdWUpID0+IHByb2Nlc3NQYXlsb2FkKHZhbHVlKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5wYXlsb2FkIH07XG4gICAgaWYgKFwidmFsdWVcIiBpbiByZXN1bHQgJiYgcmVzdWx0LnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0LnZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IFN0cmluZyhyZXN1bHQudmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFpc1ZhbGlkSGV4KHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIlRyYW5zYWN0aW9uIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBoZXggc3RyaW5nXCIsXG4gICAgICAgICAgcmVzdWx0LnZhbHVlXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVHJhbnNhY3Rpb24gdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGhleCBzdHJpbmc6ICR7cmVzdWx0LnZhbHVlfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHByb2Nlc3NQYXlsb2FkKHJlc3VsdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcGF5bG9hZDtcbn07XG52YXIgdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkID0gKHBheWxvYWQpID0+IHtcbiAgcmV0dXJuIHByb2Nlc3NQYXlsb2FkKHBheWxvYWQpO1xufTtcblxuLy8gaGVscGVycy91c2VybmFtZXMvaW5kZXgudHNcbnZhciBnZXRVc2VyUHJvZmlsZSA9IGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly91c2VybmFtZXMud29ybGRjb2luLm9yZy9hcGkvdjEvcXVlcnlcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFkZHJlc3NlczogW2FkZHJlc3NdXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IHVzZXJuYW1lcyA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB1c2VybmFtZXM/LlswXSA/PyB7IHVzZXJuYW1lOiBudWxsLCBwcm9maWxlUGljdHVyZVVybDogbnVsbCB9O1xufTtcblxuLy8gdHlwZXMvY29tbWFuZHMudHNcbnZhciBDb21tYW5kID0gLyogQF9fUFVSRV9fICovICgoQ29tbWFuZDIpID0+IHtcbiAgQ29tbWFuZDJbXCJWZXJpZnlcIl0gPSBcInZlcmlmeVwiO1xuICBDb21tYW5kMltcIlBheVwiXSA9IFwicGF5XCI7XG4gIENvbW1hbmQyW1wiV2FsbGV0QXV0aFwiXSA9IFwid2FsbGV0LWF1dGhcIjtcbiAgQ29tbWFuZDJbXCJTZW5kVHJhbnNhY3Rpb25cIl0gPSBcInNlbmQtdHJhbnNhY3Rpb25cIjtcbiAgQ29tbWFuZDJbXCJTaWduTWVzc2FnZVwiXSA9IFwic2lnbi1tZXNzYWdlXCI7XG4gIENvbW1hbmQyW1wiU2lnblR5cGVkRGF0YVwiXSA9IFwic2lnbi10eXBlZC1kYXRhXCI7XG4gIENvbW1hbmQyW1wiU2hhcmVDb250YWN0c1wiXSA9IFwic2hhcmUtY29udGFjdHNcIjtcbiAgQ29tbWFuZDJbXCJSZXF1ZXN0UGVybWlzc2lvblwiXSA9IFwicmVxdWVzdC1wZXJtaXNzaW9uXCI7XG4gIENvbW1hbmQyW1wiR2V0UGVybWlzc2lvbnNcIl0gPSBcImdldC1wZXJtaXNzaW9uc1wiO1xuICBDb21tYW5kMltcIlNlbmRIYXB0aWNGZWVkYmFja1wiXSA9IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIjtcbiAgcmV0dXJuIENvbW1hbmQyO1xufSkoQ29tbWFuZCB8fCB7fSk7XG52YXIgUGVybWlzc2lvbiA9IC8qIEBfX1BVUkVfXyAqLyAoKFBlcm1pc3Npb24yKSA9PiB7XG4gIFBlcm1pc3Npb24yW1wiTm90aWZpY2F0aW9uc1wiXSA9IFwibm90aWZpY2F0aW9uc1wiO1xuICBQZXJtaXNzaW9uMltcIkNvbnRhY3RzXCJdID0gXCJjb250YWN0c1wiO1xuICByZXR1cm4gUGVybWlzc2lvbjI7XG59KShQZXJtaXNzaW9uIHx8IHt9KTtcblxuLy8gdHlwZXMvZXJyb3JzLnRzXG5pbXBvcnQgeyBBcHBFcnJvckNvZGVzIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHsgQXBwRXJyb3JDb2RlcyBhcyBBcHBFcnJvckNvZGVzMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbnZhciBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UgPSB7XG4gIFtBcHBFcnJvckNvZGVzLlZlcmlmaWNhdGlvblJlamVjdGVkXTogXCJZb3UndmUgY2FuY2VsbGVkIHRoZSByZXF1ZXN0IGluIFdvcmxkIEFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRdOiBcIllvdSBoYXZlIGFscmVhZHkgdmVyaWZpZWQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIGZvciB0aGlzIGFjdGlvbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ3JlZGVudGlhbFVuYXZhaWxhYmxlXTogXCJJdCBzZWVtcyB5b3UgZG8gbm90IGhhdmUgdGhlIHZlcmlmaWNhdGlvbiBsZXZlbCByZXF1aXJlZCBieSB0aGlzIGFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWFsZm9ybWVkUmVxdWVzdF06IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkludmFsaWROZXR3b3JrXTogXCJJbnZhbGlkIG5ldHdvcmsuIElmIHlvdSBhcmUgdGhlIGFwcCBvd25lciwgdmlzaXQgZG9jcy53b3JsZGNvaW4ub3JnL3Rlc3QgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkluY2x1c2lvblByb29mRmFpbGVkXTogXCJUaGVyZSB3YXMgYW4gaXNzdWUgZmV0Y2hpbmcgeW91ciBjcmVkZW50aWFsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5JbmNsdXNpb25Qcm9vZlBlbmRpbmddOiBcIllvdXIgaWRlbnRpdHkgaXMgc3RpbGwgYmVpbmcgcmVnaXN0ZXJlZC4gUGxlYXNlIHdhaXQgYSBmZXcgbWludXRlcyBhbmQgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5VbmV4cGVjdGVkUmVzcG9uc2VdOiBcIlVuZXhwZWN0ZWQgcmVzcG9uc2UgZnJvbSB5b3VyIHdhbGxldC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuRmFpbGVkQnlIb3N0QXBwXTogXCJWZXJpZmljYXRpb24gZmFpbGVkIGJ5IHRoZSBhcHAuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkdlbmVyaWNFcnJvcl06IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ29ubmVjdGlvbkZhaWxlZF06IFwiQ29ubmVjdGlvbiB0byB5b3VyIHdhbGxldCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgUGF5bWVudEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChQYXltZW50RXJyb3JDb2RlczIpID0+IHtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFBheW1lbnRFcnJvckNvZGVzMltcIlBheW1lbnRSZWplY3RlZFwiXSA9IFwicGF5bWVudF9yZWplY3RlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJJbnZhbGlkUmVjZWl2ZXJcIl0gPSBcImludmFsaWRfcmVjZWl2ZXJcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5zdWZmaWNpZW50QmFsYW5jZVwiXSA9IFwiaW5zdWZmaWNpZW50X2JhbGFuY2VcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlckJsb2NrZWRcIl0gPSBcInVzZXJfYmxvY2tlZFwiO1xuICByZXR1cm4gUGF5bWVudEVycm9yQ29kZXMyO1xufSkoUGF5bWVudEVycm9yQ29kZXMgfHwge30pO1xudmFyIFBheW1lbnRFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIllvdSBoYXZlIGNhbmNlbGxlZCB0aGUgcGF5bWVudCBpbiBXb3JsZCBBcHAuXCIsXG4gIFtcInBheW1lbnRfcmVqZWN0ZWRcIiAvKiBQYXltZW50UmVqZWN0ZWQgKi9dOiBcIllvdSd2ZSBjYW5jZWxsZWQgdGhlIHBheW1lbnQgaW4gV29ybGQgQXBwLlwiLFxuICBbXCJpbnZhbGlkX3JlY2VpdmVyXCIgLyogSW52YWxpZFJlY2VpdmVyICovXTogXCJUaGUgcmVjZWl2ZXIgYWRkcmVzcyBpcyBpbnZhbGlkLiBQbGVhc2UgY29udGFjdCB0aGUgYXBwIG93bmVyLlwiLFxuICBbXCJpbnN1ZmZpY2llbnRfYmFsYW5jZVwiIC8qIEluc3VmZmljaWVudEJhbGFuY2UgKi9dOiBcIllvdSBkbyBub3QgaGF2ZSBlbm91Z2ggYmFsYW5jZSB0byBjb21wbGV0ZSB0aGlzIHRyYW5zYWN0aW9uLlwiLFxuICBbXCJ0cmFuc2FjdGlvbl9mYWlsZWRcIiAvKiBUcmFuc2FjdGlvbkZhaWxlZCAqL106IFwiVGhlIHRyYW5zYWN0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widXNlcl9ibG9ja2VkXCIgLyogVXNlckJsb2NrZWQgKi9dOiBcIlVzZXIncyByZWdpb24gaXMgYmxvY2tlZCBmcm9tIG1ha2luZyBwYXltZW50cy5cIlxufTtcbnZhciBQYXltZW50VmFsaWRhdGlvbkVycm9ycyA9IC8qIEBfX1BVUkVfXyAqLyAoKFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMikgPT4ge1xuICBQYXltZW50VmFsaWRhdGlvbkVycm9yczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhpcyByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZFRva2VuQWRkcmVzc1wiXSA9IFwiVGhlIHRva2VuIGFkZHJlc3MgaXMgaW52YWxpZC4gUGxlYXNlIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZEFwcElkXCJdID0gXCJUaGUgYXBwIElEIGlzIGludmFsaWQuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIuXCI7XG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMltcIkR1cGxpY2F0ZVJlZmVyZW5jZVwiXSA9IFwiVGhpcyByZWZlcmVuY2UgSUQgYWxyZWFkeSBleGlzdHMgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IG9uZSBhbmQgdHJ5IGFnYWluLlwiO1xuICByZXR1cm4gUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyO1xufSkoUGF5bWVudFZhbGlkYXRpb25FcnJvcnMgfHwge30pO1xudmFyIFdhbGxldEF1dGhFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoV2FsbGV0QXV0aEVycm9yQ29kZXMyKSA9PiB7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIk1hbGZvcm1lZFJlcXVlc3RcIl0gPSBcIm1hbGZvcm1lZF9yZXF1ZXN0XCI7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBXYWxsZXRBdXRoRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFdhbGxldEF1dGhFcnJvckNvZGVzMjtcbn0pKFdhbGxldEF1dGhFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlID0ge1xuICBbXCJtYWxmb3JtZWRfcmVxdWVzdFwiIC8qIE1hbGZvcm1lZFJlcXVlc3QgKi9dOiBcIlByb3ZpZGVkIHBhcmFtZXRlcnMgaW4gdGhlIHJlcXVlc3QgYXJlIGludmFsaWQuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJJbnB1dEVycm9yXCJdID0gXCJpbnB1dF9lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZENvbnRyYWN0XCJdID0gXCJpbnZhbGlkX2NvbnRyYWN0XCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiRGFpbHlUeExpbWl0UmVhY2hlZFwiXSA9IFwiZGFpbHlfdHhfbGltaXRfcmVhY2hlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZVwiXSA9IFwicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiUGVybWl0dGVkQW1vdW50Tm90Rm91bmRcIl0gPSBcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCI7XG4gIHJldHVybiBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMjtcbn0pKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRUcmFuc2FjdGlvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcInRyYW5zYWN0aW9uX2ZhaWxlZFwiIC8qIFRyYW5zYWN0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbXCJkaXNhbGxvd2VkX29wZXJhdGlvblwiIC8qIERpc2FsbG93ZWRPcGVyYXRpb24gKi9dOiBcIlRoZSBvcGVyYXRpb24gcmVxdWVzdGVkIGlzIG5vdCBhbGxvd2VkLiBQbGVhc2UgcmVmZXIgdG8gdGhlIGRvY3MuXCIsXG4gIFtcImludmFsaWRfY29udHJhY3RcIiAvKiBJbnZhbGlkQ29udHJhY3QgKi9dOiBcIlRoZSBjb250cmFjdCBhZGRyZXNzIGlzIG5vdCBhbGxvd2VkIGZvciB5b3VyIGFwcGxpY2F0aW9uLiBQbGVhc2UgY2hlY2sgeW91ciBkZXZlbG9wZXIgcG9ydGFsIGNvbmZpZ3VyYXRpb25zXCIsXG4gIFtcIm1hbGljaW91c19vcGVyYXRpb25cIiAvKiBNYWxpY2lvdXNPcGVyYXRpb24gKi9dOiBcIlRoZSBvcGVyYXRpb24gcmVxdWVzdGVkIGlzIGNvbnNpZGVyZWQgbWFsaWNpb3VzLlwiLFxuICBbXCJkYWlseV90eF9saW1pdF9yZWFjaGVkXCIgLyogRGFpbHlUeExpbWl0UmVhY2hlZCAqL106IFwiRGFpbHkgdHJhbnNhY3Rpb24gbGltaXQgcmVhY2hlZC4gTWF4IDEwMCB0cmFuc2FjdGlvbnMgcGVyIGRheS4gV2FpdCB1bnRpbCB0aGUgbmV4dCBkYXkuXCIsXG4gIFtcInBlcm1pdHRlZF9hbW91bnRfZXhjZWVkc19zbGlwcGFnZVwiIC8qIFBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZSAqL106IFwiUGVybWl0dGVkIGFtb3VudCBleGNlZWRzIHNsaXBwYWdlLiBZb3UgbXVzdCBzcGVuZCBhdCBsZWFzdCA5MCUgb2YgdGhlIHBlcm1pdHRlZCBhbW91bnQuXCIsXG4gIFtcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCIgLyogUGVybWl0dGVkQW1vdW50Tm90Rm91bmQgKi9dOiBcIlBlcm1pdHRlZCBhbW91bnQgbm90IGZvdW5kIGluIHBlcm1pdDIgcGF5bG9hZC5cIlxufTtcbnZhciBTaWduTWVzc2FnZUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTaWduTWVzc2FnZUVycm9yQ29kZXMyKSA9PiB7XG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlczJbXCJJbnZhbGlkTWVzc2FnZVwiXSA9IFwiaW52YWxpZF9tZXNzYWdlXCI7XG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gU2lnbk1lc3NhZ2VFcnJvckNvZGVzMjtcbn0pKFNpZ25NZXNzYWdlRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImludmFsaWRfbWVzc2FnZVwiIC8qIEludmFsaWRNZXNzYWdlICovXTogXCJJbnZhbGlkIG1lc3NhZ2UgcmVxdWVzdGVkXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTaWduVHlwZWREYXRhRXJyb3JDb2RlczIpID0+IHtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIklucHV0RXJyb3JcIl0gPSBcImlucHV0X2Vycm9yXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJEaXNhbGxvd2VkT3BlcmF0aW9uXCJdID0gXCJkaXNhbGxvd2VkX29wZXJhdGlvblwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJJbnZhbGlkQ29udHJhY3RcIl0gPSBcImludmFsaWRfY29udHJhY3RcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIHJldHVybiBTaWduVHlwZWREYXRhRXJyb3JDb2RlczI7XG59KShTaWduVHlwZWREYXRhRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2lnblR5cGVkRGF0YUVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gIFtcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCIgLyogRGlzYWxsb3dlZE9wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGFsbG93ZWQuIFBsZWFzZSByZWZlciB0byB0aGUgZG9jcy5cIixcbiAgW1wiaW52YWxpZF9jb250cmFjdFwiIC8qIEludmFsaWRDb250cmFjdCAqL106IFwiVGhlIGNvbnRyYWN0IGFkZHJlc3MgaXMgbm90IGFsbG93ZWQgZm9yIHlvdXIgYXBwbGljYXRpb24uIFBsZWFzZSBjaGVjayB5b3VyIGRldmVsb3BlciBwb3J0YWwgY29uZmlndXJhdGlvbnNcIixcbiAgW1wibWFsaWNpb3VzX29wZXJhdGlvblwiIC8qIE1hbGljaW91c09wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgY29uc2lkZXJlZCBtYWxpY2lvdXMuXCJcbn07XG52YXIgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMikgPT4ge1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiVW5rbm93blwiXSA9IFwidW5rbm93blwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiQWxyZWFkeUluc3RhbGxlZFwiXSA9IFwiYWxyZWFkeV9pbnN0YWxsZWRcIjtcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMltcIk91dHNpZGVPZldvcmxkQXBwXCJdID0gXCJvdXRzaWRlX29mX3dvcmxkYXBwXCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJOb3RPbkNsaWVudFwiXSA9IFwibm90X29uX2NsaWVudFwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiQXBwT3V0T2ZEYXRlXCJdID0gXCJhcHBfb3V0X29mX2RhdGVcIjtcbiAgcmV0dXJuIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczI7XG59KShNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMgfHwge30pO1xudmFyIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL106IFwiRmFpbGVkIHRvIGluc3RhbGwgTWluaUtpdC5cIixcbiAgW1wiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovXTogXCJNaW5pS2l0IGlzIGFscmVhZHkgaW5zdGFsbGVkLlwiLFxuICBbXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi9dOiBcIk1pbmlBcHAgbGF1bmNoZWQgb3V0c2lkZSBvZiBXb3JsZEFwcC5cIixcbiAgW1wibm90X29uX2NsaWVudFwiIC8qIE5vdE9uQ2xpZW50ICovXTogXCJXaW5kb3cgb2JqZWN0IGlzIG5vdCBhdmFpbGFibGUuXCIsXG4gIFtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL106IFwiV29ybGRBcHAgaXMgb3V0IG9mIGRhdGUuIFBsZWFzZSB1cGRhdGUgdGhlIGFwcC5cIlxufTtcbnZhciBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMikgPT4ge1xuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2hhcmVDb250YWN0c0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIHJldHVybiBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczI7XG59KShTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSA9IHtcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIlxufTtcbnZhciBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiQWxyZWFkeVJlcXVlc3RlZFwiXSA9IFwiYWxyZWFkeV9yZXF1ZXN0ZWRcIjtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIlBlcm1pc3Npb25EaXNhYmxlZFwiXSA9IFwicGVybWlzc2lvbl9kaXNhYmxlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiQWxyZWFkeUdyYW50ZWRcIl0gPSBcImFscmVhZHlfZ3JhbnRlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiVW5zdXBwb3J0ZWRQZXJtaXNzaW9uXCJdID0gXCJ1bnN1cHBvcnRlZF9wZXJtaXNzaW9uXCI7XG4gIHJldHVybiBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyO1xufSkoUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzIHx8IHt9KTtcbnZhciBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciBkZWNsaW5lZCBzaGFyaW5nIGNvbnRhY3RzXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlJlcXVlc3QgZmFpbGVkIGZvciB1bmtub3duIHJlYXNvbi5cIixcbiAgW1wiYWxyZWFkeV9yZXF1ZXN0ZWRcIiAvKiBBbHJlYWR5UmVxdWVzdGVkICovXTogXCJVc2VyIGhhcyBhbHJlYWR5IGRlY2xpbmVkIHR1cm5pbmcgb24gbm90aWZpY2F0aW9ucyBvbmNlXCIsXG4gIFtcInBlcm1pc3Npb25fZGlzYWJsZWRcIiAvKiBQZXJtaXNzaW9uRGlzYWJsZWQgKi9dOiBcIlVzZXIgZG9lcyBub3QgaGF2ZSB0aGlzIHBlcm1pc3Npb24gZW5hYmxlZCBpbiBXb3JsZCBBcHBcIixcbiAgW1wiYWxyZWFkeV9ncmFudGVkXCIgLyogQWxyZWFkeUdyYW50ZWQgKi9dOiBcIklmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IGdyYW50ZWQgdGhpcyBtaW5pIGFwcCBwZXJtaXNzaW9uXCIsXG4gIFtcInVuc3VwcG9ydGVkX3Blcm1pc3Npb25cIiAvKiBVbnN1cHBvcnRlZFBlcm1pc3Npb24gKi9dOiBcIlRoZSBwZXJtaXNzaW9uIHJlcXVlc3RlZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgbWluaSBhcHBcIlxufTtcbnZhciBHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMyKSA9PiB7XG4gIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczI7XG59KShHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMgfHwge30pO1xudmFyIEdldFBlcm1pc3Npb25zRXJyb3JNZXNzYWdlID0ge1xuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLlwiXG59O1xudmFyIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMikgPT4ge1xuICBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICByZXR1cm4gU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlczI7XG59KShTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTZW5kSGFwdGljRmVlZGJhY2tFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCJcbn07XG5cbi8vIGhlbHBlcnMvc2VuZC13ZWJ2aWV3LWV2ZW50LnRzXG52YXIgc2VuZFdlYnZpZXdFdmVudCA9IChwYXlsb2FkKSA9PiB7XG4gIGlmICh3aW5kb3cud2Via2l0KSB7XG4gICAgd2luZG93LndlYmtpdD8ubWVzc2FnZUhhbmRsZXJzPy5taW5pa2l0Py5wb3N0TWVzc2FnZT8uKHBheWxvYWQpO1xuICB9IGVsc2UgaWYgKHdpbmRvdy5BbmRyb2lkKSB7XG4gICAgd2luZG93LkFuZHJvaWQucG9zdE1lc3NhZ2U/LihKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XG4gIH1cbn07XG5cbi8vIHR5cGVzL3Jlc3BvbnNlcy50c1xudmFyIFJlc3BvbnNlRXZlbnQgPSAvKiBAX19QVVJFX18gKi8gKChSZXNwb25zZUV2ZW50MikgPT4ge1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBWZXJpZnlBY3Rpb25cIl0gPSBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBQYXltZW50XCJdID0gXCJtaW5pYXBwLXBheW1lbnRcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwV2FsbGV0QXV0aFwiXSA9IFwibWluaWFwcC13YWxsZXQtYXV0aFwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTZW5kVHJhbnNhY3Rpb25cIl0gPSBcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTaWduTWVzc2FnZVwiXSA9IFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2lnblR5cGVkRGF0YVwiXSA9IFwibWluaWFwcC1zaWduLXR5cGVkLWRhdGFcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2hhcmVDb250YWN0c1wiXSA9IFwibWluaWFwcC1zaGFyZS1jb250YWN0c1wiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvblwiXSA9IFwibWluaWFwcC1yZXF1ZXN0LXBlcm1pc3Npb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwR2V0UGVybWlzc2lvbnNcIl0gPSBcIm1pbmlhcHAtZ2V0LXBlcm1pc3Npb25zXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNlbmRIYXB0aWNGZWVkYmFja1wiXSA9IFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiO1xuICByZXR1cm4gUmVzcG9uc2VFdmVudDI7XG59KShSZXNwb25zZUV2ZW50IHx8IHt9KTtcblxuLy8gbWluaWtpdC50c1xudmFyIHNlbmRNaW5pS2l0RXZlbnQgPSAocGF5bG9hZCkgPT4ge1xuICBzZW5kV2Vidmlld0V2ZW50KHBheWxvYWQpO1xufTtcbnZhciBfTWluaUtpdCA9IGNsYXNzIF9NaW5pS2l0IHtcbiAgc3RhdGljIHNlbmRJbml0KCkge1xuICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJpbml0XCIsXG4gICAgICBwYXlsb2FkOiB7IHZlcnNpb246IHRoaXMuTUlOSUtJVF9WRVJTSU9OIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgc3Vic2NyaWJlKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgIF9NaW5pS2l0LndhbGxldEFkZHJlc3MgPSBwYXlsb2FkLmFkZHJlc3M7XG4gICAgICAgICAgX01pbmlLaXQuZ2V0VXNlckJ5QWRkcmVzcyhwYXlsb2FkLmFkZHJlc3MpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgIF9NaW5pS2l0LnVzZXIgPSB1c2VyO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG9yaWdpbmFsSGFuZGxlcihwYXlsb2FkKTtcbiAgICAgIH07XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB3cmFwcGVkSGFuZGxlcjtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8pIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsSGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICBjb25zdCB3cmFwcGVkSGFuZGxlciA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIgJiYgcGF5bG9hZC52ZXJpZmljYXRpb25fbGV2ZWwgPT09IFZlcmlmaWNhdGlvbkxldmVsLk9yYikge1xuICAgICAgICAgIGNvbXByZXNzQW5kUGFkUHJvb2YocGF5bG9hZC5wcm9vZikudGhlbihcbiAgICAgICAgICAgIChjb21wcmVzc2VkUHJvb2YpID0+IHtcbiAgICAgICAgICAgICAgcGF5bG9hZC5wcm9vZiA9IGNvbXByZXNzZWRQcm9vZjtcbiAgICAgICAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gd3JhcHBlZEhhbmRsZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IGhhbmRsZXI7XG4gICAgfVxuICB9XG4gIHN0YXRpYyB1bnN1YnNjcmliZShldmVudCkge1xuICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1tldmVudF07XG4gIH1cbiAgc3RhdGljIHRyaWdnZXIoZXZlbnQsIHBheWxvYWQpIHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgY29uc29sZS5lcnJvcihgTm8gaGFuZGxlciBmb3IgZXZlbnQgJHtldmVudH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdKHBheWxvYWQpO1xuICB9XG4gIHN0YXRpYyBhc3luYyBhd2FpdENvbW1hbmQoZXZlbnQsIGNvbW1hbmQsIGV4ZWN1dG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBsZXQgY29tbWFuZFBheWxvYWQgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlQW5kVW5zdWJzY3JpYmUgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKGV2ZW50KTtcbiAgICAgICAgcmVzb2x2ZSh7IGNvbW1hbmRQYXlsb2FkLCBmaW5hbFBheWxvYWQ6IHBheWxvYWQgfSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGhhbmRsZUFuZFVuc3Vic2NyaWJlKTtcbiAgICAgIGNvbW1hbmRQYXlsb2FkID0gZXhlY3V0b3IoKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgY29tbWFuZHNWYWxpZCh3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMubWluaUtpdENvbW1hbmRWZXJzaW9uKS5ldmVyeShcbiAgICAgIChbbWluaWtpdENvbW1hbmROYW1lLCB2ZXJzaW9uXSkgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kSW5wdXQgPSB3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzLmZpbmQoXG4gICAgICAgICAgKGNvbW1hbmQpID0+IGNvbW1hbmQubmFtZSA9PT0gbWluaWtpdENvbW1hbmROYW1lXG4gICAgICAgICk7XG4gICAgICAgIGlmICghY29tbWFuZElucHV0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGBDb21tYW5kICR7bWluaWtpdENvbW1hbmROYW1lfSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBhcHAuIFRyeSB1cGRhdGluZyB0aGUgYXBwIHZlcnNpb25gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbbWluaWtpdENvbW1hbmROYW1lXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRJbnB1dCA/IGNvbW1hbmRJbnB1dC5zdXBwb3J0ZWRfdmVyc2lvbnMuaW5jbHVkZXModmVyc2lvbikgOiBmYWxzZTtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIHN0YXRpYyBpbnN0YWxsKGFwcElkKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgQm9vbGVhbih3aW5kb3cuTWluaUtpdCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1wiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovXVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFhcHBJZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiQXBwIElEIG5vdCBwcm92aWRlZCBkdXJpbmcgaW5zdGFsbFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX01pbmlLaXQuYXBwSWQgPSBhcHBJZDtcbiAgICB9XG4gICAgaWYgKCF3aW5kb3cuV29ybGRBcHApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwib3V0c2lkZV9vZl93b3JsZGFwcFwiIC8qIE91dHNpZGVPZldvcmxkQXBwICovLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1wib3V0c2lkZV9vZl93b3JsZGFwcFwiIC8qIE91dHNpZGVPZldvcmxkQXBwICovXVxuICAgICAgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHdpbmRvdy5NaW5pS2l0ID0gX01pbmlLaXQ7XG4gICAgICB0aGlzLnNlbmRJbml0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1widW5rbm93blwiIC8qIFVua25vd24gKi9dLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwidW5rbm93blwiIC8qIFVua25vd24gKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghdGhpcy5jb21tYW5kc1ZhbGlkKHdpbmRvdy5Xb3JsZEFwcC5zdXBwb3J0ZWRfY29tbWFuZHMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JDb2RlOiBcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqLyxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZVtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YWxsZWQoZGVidWcpIHtcbiAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKFwiTWluaUtpdCBpcyBhbGl2ZSFcIik7XG4gICAgY29uc3QgaXNJbnN0YWxsZWQgPSBCb29sZWFuKHdpbmRvdy5NaW5pS2l0KTtcbiAgICBpZiAoIWlzSW5zdGFsbGVkKVxuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJNaW5pS2l0IGlzIG5vdCBpbnN0YWxsZWQuIE1ha2Ugc3VyZSB5b3UncmUgcnVubmluZyB0aGUgYXBwbGljYXRpb24gaW5zaWRlIG9mIFdvcmxkIEFwcFwiXG4gICAgICApO1xuICAgIHJldHVybiBpc0luc3RhbGxlZDtcbiAgfVxufTtcbl9NaW5pS2l0Lk1JTklLSVRfVkVSU0lPTiA9IDE7XG5fTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb24gPSB7XG4gIFtcInZlcmlmeVwiIC8qIFZlcmlmeSAqL106IDEsXG4gIFtcInBheVwiIC8qIFBheSAqL106IDEsXG4gIFtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL106IDEsXG4gIFtcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dOiAxLFxuICBbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL106IDEsXG4gIFtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dOiAxLFxuICBbXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi9dOiAxLFxuICBbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL106IDEsXG4gIFtcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovXTogMSxcbiAgW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAxXG59O1xuX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlID0ge1xuICBbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dOiBmYWxzZSxcbiAgW1wicGF5XCIgLyogUGF5ICovXTogZmFsc2UsXG4gIFtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL106IGZhbHNlLFxuICBbXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovXTogZmFsc2UsXG4gIFtcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovXTogZmFsc2UsXG4gIFtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dOiBmYWxzZSxcbiAgW1wic2hhcmUtY29udGFjdHNcIiAvKiBTaGFyZUNvbnRhY3RzICovXTogZmFsc2UsXG4gIFtcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovXTogZmFsc2UsXG4gIFtcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovXTogZmFsc2UsXG4gIFtcInNlbmQtaGFwdGljLWZlZWRiYWNrXCIgLyogU2VuZEhhcHRpY0ZlZWRiYWNrICovXTogZmFsc2Vcbn07XG5fTWluaUtpdC5saXN0ZW5lcnMgPSB7XG4gIFtcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcGF5bWVudFwiIC8qIE1pbmlBcHBQYXltZW50ICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXdhbGxldC1hdXRoXCIgLyogTWluaUFwcFdhbGxldEF1dGggKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiIC8qIE1pbmlBcHBTZW5kVHJhbnNhY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCIgLyogTWluaUFwcFNpZ25NZXNzYWdlICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNpZ24tdHlwZWQtZGF0YVwiIC8qIE1pbmlBcHBTaWduVHlwZWREYXRhICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogTWluaUFwcFJlcXVlc3RQZXJtaXNzaW9uICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqL106ICgpID0+IHtcbiAgfSxcbiAgW1wibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAoKSA9PiB7XG4gIH1cbn07XG5fTWluaUtpdC5hcHBJZCA9IG51bGw7XG4vKipcbiAqIEBkZXByZWNhdGVkIHlvdSBzaG91bGQgdXNlIE1pbmlLaXQudXNlci53YWxsZXRBZGRyZXNzIGluc3RlYWRcbiAqL1xuX01pbmlLaXQud2FsbGV0QWRkcmVzcyA9IG51bGw7XG5fTWluaUtpdC51c2VyID0gbnVsbDtcbl9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MgPSBhc3luYyAoYWRkcmVzcykgPT4ge1xuICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGdldFVzZXJQcm9maWxlKGFkZHJlc3MpO1xuICByZXR1cm4ge1xuICAgIHdhbGxldEFkZHJlc3M6IGFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXJQcm9maWxlLnVzZXJuYW1lLFxuICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB1c2VyUHJvZmlsZS5wcm9maWxlUGljdHVyZVVybFxuICB9O1xufTtcbl9NaW5pS2l0LmNvbW1hbmRzID0ge1xuICB2ZXJpZnk6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInZlcmlmeVwiIC8qIFZlcmlmeSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3ZlcmlmeScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBldmVudFBheWxvYWQgPSB7XG4gICAgICBhY3Rpb246IGVuY29kZUFjdGlvbihwYXlsb2FkLmFjdGlvbiksXG4gICAgICBzaWduYWw6IGdlbmVyYXRlU2lnbmFsKHBheWxvYWQuc2lnbmFsKS5kaWdlc3QsXG4gICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6IHBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsIHx8IFZlcmlmaWNhdGlvbkxldmVsLk9yYixcbiAgICAgIHRpbWVzdGFtcFxuICAgIH07XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInZlcmlmeVwiIC8qIFZlcmlmeSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInZlcmlmeVwiIC8qIFZlcmlmeSAqL10sXG4gICAgICBwYXlsb2FkOiBldmVudFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gZXZlbnRQYXlsb2FkO1xuICB9LFxuICBwYXk6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInBheVwiIC8qIFBheSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3BheScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVQYXltZW50UGF5bG9hZChwYXlsb2FkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5ldHdvcmsgPSBcIndvcmxkY2hhaW5cIiAvKiBXb3JsZENoYWluICovO1xuICAgIGNvbnN0IGV2ZW50UGF5bG9hZCA9IHtcbiAgICAgIC4uLnBheWxvYWQsXG4gICAgICBuZXR3b3JrXG4gICAgfTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwicGF5XCIgLyogUGF5ICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicGF5XCIgLyogUGF5ICovXSxcbiAgICAgIHBheWxvYWQ6IGV2ZW50UGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBldmVudFBheWxvYWQ7XG4gIH0sXG4gIHdhbGxldEF1dGg6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3dhbGxldEF1dGgnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0KHBheWxvYWQpO1xuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC52YWxpZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJGYWlsZWQgdG8gdmFsaWRhdGUgd2FsbGV0IGF1dGggaW5wdXQ6XFxuXFxuIC0tPlwiLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0Lm1lc3NhZ2VcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IHByb3RvY29sID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgcHJvdG9jb2wgPSBjdXJyZW50VXJsLnByb3RvY29sLnNwbGl0KFwiOlwiKVswXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgY3VycmVudCBVUkxcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNpd2VNZXNzYWdlID0gZ2VuZXJhdGVTaXdlTWVzc2FnZSh7XG4gICAgICBzY2hlbWU6IHByb3RvY29sLFxuICAgICAgZG9tYWluOiB3aW5kb3cubG9jYXRpb24uaG9zdCxcbiAgICAgIHN0YXRlbWVudDogcGF5bG9hZC5zdGF0ZW1lbnQgPz8gdm9pZCAwLFxuICAgICAgdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgIHZlcnNpb246IDEsXG4gICAgICBjaGFpbl9pZDogNDgwLFxuICAgICAgbm9uY2U6IHBheWxvYWQubm9uY2UsXG4gICAgICBpc3N1ZWRfYXQ6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcbiAgICAgIGV4cGlyYXRpb25fdGltZTogcGF5bG9hZC5leHBpcmF0aW9uVGltZT8udG9JU09TdHJpbmcoKSA/PyB2b2lkIDAsXG4gICAgICBub3RfYmVmb3JlOiBwYXlsb2FkLm5vdEJlZm9yZT8udG9JU09TdHJpbmcoKSA/PyB2b2lkIDAsXG4gICAgICByZXF1ZXN0X2lkOiBwYXlsb2FkLnJlcXVlc3RJZCA/PyB2b2lkIDBcbiAgICB9KTtcbiAgICBjb25zdCB3YWxsZXRBdXRoUGF5bG9hZCA9IHsgc2l3ZU1lc3NhZ2UgfTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovXSxcbiAgICAgIHBheWxvYWQ6IHdhbGxldEF1dGhQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHdhbGxldEF1dGhQYXlsb2FkO1xuICB9LFxuICBzZW5kVHJhbnNhY3Rpb246IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kVHJhbnNhY3Rpb24nIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB2YWxpZGF0ZWRQYXlsb2FkID0gdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQpO1xuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL10sXG4gICAgICBwYXlsb2FkOiB2YWxpZGF0ZWRQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkYXRlZFBheWxvYWQ7XG4gIH0sXG4gIHNpZ25NZXNzYWdlOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NpZ25NZXNzYWdlJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInc2lnblR5cGVkRGF0YScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHNoYXJlQ29udGFjdHM6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaGFyZUNvbnRhY3RzJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHJlcXVlc3RQZXJtaXNzaW9uOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3JlcXVlc3RQZXJtaXNzaW9uJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBnZXRQZXJtaXNzaW9uczogKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ2dldFBlcm1pc3Npb25zJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wiZ2V0LXBlcm1pc3Npb25zXCIgLyogR2V0UGVybWlzc2lvbnMgKi9dLFxuICAgICAgcGF5bG9hZDoge31cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcInNlbnRcIlxuICAgIH07XG4gIH0sXG4gIHNlbmRIYXB0aWNGZWVkYmFjazogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kSGFwdGljRmVlZGJhY2snIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbn07XG4vKipcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFzeW5jIHZlcnNpb25zIG9mIGFsbCB0aGUgY29tbWFuZHMuXG4gKiBJbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IGxpc3RlbmVycywgeW91IGNhbiBqdXN0IGBhd2FpdGAgdGhlc2UuXG4gKlxuICogVGhleSByZXR1cm4gYSBzdGFuZGFyZGl6ZWQgb2JqZWN0XG4gKlxuICogY29tbWFuZFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGNvbW1hbmQgZnVuY3Rpb25cbiAqXG4gKiBmaW5hbFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGV2ZW50IGxpc3RlbmVyLCBvciBpbiBvdGhlciB3b3JkcywgV29ybGRBcHAgcmVzcG9uc2VcbiAqL1xuX01pbmlLaXQuY29tbWFuZHNBc3luYyA9IHtcbiAgdmVyaWZ5OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8sXG4gICAgICAgICAgXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMudmVyaWZ5KHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXNwb25zZS5maW5hbFBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXNwb25zZS5maW5hbFBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsID09PSBWZXJpZmljYXRpb25MZXZlbC5PcmIpIHtcbiAgICAgICAgICByZXNwb25zZS5maW5hbFBheWxvYWQucHJvb2YgPSBhd2FpdCBjb21wcmVzc0FuZFBhZFByb29mKFxuICAgICAgICAgICAgcmVzcG9uc2UuZmluYWxQYXlsb2FkLnByb29mXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHBheTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXBheW1lbnRcIiAvKiBNaW5pQXBwUGF5bWVudCAqLyxcbiAgICAgICAgICBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5wYXkocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICB3YWxsZXRBdXRoOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy53YWxsZXRBdXRoKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIiAvKiBNaW5pQXBwU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgICAgIFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kVHJhbnNhY3Rpb24ocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2lnbk1lc3NhZ2U6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIiAvKiBNaW5pQXBwU2lnbk1lc3NhZ2UgKi8sXG4gICAgICAgICAgXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaWduTWVzc2FnZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCIgLyogTWluaUFwcFNpZ25UeXBlZERhdGEgKi8sXG4gICAgICAgICAgXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnNpZ25UeXBlZERhdGEocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2hhcmVDb250YWN0czogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuc2hhcmVDb250YWN0cyhwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICByZXF1ZXN0UGVybWlzc2lvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXJlcXVlc3QtcGVybWlzc2lvblwiIC8qIE1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvbiAqLyxcbiAgICAgICAgICBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnJlcXVlc3RQZXJtaXNzaW9uKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgZ2V0UGVybWlzc2lvbnM6IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqLyxcbiAgICAgICAgICBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLmdldFBlcm1pc3Npb25zKClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzZW5kSGFwdGljRmVlZGJhY2s6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICAgICAgXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kSGFwdGljRmVlZGJhY2socGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIE1pbmlLaXQgPSBfTWluaUtpdDtcblxuLy8gaW5kZXgudHNcbmltcG9ydCB7IFZlcmlmaWNhdGlvbkxldmVsIGFzIFZlcmlmaWNhdGlvbkxldmVsMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbmltcG9ydCB7XG4gIHZlcmlmeUNsb3VkUHJvb2Zcbn0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZS9iYWNrZW5kXCI7XG5cbi8vIGhlbHBlcnMvYWRkcmVzcy1ib29rL2luZGV4LnRzXG5pbXBvcnQgeyBjcmVhdGVQdWJsaWNDbGllbnQgYXMgY3JlYXRlUHVibGljQ2xpZW50MywgaHR0cCBhcyBodHRwMyB9IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIGFzIHdvcmxkY2hhaW4zIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgd29ybGRJZEFkZHJlc3NCb29rQ29udHJhY3RBZGRyZXNzID0gXCIweDU3YjkzMEQ1NTFlNjc3Q0MzNmUyZkEwMzZBZTJmZThGZGFFMDMzMERcIjtcbnZhciBhZGRyZXNzVmVyaWZpZWRVbnRpbEFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYWRkcmVzc1wiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJhZGRyZXNzVmVyaWZpZWRVbnRpbFwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgZ2V0SXNVc2VyVmVyaWZpZWQgPSBhc3luYyAod2FsbGV0QWRkcmVzcywgcnBjVXJsKSA9PiB7XG4gIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudDMoe1xuICAgIGNoYWluOiB3b3JsZGNoYWluMyxcbiAgICB0cmFuc3BvcnQ6IGh0dHAzKFxuICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgIClcbiAgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyaWZpZWRVbnRpbFJlc3BvbnNlID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiB3b3JsZElkQWRkcmVzc0Jvb2tDb250cmFjdEFkZHJlc3MsXG4gICAgICBhYmk6IGFkZHJlc3NWZXJpZmllZFVudGlsQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImFkZHJlc3NWZXJpZmllZFVudGlsXCIsXG4gICAgICBhcmdzOiBbd2FsbGV0QWRkcmVzc11cbiAgICB9KTtcbiAgICBjb25zdCB2ZXJpZmllZFVudGlsID0gTnVtYmVyKHZlcmlmaWVkVW50aWxSZXNwb25zZS50b1N0cmluZygpKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2ZXJpZmllZFVudGlsKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB2ZXJpZmllZFVudGlsIHZhbHVlOlwiLCB2ZXJpZmllZFVudGlsKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuICAgIHJldHVybiB2ZXJpZmllZFVudGlsID4gY3VycmVudFRpbWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQ29tbWFuZCxcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yTWVzc2FnZSxcbiAgTWluaUtpdCxcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzLFxuICBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZSxcbiAgTmV0d29yayxcbiAgUGF5bWVudEVycm9yQ29kZXMsXG4gIFBheW1lbnRFcnJvck1lc3NhZ2UsXG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzLFxuICBQZXJtaXNzaW9uLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMsXG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JNZXNzYWdlLFxuICBSZXNwb25zZUV2ZW50LFxuICBTQUZFX0NPTlRSQUNUX0FCSSxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlLFxuICBTaWduTWVzc2FnZUVycm9yQ29kZXMsXG4gIFNpZ25NZXNzYWdlRXJyb3JNZXNzYWdlLFxuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlcyxcbiAgU2lnblR5cGVkRGF0YUVycm9yTWVzc2FnZSxcbiAgVG9rZW5EZWNpbWFscyxcbiAgVG9rZW5zLFxuICBBcHBFcnJvckNvZGVzMiBhcyBWZXJpZmljYXRpb25FcnJvckNvZGVzLFxuICBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UsXG4gIFZlcmlmaWNhdGlvbkxldmVsMiBhcyBWZXJpZmljYXRpb25MZXZlbCxcbiAgV2FsbGV0QXV0aEVycm9yQ29kZXMsXG4gIFdhbGxldEF1dGhFcnJvck1lc3NhZ2UsXG4gIGdldElzVXNlclZlcmlmaWVkLFxuICBwYXJzZVNpd2VNZXNzYWdlLFxuICB0b2tlblRvRGVjaW1hbHMsXG4gIHZlcmlmeUNsb3VkUHJvb2YsXG4gIHZlcmlmeVNpd2VNZXNzYWdlXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@worldcoin/minikit-js/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js":
/*!********************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* binding */ encodeAction),\n/* harmony export */   generateSignal: () => (/* binding */ generateSignal),\n/* harmony export */   hashToField: () => (/* binding */ hashToField),\n/* harmony export */   packAndEncode: () => (/* binding */ packAndEncode),\n/* harmony export */   solidityEncode: () => (/* binding */ solidityEncode)\n/* harmony export */ });\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer/index.js */ \"(ssr)/./node_modules/buffer/index.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/ox/_esm/core/Bytes.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/ox/_esm/core/Hex.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/ox/_esm/core/AbiParameters.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/ox/_esm/core/Hash.js\");\n// src/lib/hashing.ts\n\n\nfunction hashToField(input) {\n  if (ox__WEBPACK_IMPORTED_MODULE_1__.validate(input) || ox__WEBPACK_IMPORTED_MODULE_2__.validate(input)) return hashEncodedBytes(input);\n  return hashString(input);\n}\nfunction packAndEncode(input) {\n  const [types, values] = input.reduce(\n    ([types2, values2], [type, value]) => {\n      types2.push(type);\n      values2.push(value);\n      return [types2, values2];\n    },\n    [[], []]\n  );\n  return hashEncodedBytes(ox__WEBPACK_IMPORTED_MODULE_3__.encodePacked(types, values));\n}\nfunction hashString(input) {\n  const bytesInput = buffer_index_js__WEBPACK_IMPORTED_MODULE_0__.Buffer.from(input);\n  return hashEncodedBytes(bytesInput);\n}\nfunction hashEncodedBytes(input) {\n  const hash = BigInt(ox__WEBPACK_IMPORTED_MODULE_4__.keccak256(input, { as: \"Hex\" })) >> 8n;\n  const rawDigest = hash.toString(16);\n  return { hash, digest: `0x${rawDigest.padStart(64, \"0\")}` };\n}\nvar solidityEncode = (types, values) => {\n  if (types.length !== values.length) {\n    throw new Error(\"Types and values arrays must have the same length.\");\n  }\n  return { types, values };\n};\nvar generateSignal = (signal) => {\n  if (!signal || typeof signal === \"string\") return hashToField(signal ?? \"\");\n  return packAndEncode(signal.types.map((type, index) => [type, signal.values[index]]));\n};\nvar encodeAction = (action) => {\n  if (!action) return \"\";\n  if (typeof action === \"string\") return action;\n  return action.types.map((type, index) => `${type}(${action.values[index]})`).join(\",\");\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2NodW5rLUhaMlNRQTVWLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUNZO0FBQ3JEO0FBQ0EsTUFBTSx3Q0FBYyxXQUFXLHdDQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDBCQUEwQiw0Q0FBMEI7QUFDcEQ7QUFDQTtBQUNBLHFCQUFxQixtREFBTTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IseUNBQWMsVUFBVSxXQUFXO0FBQ3pEO0FBQ0EsV0FBVyxtQkFBbUIsNEJBQTRCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxLQUFLLEdBQUcscUJBQXFCO0FBQzNFOztBQVFFIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvY2h1bmstSFoyU1FBNVYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9oYXNoaW5nLnRzXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBYmlQYXJhbWV0ZXJzLCBCeXRlcywgSGV4LCBIYXNoIH0gZnJvbSBcIm94XCI7XG5mdW5jdGlvbiBoYXNoVG9GaWVsZChpbnB1dCkge1xuICBpZiAoQnl0ZXMudmFsaWRhdGUoaW5wdXQpIHx8IEhleC52YWxpZGF0ZShpbnB1dCkpIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGlucHV0KTtcbiAgcmV0dXJuIGhhc2hTdHJpbmcoaW5wdXQpO1xufVxuZnVuY3Rpb24gcGFja0FuZEVuY29kZShpbnB1dCkge1xuICBjb25zdCBbdHlwZXMsIHZhbHVlc10gPSBpbnB1dC5yZWR1Y2UoXG4gICAgKFt0eXBlczIsIHZhbHVlczJdLCBbdHlwZSwgdmFsdWVdKSA9PiB7XG4gICAgICB0eXBlczIucHVzaCh0eXBlKTtcbiAgICAgIHZhbHVlczIucHVzaCh2YWx1ZSk7XG4gICAgICByZXR1cm4gW3R5cGVzMiwgdmFsdWVzMl07XG4gICAgfSxcbiAgICBbW10sIFtdXVxuICApO1xuICByZXR1cm4gaGFzaEVuY29kZWRCeXRlcyhBYmlQYXJhbWV0ZXJzLmVuY29kZVBhY2tlZCh0eXBlcywgdmFsdWVzKSk7XG59XG5mdW5jdGlvbiBoYXNoU3RyaW5nKGlucHV0KSB7XG4gIGNvbnN0IGJ5dGVzSW5wdXQgPSBCdWZmZXIuZnJvbShpbnB1dCk7XG4gIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGJ5dGVzSW5wdXQpO1xufVxuZnVuY3Rpb24gaGFzaEVuY29kZWRCeXRlcyhpbnB1dCkge1xuICBjb25zdCBoYXNoID0gQmlnSW50KEhhc2gua2VjY2FrMjU2KGlucHV0LCB7IGFzOiBcIkhleFwiIH0pKSA+PiA4bjtcbiAgY29uc3QgcmF3RGlnZXN0ID0gaGFzaC50b1N0cmluZygxNik7XG4gIHJldHVybiB7IGhhc2gsIGRpZ2VzdDogYDB4JHtyYXdEaWdlc3QucGFkU3RhcnQoNjQsIFwiMFwiKX1gIH07XG59XG52YXIgc29saWRpdHlFbmNvZGUgPSAodHlwZXMsIHZhbHVlcykgPT4ge1xuICBpZiAodHlwZXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZXMgYW5kIHZhbHVlcyBhcnJheXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cIik7XG4gIH1cbiAgcmV0dXJuIHsgdHlwZXMsIHZhbHVlcyB9O1xufTtcbnZhciBnZW5lcmF0ZVNpZ25hbCA9IChzaWduYWwpID0+IHtcbiAgaWYgKCFzaWduYWwgfHwgdHlwZW9mIHNpZ25hbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGhhc2hUb0ZpZWxkKHNpZ25hbCA/PyBcIlwiKTtcbiAgcmV0dXJuIHBhY2tBbmRFbmNvZGUoc2lnbmFsLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IFt0eXBlLCBzaWduYWwudmFsdWVzW2luZGV4XV0pKTtcbn07XG52YXIgZW5jb2RlQWN0aW9uID0gKGFjdGlvbikgPT4ge1xuICBpZiAoIWFjdGlvbikgcmV0dXJuIFwiXCI7XG4gIGlmICh0eXBlb2YgYWN0aW9uID09PSBcInN0cmluZ1wiKSByZXR1cm4gYWN0aW9uO1xuICByZXR1cm4gYWN0aW9uLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IGAke3R5cGV9KCR7YWN0aW9uLnZhbHVlc1tpbmRleF19KWApLmpvaW4oXCIsXCIpO1xufTtcblxuZXhwb3J0IHtcbiAgaGFzaFRvRmllbGQsXG4gIHBhY2tBbmRFbmNvZGUsXG4gIHNvbGlkaXR5RW5jb2RlLFxuICBnZW5lcmF0ZVNpZ25hbCxcbiAgZW5jb2RlQWN0aW9uXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/idkit-core/build/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppErrorCodes: () => (/* binding */ AppErrorCodes),\n/* harmony export */   CredentialType: () => (/* binding */ CredentialType),\n/* harmony export */   DEFAULT_VERIFICATION_LEVEL: () => (/* binding */ DEFAULT_VERIFICATION_LEVEL),\n/* harmony export */   VerificationLevel: () => (/* binding */ VerificationLevel),\n/* harmony export */   VerificationState: () => (/* binding */ VerificationState),\n/* harmony export */   useWorldBridgeStore: () => (/* binding */ useWorldBridgeStore),\n/* harmony export */   verification_level_to_credential_types: () => (/* binding */ verification_level_to_credential_types)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/zustand/esm/index.mjs\");\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! buffer/index.js */ \"(ssr)/./node_modules/buffer/index.js\");\n\n\n// src/types/bridge.ts\nvar AppErrorCodes = /* @__PURE__ */ ((AppErrorCodes2) => {\n  AppErrorCodes2[\"ConnectionFailed\"] = \"connection_failed\";\n  AppErrorCodes2[\"VerificationRejected\"] = \"verification_rejected\";\n  AppErrorCodes2[\"MaxVerificationsReached\"] = \"max_verifications_reached\";\n  AppErrorCodes2[\"CredentialUnavailable\"] = \"credential_unavailable\";\n  AppErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  AppErrorCodes2[\"InvalidNetwork\"] = \"invalid_network\";\n  AppErrorCodes2[\"InclusionProofFailed\"] = \"inclusion_proof_failed\";\n  AppErrorCodes2[\"InclusionProofPending\"] = \"inclusion_proof_pending\";\n  AppErrorCodes2[\"UnexpectedResponse\"] = \"unexpected_response\";\n  AppErrorCodes2[\"FailedByHostApp\"] = \"failed_by_host_app\";\n  AppErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return AppErrorCodes2;\n})(AppErrorCodes || {});\nvar VerificationState = /* @__PURE__ */ ((VerificationState2) => {\n  VerificationState2[\"PreparingClient\"] = \"loading_widget\";\n  VerificationState2[\"WaitingForConnection\"] = \"awaiting_connection\";\n  VerificationState2[\"WaitingForApp\"] = \"awaiting_app\";\n  VerificationState2[\"Confirmed\"] = \"confirmed\";\n  VerificationState2[\"Failed\"] = \"failed\";\n  return VerificationState2;\n})(VerificationState || {});\n\n// src/types/config.ts\nvar CredentialType = /* @__PURE__ */ ((CredentialType2) => {\n  CredentialType2[\"Orb\"] = \"orb\";\n  CredentialType2[\"SecureDocument\"] = \"secure_document\";\n  CredentialType2[\"Document\"] = \"document\";\n  CredentialType2[\"Device\"] = \"device\";\n  return CredentialType2;\n})(CredentialType || {});\nvar VerificationLevel = /* @__PURE__ */ ((VerificationLevel2) => {\n  VerificationLevel2[\"Orb\"] = \"orb\";\n  VerificationLevel2[\"SecureDocument\"] = \"secure_document\";\n  VerificationLevel2[\"Document\"] = \"document\";\n  VerificationLevel2[\"Device\"] = \"device\";\n  return VerificationLevel2;\n})(VerificationLevel || {});\n\n// src/bridge.ts\n\n\n// src/lib/validation.ts\nfunction validate_bridge_url(bridge_url, is_staging) {\n  try {\n    new URL(bridge_url);\n  } catch (e) {\n    return { valid: false, errors: [\"Failed to parse Bridge URL.\"] };\n  }\n  const test_url = new URL(bridge_url);\n  const errors = [];\n  if (is_staging && [\"localhost\", \"127.0.0.1\"].includes(test_url.hostname)) {\n    console.log(\"Using staging app_id with localhost bridge_url. Skipping validation.\");\n    return { valid: true };\n  }\n  if (test_url.protocol !== \"https:\") {\n    errors.push(\"Bridge URL must use HTTPS.\");\n  }\n  if (test_url.port) {\n    errors.push(\"Bridge URL must use the default port (443).\");\n  }\n  if (test_url.pathname !== \"/\") {\n    errors.push(\"Bridge URL must not have a path.\");\n  }\n  if (test_url.search) {\n    errors.push(\"Bridge URL must not have query parameters.\");\n  }\n  if (test_url.hash) {\n    errors.push(\"Bridge URL must not have a fragment.\");\n  }\n  if (!test_url.hostname.endsWith(\".worldcoin.org\") && !test_url.hostname.endsWith(\".toolsforhumanity.com\")) {\n    console.warn(\n      \"Bridge URL should be a subdomain of worldcoin.org or toolsforhumanity.com. The user's identity wallet may refuse to connect. This is a temporary measure and may be removed in the future.\"\n    );\n  }\n  if (errors.length) {\n    return { valid: false, errors };\n  }\n  return { valid: true };\n}\n\n// src/lib/utils.ts\n\nvar DEFAULT_VERIFICATION_LEVEL = \"orb\" /* Orb */;\nvar buffer_encode = (buffer) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(buffer).toString(\"base64\");\n};\nvar buffer_decode = (encoded) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_1__.Buffer.from(encoded, \"base64\");\n};\nvar verification_level_to_credential_types = (verification_level) => {\n  switch (verification_level) {\n    case \"device\" /* Device */:\n      return [\"orb\" /* Orb */, \"device\" /* Device */];\n    case \"document\" /* Document */:\n      return [\"document\" /* Document */, \"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"secure_document\" /* SecureDocument */:\n      return [\"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"orb\" /* Orb */:\n      return [\"orb\" /* Orb */];\n    default:\n      throw new Error(`Unknown verification level: ${verification_level}`);\n  }\n};\nvar credential_type_to_verification_level = (credential_type) => {\n  switch (credential_type) {\n    case \"orb\" /* Orb */:\n      return \"orb\" /* Orb */;\n    case \"secure_document\" /* SecureDocument */:\n      return \"secure_document\" /* SecureDocument */;\n    case \"document\" /* Document */:\n      return \"document\" /* Document */;\n    case \"device\" /* Device */:\n      return \"device\" /* Device */;\n    default:\n      throw new Error(`Unknown credential_type: ${credential_type}`);\n  }\n};\n\n// src/lib/crypto.ts\nvar encoder = new TextEncoder();\nvar decoder = new TextDecoder();\nvar generateKey = async () => {\n  return {\n    iv: window.crypto.getRandomValues(new Uint8Array(12)),\n    key: await window.crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"])\n  };\n};\nvar exportKey = async (key) => {\n  return buffer_encode(await window.crypto.subtle.exportKey(\"raw\", key));\n};\nvar encryptRequest = async (key, iv, request) => {\n  return {\n    iv: buffer_encode(iv),\n    payload: buffer_encode(\n      await window.crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, encoder.encode(request))\n    )\n  };\n};\nvar decryptResponse = async (key, iv, payload) => {\n  return decoder.decode(await window.crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, buffer_decode(payload)));\n};\n\n// src/bridge.ts\nvar DEFAULT_BRIDGE_URL = \"https://bridge.worldcoin.org\";\nvar useWorldBridgeStore = (0,zustand__WEBPACK_IMPORTED_MODULE_2__.create)((set, get) => ({\n  iv: null,\n  key: null,\n  result: null,\n  errorCode: null,\n  requestId: null,\n  connectorURI: null,\n  bridge_url: DEFAULT_BRIDGE_URL,\n  verificationState: \"loading_widget\" /* PreparingClient */,\n  createClient: async ({ bridge_url, app_id, verification_level, action_description, action, signal, partner }) => {\n    const { key, iv } = await generateKey();\n    if (bridge_url) {\n      const validation = validate_bridge_url(bridge_url, app_id.includes(\"staging\"));\n      if (!validation.valid) {\n        console.error(validation.errors.join(\"\\n\"));\n        set({ verificationState: \"failed\" /* Failed */ });\n        throw new Error(\"Invalid bridge_url. Please check the console for more details.\");\n      }\n    }\n    const res = await fetch(new URL(\"/request\", bridge_url ?? DEFAULT_BRIDGE_URL), {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(\n        await encryptRequest(\n          key,\n          iv,\n          JSON.stringify({\n            app_id,\n            action_description,\n            action: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction)(action),\n            signal: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal)(signal).digest,\n            credential_types: verification_level_to_credential_types(\n              verification_level ?? DEFAULT_VERIFICATION_LEVEL\n            ),\n            verification_level: verification_level ?? DEFAULT_VERIFICATION_LEVEL\n          })\n        )\n      )\n    });\n    if (!res.ok) {\n      set({ verificationState: \"failed\" /* Failed */ });\n      throw new Error(\"Failed to create client\");\n    }\n    const { request_id } = await res.json();\n    set({\n      iv,\n      key,\n      requestId: request_id,\n      bridge_url: bridge_url ?? DEFAULT_BRIDGE_URL,\n      verificationState: \"awaiting_connection\" /* WaitingForConnection */,\n      connectorURI: `https://world.org/verify?t=wld&i=${request_id}&k=${encodeURIComponent(\n        await exportKey(key)\n      )}${bridge_url && bridge_url !== DEFAULT_BRIDGE_URL ? `&b=${encodeURIComponent(bridge_url)}` : \"\"}${partner ? `&partner=${encodeURIComponent(true)}` : \"\"}`\n    });\n  },\n  pollForUpdates: async () => {\n    const key = get().key;\n    if (!key) throw new Error(\"No keypair found. Please call `createClient` first.\");\n    const res = await fetch(new URL(`/response/${get().requestId}`, get().bridge_url));\n    if (!res.ok) {\n      return set({\n        errorCode: \"connection_failed\" /* ConnectionFailed */,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    const { response, status } = await res.json();\n    if (status != \"completed\" /* Completed */) {\n      return set({\n        verificationState: status == \"retrieved\" /* Retrieved */ ? \"awaiting_app\" /* WaitingForApp */ : \"awaiting_connection\" /* WaitingForConnection */\n      });\n    }\n    let result = JSON.parse(\n      await decryptResponse(key, buffer_decode(response.iv), response.payload)\n    );\n    if (\"error_code\" in result) {\n      return set({\n        errorCode: result.error_code,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    if (\"credential_type\" in result) {\n      result = {\n        verification_level: credential_type_to_verification_level(result.credential_type),\n        ...result\n      };\n    }\n    set({\n      result,\n      key: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"confirmed\" /* Confirmed */\n    });\n  },\n  reset: () => {\n    set({\n      iv: null,\n      key: null,\n      result: null,\n      errorCode: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"loading_widget\" /* PreparingClient */\n    });\n  }\n}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFHNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHFCQUFxQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCOztBQUUxQjtBQUNpQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDeUM7QUFDekM7QUFDQTtBQUNBLFNBQVMsbURBQU07QUFDZjtBQUNBO0FBQ0EsU0FBUyxtREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxtQkFBbUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDhCQUE4QjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELHFCQUFxQjtBQUNsRjs7QUFFQTtBQUNBO0FBQ0EsMEJBQTBCLCtDQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscUZBQXFGO0FBQzlHLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQTBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0NBQW9DO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFZO0FBQ2hDLG9CQUFvQixrRUFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsWUFBWSwwQ0FBMEM7QUFDdEQ7QUFDQTtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsV0FBVyxLQUFLO0FBQ3hFO0FBQ0EsUUFBUSxFQUFFLHdEQUF3RCwrQkFBK0IsT0FBTyxFQUFFLHNCQUFzQix5QkFBeUIsT0FBTztBQUNoSyxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnQkFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQVNDIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZW5jb2RlQWN0aW9uLFxuICBnZW5lcmF0ZVNpZ25hbFxufSBmcm9tIFwiLi9jaHVuay1IWjJTUUE1Vi5qc1wiO1xuXG4vLyBzcmMvdHlwZXMvYnJpZGdlLnRzXG52YXIgQXBwRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKEFwcEVycm9yQ29kZXMyKSA9PiB7XG4gIEFwcEVycm9yQ29kZXMyW1wiQ29ubmVjdGlvbkZhaWxlZFwiXSA9IFwiY29ubmVjdGlvbl9mYWlsZWRcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJWZXJpZmljYXRpb25SZWplY3RlZFwiXSA9IFwidmVyaWZpY2F0aW9uX3JlamVjdGVkXCI7XG4gIEFwcEVycm9yQ29kZXMyW1wiTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRcIl0gPSBcIm1heF92ZXJpZmljYXRpb25zX3JlYWNoZWRcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJDcmVkZW50aWFsVW5hdmFpbGFibGVcIl0gPSBcImNyZWRlbnRpYWxfdW5hdmFpbGFibGVcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJtYWxmb3JtZWRfcmVxdWVzdFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkludmFsaWROZXR3b3JrXCJdID0gXCJpbnZhbGlkX25ldHdvcmtcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJJbmNsdXNpb25Qcm9vZkZhaWxlZFwiXSA9IFwiaW5jbHVzaW9uX3Byb29mX2ZhaWxlZFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkluY2x1c2lvblByb29mUGVuZGluZ1wiXSA9IFwiaW5jbHVzaW9uX3Byb29mX3BlbmRpbmdcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJVbmV4cGVjdGVkUmVzcG9uc2VcIl0gPSBcInVuZXhwZWN0ZWRfcmVzcG9uc2VcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJGYWlsZWRCeUhvc3RBcHBcIl0gPSBcImZhaWxlZF9ieV9ob3N0X2FwcFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gQXBwRXJyb3JDb2RlczI7XG59KShBcHBFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBWZXJpZmljYXRpb25TdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFZlcmlmaWNhdGlvblN0YXRlMikgPT4ge1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJQcmVwYXJpbmdDbGllbnRcIl0gPSBcImxvYWRpbmdfd2lkZ2V0XCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIldhaXRpbmdGb3JDb25uZWN0aW9uXCJdID0gXCJhd2FpdGluZ19jb25uZWN0aW9uXCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIldhaXRpbmdGb3JBcHBcIl0gPSBcImF3YWl0aW5nX2FwcFwiO1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJDb25maXJtZWRcIl0gPSBcImNvbmZpcm1lZFwiO1xuICBWZXJpZmljYXRpb25TdGF0ZTJbXCJGYWlsZWRcIl0gPSBcImZhaWxlZFwiO1xuICByZXR1cm4gVmVyaWZpY2F0aW9uU3RhdGUyO1xufSkoVmVyaWZpY2F0aW9uU3RhdGUgfHwge30pO1xuXG4vLyBzcmMvdHlwZXMvY29uZmlnLnRzXG52YXIgQ3JlZGVudGlhbFR5cGUgPSAvKiBAX19QVVJFX18gKi8gKChDcmVkZW50aWFsVHlwZTIpID0+IHtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiT3JiXCJdID0gXCJvcmJcIjtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiU2VjdXJlRG9jdW1lbnRcIl0gPSBcInNlY3VyZV9kb2N1bWVudFwiO1xuICBDcmVkZW50aWFsVHlwZTJbXCJEb2N1bWVudFwiXSA9IFwiZG9jdW1lbnRcIjtcbiAgQ3JlZGVudGlhbFR5cGUyW1wiRGV2aWNlXCJdID0gXCJkZXZpY2VcIjtcbiAgcmV0dXJuIENyZWRlbnRpYWxUeXBlMjtcbn0pKENyZWRlbnRpYWxUeXBlIHx8IHt9KTtcbnZhciBWZXJpZmljYXRpb25MZXZlbCA9IC8qIEBfX1BVUkVfXyAqLyAoKFZlcmlmaWNhdGlvbkxldmVsMikgPT4ge1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJPcmJcIl0gPSBcIm9yYlwiO1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJTZWN1cmVEb2N1bWVudFwiXSA9IFwic2VjdXJlX2RvY3VtZW50XCI7XG4gIFZlcmlmaWNhdGlvbkxldmVsMltcIkRvY3VtZW50XCJdID0gXCJkb2N1bWVudFwiO1xuICBWZXJpZmljYXRpb25MZXZlbDJbXCJEZXZpY2VcIl0gPSBcImRldmljZVwiO1xuICByZXR1cm4gVmVyaWZpY2F0aW9uTGV2ZWwyO1xufSkoVmVyaWZpY2F0aW9uTGV2ZWwgfHwge30pO1xuXG4vLyBzcmMvYnJpZGdlLnRzXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tIFwienVzdGFuZFwiO1xuXG4vLyBzcmMvbGliL3ZhbGlkYXRpb24udHNcbmZ1bmN0aW9uIHZhbGlkYXRlX2JyaWRnZV91cmwoYnJpZGdlX3VybCwgaXNfc3RhZ2luZykge1xuICB0cnkge1xuICAgIG5ldyBVUkwoYnJpZGdlX3VybCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yczogW1wiRmFpbGVkIHRvIHBhcnNlIEJyaWRnZSBVUkwuXCJdIH07XG4gIH1cbiAgY29uc3QgdGVzdF91cmwgPSBuZXcgVVJMKGJyaWRnZV91cmwpO1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgaWYgKGlzX3N0YWdpbmcgJiYgW1wibG9jYWxob3N0XCIsIFwiMTI3LjAuMC4xXCJdLmluY2x1ZGVzKHRlc3RfdXJsLmhvc3RuYW1lKSkge1xuICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgc3RhZ2luZyBhcHBfaWQgd2l0aCBsb2NhbGhvc3QgYnJpZGdlX3VybC4gU2tpcHBpbmcgdmFsaWRhdGlvbi5cIik7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbiAgfVxuICBpZiAodGVzdF91cmwucHJvdG9jb2wgIT09IFwiaHR0cHM6XCIpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCB1c2UgSFRUUFMuXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5wb3J0KSB7XG4gICAgZXJyb3JzLnB1c2goXCJCcmlkZ2UgVVJMIG11c3QgdXNlIHRoZSBkZWZhdWx0IHBvcnQgKDQ0MykuXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5wYXRobmFtZSAhPT0gXCIvXCIpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCBub3QgaGF2ZSBhIHBhdGguXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5zZWFyY2gpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCBub3QgaGF2ZSBxdWVyeSBwYXJhbWV0ZXJzLlwiKTtcbiAgfVxuICBpZiAodGVzdF91cmwuaGFzaCkge1xuICAgIGVycm9ycy5wdXNoKFwiQnJpZGdlIFVSTCBtdXN0IG5vdCBoYXZlIGEgZnJhZ21lbnQuXCIpO1xuICB9XG4gIGlmICghdGVzdF91cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIud29ybGRjb2luLm9yZ1wiKSAmJiAhdGVzdF91cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIudG9vbHNmb3JodW1hbml0eS5jb21cIikpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkJyaWRnZSBVUkwgc2hvdWxkIGJlIGEgc3ViZG9tYWluIG9mIHdvcmxkY29pbi5vcmcgb3IgdG9vbHNmb3JodW1hbml0eS5jb20uIFRoZSB1c2VyJ3MgaWRlbnRpdHkgd2FsbGV0IG1heSByZWZ1c2UgdG8gY29ubmVjdC4gVGhpcyBpcyBhIHRlbXBvcmFyeSBtZWFzdXJlIGFuZCBtYXkgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlwiXG4gICAgKTtcbiAgfVxuICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JzIH07XG4gIH1cbiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUgfTtcbn1cblxuLy8gc3JjL2xpYi91dGlscy50c1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlci9pbmRleC5qc1wiO1xudmFyIERFRkFVTFRfVkVSSUZJQ0FUSU9OX0xFVkVMID0gXCJvcmJcIiAvKiBPcmIgKi87XG52YXIgYnVmZmVyX2VuY29kZSA9IChidWZmZXIpID0+IHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1ZmZlcikudG9TdHJpbmcoXCJiYXNlNjRcIik7XG59O1xudmFyIGJ1ZmZlcl9kZWNvZGUgPSAoZW5jb2RlZCkgPT4ge1xuICByZXR1cm4gQnVmZmVyLmZyb20oZW5jb2RlZCwgXCJiYXNlNjRcIik7XG59O1xudmFyIHZlcmlmaWNhdGlvbl9sZXZlbF90b19jcmVkZW50aWFsX3R5cGVzID0gKHZlcmlmaWNhdGlvbl9sZXZlbCkgPT4ge1xuICBzd2l0Y2ggKHZlcmlmaWNhdGlvbl9sZXZlbCkge1xuICAgIGNhc2UgXCJkZXZpY2VcIiAvKiBEZXZpY2UgKi86XG4gICAgICByZXR1cm4gW1wib3JiXCIgLyogT3JiICovLCBcImRldmljZVwiIC8qIERldmljZSAqL107XG4gICAgY2FzZSBcImRvY3VtZW50XCIgLyogRG9jdW1lbnQgKi86XG4gICAgICByZXR1cm4gW1wiZG9jdW1lbnRcIiAvKiBEb2N1bWVudCAqLywgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLywgXCJvcmJcIiAvKiBPcmIgKi9dO1xuICAgIGNhc2UgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLzpcbiAgICAgIHJldHVybiBbXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLywgXCJvcmJcIiAvKiBPcmIgKi9dO1xuICAgIGNhc2UgXCJvcmJcIiAvKiBPcmIgKi86XG4gICAgICByZXR1cm4gW1wib3JiXCIgLyogT3JiICovXTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHZlcmlmaWNhdGlvbiBsZXZlbDogJHt2ZXJpZmljYXRpb25fbGV2ZWx9YCk7XG4gIH1cbn07XG52YXIgY3JlZGVudGlhbF90eXBlX3RvX3ZlcmlmaWNhdGlvbl9sZXZlbCA9IChjcmVkZW50aWFsX3R5cGUpID0+IHtcbiAgc3dpdGNoIChjcmVkZW50aWFsX3R5cGUpIHtcbiAgICBjYXNlIFwib3JiXCIgLyogT3JiICovOlxuICAgICAgcmV0dXJuIFwib3JiXCIgLyogT3JiICovO1xuICAgIGNhc2UgXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLzpcbiAgICAgIHJldHVybiBcInNlY3VyZV9kb2N1bWVudFwiIC8qIFNlY3VyZURvY3VtZW50ICovO1xuICAgIGNhc2UgXCJkb2N1bWVudFwiIC8qIERvY3VtZW50ICovOlxuICAgICAgcmV0dXJuIFwiZG9jdW1lbnRcIiAvKiBEb2N1bWVudCAqLztcbiAgICBjYXNlIFwiZGV2aWNlXCIgLyogRGV2aWNlICovOlxuICAgICAgcmV0dXJuIFwiZGV2aWNlXCIgLyogRGV2aWNlICovO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY3JlZGVudGlhbF90eXBlOiAke2NyZWRlbnRpYWxfdHlwZX1gKTtcbiAgfVxufTtcblxuLy8gc3JjL2xpYi9jcnlwdG8udHNcbnZhciBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG52YXIgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xudmFyIGdlbmVyYXRlS2V5ID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGl2OiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxMikpLFxuICAgIGtleTogYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoeyBuYW1lOiBcIkFFUy1HQ01cIiwgbGVuZ3RoOiAyNTYgfSwgdHJ1ZSwgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl0pXG4gIH07XG59O1xudmFyIGV4cG9ydEtleSA9IGFzeW5jIChrZXkpID0+IHtcbiAgcmV0dXJuIGJ1ZmZlcl9lbmNvZGUoYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KFwicmF3XCIsIGtleSkpO1xufTtcbnZhciBlbmNyeXB0UmVxdWVzdCA9IGFzeW5jIChrZXksIGl2LCByZXF1ZXN0KSA9PiB7XG4gIHJldHVybiB7XG4gICAgaXY6IGJ1ZmZlcl9lbmNvZGUoaXYpLFxuICAgIHBheWxvYWQ6IGJ1ZmZlcl9lbmNvZGUoXG4gICAgICBhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHsgbmFtZTogXCJBRVMtR0NNXCIsIGl2IH0sIGtleSwgZW5jb2Rlci5lbmNvZGUocmVxdWVzdCkpXG4gICAgKVxuICB9O1xufTtcbnZhciBkZWNyeXB0UmVzcG9uc2UgPSBhc3luYyAoa2V5LCBpdiwgcGF5bG9hZCkgPT4ge1xuICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoYXdhaXQgd2luZG93LmNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7IG5hbWU6IFwiQUVTLUdDTVwiLCBpdiB9LCBrZXksIGJ1ZmZlcl9kZWNvZGUocGF5bG9hZCkpKTtcbn07XG5cbi8vIHNyYy9icmlkZ2UudHNcbnZhciBERUZBVUxUX0JSSURHRV9VUkwgPSBcImh0dHBzOi8vYnJpZGdlLndvcmxkY29pbi5vcmdcIjtcbnZhciB1c2VXb3JsZEJyaWRnZVN0b3JlID0gY3JlYXRlKChzZXQsIGdldCkgPT4gKHtcbiAgaXY6IG51bGwsXG4gIGtleTogbnVsbCxcbiAgcmVzdWx0OiBudWxsLFxuICBlcnJvckNvZGU6IG51bGwsXG4gIHJlcXVlc3RJZDogbnVsbCxcbiAgY29ubmVjdG9yVVJJOiBudWxsLFxuICBicmlkZ2VfdXJsOiBERUZBVUxUX0JSSURHRV9VUkwsXG4gIHZlcmlmaWNhdGlvblN0YXRlOiBcImxvYWRpbmdfd2lkZ2V0XCIgLyogUHJlcGFyaW5nQ2xpZW50ICovLFxuICBjcmVhdGVDbGllbnQ6IGFzeW5jICh7IGJyaWRnZV91cmwsIGFwcF9pZCwgdmVyaWZpY2F0aW9uX2xldmVsLCBhY3Rpb25fZGVzY3JpcHRpb24sIGFjdGlvbiwgc2lnbmFsLCBwYXJ0bmVyIH0pID0+IHtcbiAgICBjb25zdCB7IGtleSwgaXYgfSA9IGF3YWl0IGdlbmVyYXRlS2V5KCk7XG4gICAgaWYgKGJyaWRnZV91cmwpIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZV9icmlkZ2VfdXJsKGJyaWRnZV91cmwsIGFwcF9pZC5pbmNsdWRlcyhcInN0YWdpbmdcIikpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IodmFsaWRhdGlvbi5lcnJvcnMuam9pbihcIlxcblwiKSk7XG4gICAgICAgIHNldCh7IHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqLyB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBicmlkZ2VfdXJsLiBQbGVhc2UgY2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5cIik7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKG5ldyBVUkwoXCIvcmVxdWVzdFwiLCBicmlkZ2VfdXJsID8/IERFRkFVTFRfQlJJREdFX1VSTCksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgYXdhaXQgZW5jcnlwdFJlcXVlc3QoXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIGl2LFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGFwcF9pZCxcbiAgICAgICAgICAgIGFjdGlvbl9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGFjdGlvbjogZW5jb2RlQWN0aW9uKGFjdGlvbiksXG4gICAgICAgICAgICBzaWduYWw6IGdlbmVyYXRlU2lnbmFsKHNpZ25hbCkuZGlnZXN0LFxuICAgICAgICAgICAgY3JlZGVudGlhbF90eXBlczogdmVyaWZpY2F0aW9uX2xldmVsX3RvX2NyZWRlbnRpYWxfdHlwZXMoXG4gICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9sZXZlbCA/PyBERUZBVUxUX1ZFUklGSUNBVElPTl9MRVZFTFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9sZXZlbDogdmVyaWZpY2F0aW9uX2xldmVsID8/IERFRkFVTFRfVkVSSUZJQ0FUSU9OX0xFVkVMXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICBzZXQoeyB2ZXJpZmljYXRpb25TdGF0ZTogXCJmYWlsZWRcIiAvKiBGYWlsZWQgKi8gfSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIGNsaWVudFwiKTtcbiAgICB9XG4gICAgY29uc3QgeyByZXF1ZXN0X2lkIH0gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHNldCh7XG4gICAgICBpdixcbiAgICAgIGtleSxcbiAgICAgIHJlcXVlc3RJZDogcmVxdWVzdF9pZCxcbiAgICAgIGJyaWRnZV91cmw6IGJyaWRnZV91cmwgPz8gREVGQVVMVF9CUklER0VfVVJMLFxuICAgICAgdmVyaWZpY2F0aW9uU3RhdGU6IFwiYXdhaXRpbmdfY29ubmVjdGlvblwiIC8qIFdhaXRpbmdGb3JDb25uZWN0aW9uICovLFxuICAgICAgY29ubmVjdG9yVVJJOiBgaHR0cHM6Ly93b3JsZC5vcmcvdmVyaWZ5P3Q9d2xkJmk9JHtyZXF1ZXN0X2lkfSZrPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBhd2FpdCBleHBvcnRLZXkoa2V5KVxuICAgICAgKX0ke2JyaWRnZV91cmwgJiYgYnJpZGdlX3VybCAhPT0gREVGQVVMVF9CUklER0VfVVJMID8gYCZiPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGJyaWRnZV91cmwpfWAgOiBcIlwifSR7cGFydG5lciA/IGAmcGFydG5lcj0ke2VuY29kZVVSSUNvbXBvbmVudCh0cnVlKX1gIDogXCJcIn1gXG4gICAgfSk7XG4gIH0sXG4gIHBvbGxGb3JVcGRhdGVzOiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0KCkua2V5O1xuICAgIGlmICgha2V5KSB0aHJvdyBuZXcgRXJyb3IoXCJObyBrZXlwYWlyIGZvdW5kLiBQbGVhc2UgY2FsbCBgY3JlYXRlQ2xpZW50YCBmaXJzdC5cIik7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gobmV3IFVSTChgL3Jlc3BvbnNlLyR7Z2V0KCkucmVxdWVzdElkfWAsIGdldCgpLmJyaWRnZV91cmwpKTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgcmV0dXJuIHNldCh7XG4gICAgICAgIGVycm9yQ29kZTogXCJjb25uZWN0aW9uX2ZhaWxlZFwiIC8qIENvbm5lY3Rpb25GYWlsZWQgKi8sXG4gICAgICAgIHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqL1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcmVzcG9uc2UsIHN0YXR1cyB9ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBpZiAoc3RhdHVzICE9IFwiY29tcGxldGVkXCIgLyogQ29tcGxldGVkICovKSB7XG4gICAgICByZXR1cm4gc2V0KHtcbiAgICAgICAgdmVyaWZpY2F0aW9uU3RhdGU6IHN0YXR1cyA9PSBcInJldHJpZXZlZFwiIC8qIFJldHJpZXZlZCAqLyA/IFwiYXdhaXRpbmdfYXBwXCIgLyogV2FpdGluZ0ZvckFwcCAqLyA6IFwiYXdhaXRpbmdfY29ubmVjdGlvblwiIC8qIFdhaXRpbmdGb3JDb25uZWN0aW9uICovXG4gICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UoXG4gICAgICBhd2FpdCBkZWNyeXB0UmVzcG9uc2Uoa2V5LCBidWZmZXJfZGVjb2RlKHJlc3BvbnNlLml2KSwgcmVzcG9uc2UucGF5bG9hZClcbiAgICApO1xuICAgIGlmIChcImVycm9yX2NvZGVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHJldHVybiBzZXQoe1xuICAgICAgICBlcnJvckNvZGU6IHJlc3VsdC5lcnJvcl9jb2RlLFxuICAgICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJmYWlsZWRcIiAvKiBGYWlsZWQgKi9cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoXCJjcmVkZW50aWFsX3R5cGVcIiBpbiByZXN1bHQpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiBjcmVkZW50aWFsX3R5cGVfdG9fdmVyaWZpY2F0aW9uX2xldmVsKHJlc3VsdC5jcmVkZW50aWFsX3R5cGUpLFxuICAgICAgICAuLi5yZXN1bHRcbiAgICAgIH07XG4gICAgfVxuICAgIHNldCh7XG4gICAgICByZXN1bHQsXG4gICAgICBrZXk6IG51bGwsXG4gICAgICByZXF1ZXN0SWQ6IG51bGwsXG4gICAgICBjb25uZWN0b3JVUkk6IG51bGwsXG4gICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJjb25maXJtZWRcIiAvKiBDb25maXJtZWQgKi9cbiAgICB9KTtcbiAgfSxcbiAgcmVzZXQ6ICgpID0+IHtcbiAgICBzZXQoe1xuICAgICAgaXY6IG51bGwsXG4gICAgICBrZXk6IG51bGwsXG4gICAgICByZXN1bHQ6IG51bGwsXG4gICAgICBlcnJvckNvZGU6IG51bGwsXG4gICAgICByZXF1ZXN0SWQ6IG51bGwsXG4gICAgICBjb25uZWN0b3JVUkk6IG51bGwsXG4gICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJsb2FkaW5nX3dpZGdldFwiIC8qIFByZXBhcmluZ0NsaWVudCAqL1xuICAgIH0pO1xuICB9XG59KSk7XG5leHBvcnQge1xuICBBcHBFcnJvckNvZGVzLFxuICBDcmVkZW50aWFsVHlwZSxcbiAgREVGQVVMVF9WRVJJRklDQVRJT05fTEVWRUwsXG4gIFZlcmlmaWNhdGlvbkxldmVsLFxuICBWZXJpZmljYXRpb25TdGF0ZSxcbiAgdXNlV29ybGRCcmlkZ2VTdG9yZSxcbiAgdmVyaWZpY2F0aW9uX2xldmVsX3RvX2NyZWRlbnRpYWxfdHlwZXNcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/idkit-core/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/lib/backend.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyCloudProof: () => (/* binding */ verifyCloudProof)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var browser_or_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! browser-or-node */ \"(ssr)/./node_modules/browser-or-node/dist/index.mjs\");\n\n\n// src/lib/backend.ts\n\nasync function verifyCloudProof(proof, app_id, action, signal, endpoint) {\n  if (browser_or_node__WEBPACK_IMPORTED_MODULE_1__.isBrowser) {\n    throw new Error(\"verifyCloudProof can only be used in the backend.\");\n  }\n  const response = await fetch(endpoint ?? `https://developer.worldcoin.org/api/v2/verify/${app_id}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      ...proof,\n      action,\n      signal_hash: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField)(signal ?? \"\").digest\n    })\n  });\n  if (response.ok) {\n    return { success: true };\n  } else {\n    return { success: false, ...await response.json() };\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9iYWNrZW5kLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUU4Qjs7QUFFOUI7QUFDNEM7QUFDNUM7QUFDQSxNQUFNLHNEQUFTO0FBQ2Y7QUFDQTtBQUNBLDRGQUE0RixPQUFPO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0RBQVc7QUFDOUIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsiL1VzZXJzL21hdGVvc2F1dG9uL01hdHRlby1Qcm9qZWN0L215LWFwcC9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9iYWNrZW5kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGhhc2hUb0ZpZWxkXG59IGZyb20gXCIuLi9jaHVuay1IWjJTUUE1Vi5qc1wiO1xuXG4vLyBzcmMvbGliL2JhY2tlbmQudHNcbmltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gXCJicm93c2VyLW9yLW5vZGVcIjtcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUNsb3VkUHJvb2YocHJvb2YsIGFwcF9pZCwgYWN0aW9uLCBzaWduYWwsIGVuZHBvaW50KSB7XG4gIGlmIChpc0Jyb3dzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2ZXJpZnlDbG91ZFByb29mIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGJhY2tlbmQuXCIpO1xuICB9XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQgPz8gYGh0dHBzOi8vZGV2ZWxvcGVyLndvcmxkY29pbi5vcmcvYXBpL3YyL3ZlcmlmeS8ke2FwcF9pZH1gLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgLi4ucHJvb2YsXG4gICAgICBhY3Rpb24sXG4gICAgICBzaWduYWxfaGFzaDogaGFzaFRvRmllbGQoc2lnbmFsID8/IFwiXCIpLmRpZ2VzdFxuICAgIH0pXG4gIH0pO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIC4uLmF3YWl0IHJlc3BvbnNlLmpzb24oKSB9O1xuICB9XG59XG5leHBvcnQge1xuICB2ZXJpZnlDbG91ZFByb29mXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@worldcoin/idkit-core/build/lib/hashing.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction),\n/* harmony export */   generateSignal: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal),\n/* harmony export */   hashToField: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField),\n/* harmony export */   packAndEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.packAndEncode),\n/* harmony export */   solidityEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.solidityEncode)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9oYXNoaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQU04QjtBQU81QiIsInNvdXJjZXMiOlsiL1VzZXJzL21hdGVvc2F1dG9uL01hdHRlby1Qcm9qZWN0L215LWFwcC9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2xpYi9oYXNoaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufSBmcm9tIFwiLi4vY2h1bmstSFoyU1FBNVYuanNcIjtcbmV4cG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/minikit-js/build/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@worldcoin/minikit-js/build/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Command: () => (/* binding */ Command),\n/* harmony export */   GetPermissionsErrorCodes: () => (/* binding */ GetPermissionsErrorCodes),\n/* harmony export */   GetPermissionsErrorMessage: () => (/* binding */ GetPermissionsErrorMessage),\n/* harmony export */   MiniKit: () => (/* binding */ MiniKit),\n/* harmony export */   MiniKitInstallErrorCodes: () => (/* binding */ MiniKitInstallErrorCodes),\n/* harmony export */   MiniKitInstallErrorMessage: () => (/* binding */ MiniKitInstallErrorMessage),\n/* harmony export */   Network: () => (/* binding */ Network),\n/* harmony export */   PaymentErrorCodes: () => (/* binding */ PaymentErrorCodes),\n/* harmony export */   PaymentErrorMessage: () => (/* binding */ PaymentErrorMessage),\n/* harmony export */   PaymentValidationErrors: () => (/* binding */ PaymentValidationErrors),\n/* harmony export */   Permission: () => (/* binding */ Permission),\n/* harmony export */   RequestPermissionErrorCodes: () => (/* binding */ RequestPermissionErrorCodes),\n/* harmony export */   RequestPermissionErrorMessage: () => (/* binding */ RequestPermissionErrorMessage),\n/* harmony export */   ResponseEvent: () => (/* binding */ ResponseEvent),\n/* harmony export */   SAFE_CONTRACT_ABI: () => (/* binding */ SAFE_CONTRACT_ABI),\n/* harmony export */   SendHapticFeedbackErrorCodes: () => (/* binding */ SendHapticFeedbackErrorCodes),\n/* harmony export */   SendHapticFeedbackErrorMessage: () => (/* binding */ SendHapticFeedbackErrorMessage),\n/* harmony export */   SendTransactionErrorCodes: () => (/* binding */ SendTransactionErrorCodes),\n/* harmony export */   SendTransactionErrorMessage: () => (/* binding */ SendTransactionErrorMessage),\n/* harmony export */   ShareContactsErrorCodes: () => (/* binding */ ShareContactsErrorCodes),\n/* harmony export */   ShareContactsErrorMessage: () => (/* binding */ ShareContactsErrorMessage),\n/* harmony export */   SignMessageErrorCodes: () => (/* binding */ SignMessageErrorCodes),\n/* harmony export */   SignMessageErrorMessage: () => (/* binding */ SignMessageErrorMessage),\n/* harmony export */   SignTypedDataErrorCodes: () => (/* binding */ SignTypedDataErrorCodes),\n/* harmony export */   SignTypedDataErrorMessage: () => (/* binding */ SignTypedDataErrorMessage),\n/* harmony export */   TokenDecimals: () => (/* binding */ TokenDecimals),\n/* harmony export */   Tokens: () => (/* binding */ Tokens),\n/* harmony export */   VerificationErrorCodes: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes),\n/* harmony export */   VerificationErrorMessage: () => (/* binding */ VerificationErrorMessage),\n/* harmony export */   VerificationLevel: () => (/* reexport safe */ _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel),\n/* harmony export */   WalletAuthErrorCodes: () => (/* binding */ WalletAuthErrorCodes),\n/* harmony export */   WalletAuthErrorMessage: () => (/* binding */ WalletAuthErrorMessage),\n/* harmony export */   getIsUserVerified: () => (/* binding */ getIsUserVerified),\n/* harmony export */   parseSiweMessage: () => (/* binding */ parseSiweMessage),\n/* harmony export */   tokenToDecimals: () => (/* binding */ tokenToDecimals),\n/* harmony export */   verifyCloudProof: () => (/* reexport safe */ _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_10__.verifyCloudProof),\n/* harmony export */   verifySiweMessage: () => (/* binding */ verifySiweMessage)\n/* harmony export */ });\n/* harmony import */ var _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @worldcoin/idkit-core */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/index.js\");\n/* harmony import */ var _worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @worldcoin/idkit-core/hashing */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/hashing.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/clients/createPublicClient.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/clients/transports/http.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/utils/abi/decodeAbiParameters.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/utils/abi/encodeAbiParameters.js\");\n/* harmony import */ var viem_chains__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! viem/chains */ \"(ssr)/./node_modules/viem/_esm/chains/definitions/worldchain.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/utils/signature/hashMessage.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/actions/getContract.js\");\n/* harmony import */ var viem__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! viem */ \"(ssr)/./node_modules/viem/_esm/utils/signature/recoverAddress.js\");\n/* harmony import */ var _worldcoin_idkit_core_backend__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @worldcoin/idkit-core/backend */ \"(ssr)/./node_modules/@worldcoin/idkit-core/build/lib/backend.js\");\n// minikit.ts\n\n\n\n// types/payment.ts\nvar Tokens = /* @__PURE__ */ ((Tokens3) => {\n  Tokens3[\"USDCE\"] = \"USDCE\";\n  Tokens3[\"WLD\"] = \"WLD\";\n  return Tokens3;\n})(Tokens || {});\nvar TokenDecimals = {\n  [\"USDCE\" /* USDCE */]: 6,\n  [\"WLD\" /* WLD */]: 18\n};\nvar Network = /* @__PURE__ */ ((Network2) => {\n  Network2[\"Optimism\"] = \"optimism\";\n  Network2[\"WorldChain\"] = \"worldchain\";\n  return Network2;\n})(Network || {});\n\n// helpers/payment/client.ts\nvar tokenToDecimals = (amount, token) => {\n  const decimals = TokenDecimals[token];\n  if (decimals === void 0) {\n    throw new Error(`Invalid token: ${token}`);\n  }\n  const factor = 10 ** decimals;\n  const result = amount * factor;\n  if (!Number.isInteger(result)) {\n    throw new Error(`The resulting amount is not a whole number: ${result}`);\n  }\n  return result;\n};\nvar validatePaymentPayload = (payload) => {\n  if (payload.tokens.some(\n    (token) => token.symbol == \"USDCE\" && parseFloat(token.token_amount) < 0.1\n  )) {\n    console.error(\"USDCE amount should be greater than $0.1\");\n    return false;\n  }\n  if (payload.reference.length > 36) {\n    console.error(\"Reference must not exceed 36 characters\");\n    return false;\n  }\n  if (typeof payload.reference !== \"string\") {\n    throw new Error(\"Reference must be a string\");\n  }\n  return true;\n};\n\n// helpers/proof/index.ts\n\n\nvar semaphoreVerifierAddress = \"0x79f46b94d134109EbcbbddBAeD0E88790409A0e4\";\nvar semaphoreVerifierAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"uint256[8]\",\n        name: \"proof\",\n        type: \"uint256[8]\"\n      }\n    ],\n    name: \"compressProof\",\n    outputs: [\n      {\n        internalType: \"uint256[4]\",\n        name: \"compressed\",\n        type: \"uint256[4]\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar compressAndPadProof = async (proof, rpcUrl) => {\n  try {\n    const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({\n      chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain,\n      transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)(\n        rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n      )\n    });\n    const decodedProof = (0,viem__WEBPACK_IMPORTED_MODULE_5__.decodeAbiParameters)(\n      [{ type: \"uint256[8]\" }],\n      proof\n    )[0];\n    const compressedProof = await publicClient.readContract({\n      address: semaphoreVerifierAddress,\n      abi: semaphoreVerifierAbi,\n      functionName: \"compressProof\",\n      args: [decodedProof]\n    });\n    const paddedProof = [...compressedProof, 0n, 0n, 0n, 0n];\n    return (0,viem__WEBPACK_IMPORTED_MODULE_6__.encodeAbiParameters)([{ type: \"uint256[8]\" }], [paddedProof]);\n  } catch (e) {\n    console.log(\"Failed to compress proof\", {\n      e,\n      proof\n    });\n    return proof;\n  }\n};\n\n// helpers/siwe/siwe.ts\n\n\nvar PREAMBLE = \" wants you to sign in with your Ethereum account:\";\nvar URI_TAG = \"URI: \";\nvar VERSION_TAG = \"Version: \";\nvar CHAIN_TAG = \"Chain ID: \";\nvar NONCE_TAG = \"Nonce: \";\nvar IAT_TAG = \"Issued At: \";\nvar EXP_TAG = \"Expiration Time: \";\nvar NBF_TAG = \"Not Before: \";\nvar RID_TAG = \"Request ID: \";\nvar ERC_191_PREFIX = \"\u0019Ethereum Signed Message:\\n\";\nvar tagged = (line, tag) => {\n  if (line && line.includes(tag)) {\n    return line.replace(tag, \"\");\n  } else {\n    throw new Error(`Missing '${tag}'`);\n  }\n};\nvar parseSiweMessage = (inputString) => {\n  const lines = inputString.split(\"\\n\")[Symbol.iterator]();\n  const domain = tagged(lines.next()?.value, PREAMBLE);\n  const address = lines.next()?.value;\n  lines.next();\n  const nextValue = lines.next()?.value;\n  let statement;\n  if (nextValue) {\n    statement = nextValue;\n    lines.next();\n  }\n  const uri = tagged(lines.next()?.value, URI_TAG);\n  const version = tagged(lines.next()?.value, VERSION_TAG);\n  const chain_id = tagged(lines.next()?.value, CHAIN_TAG);\n  const nonce = tagged(lines.next()?.value, NONCE_TAG);\n  const issued_at = tagged(lines.next()?.value, IAT_TAG);\n  let expiration_time, not_before, request_id;\n  for (let line of lines) {\n    if (line.startsWith(EXP_TAG)) {\n      expiration_time = tagged(line, EXP_TAG);\n    } else if (line.startsWith(NBF_TAG)) {\n      not_before = tagged(line, NBF_TAG);\n    } else if (line.startsWith(RID_TAG)) {\n      request_id = tagged(line, RID_TAG);\n    }\n  }\n  if (lines.next().done === false) {\n    throw new Error(\"Extra lines in the input\");\n  }\n  const siweMessageData = {\n    domain,\n    address,\n    statement,\n    uri,\n    version,\n    chain_id,\n    nonce,\n    issued_at,\n    expiration_time,\n    not_before,\n    request_id\n  };\n  return siweMessageData;\n};\nvar generateSiweMessage = (siweMessageData) => {\n  let siweMessage = \"\";\n  if (siweMessageData.scheme) {\n    siweMessage += `${siweMessageData.scheme}://${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  } else {\n    siweMessage += `${siweMessageData.domain} wants you to sign in with your Ethereum account:\n`;\n  }\n  if (siweMessageData.address) {\n    siweMessage += `${siweMessageData.address}\n`;\n  } else {\n    siweMessage += \"{address}\\n\";\n  }\n  siweMessage += \"\\n\";\n  if (siweMessageData.statement) {\n    siweMessage += `${siweMessageData.statement}\n`;\n  }\n  siweMessage += \"\\n\";\n  siweMessage += `URI: ${siweMessageData.uri}\n`;\n  siweMessage += `Version: ${siweMessageData.version}\n`;\n  siweMessage += `Chain ID: ${siweMessageData.chain_id}\n`;\n  siweMessage += `Nonce: ${siweMessageData.nonce}\n`;\n  siweMessage += `Issued At: ${siweMessageData.issued_at}\n`;\n  if (siweMessageData.expiration_time) {\n    siweMessage += `Expiration Time: ${siweMessageData.expiration_time}\n`;\n  }\n  if (siweMessageData.not_before) {\n    siweMessage += `Not Before: ${siweMessageData.not_before}\n`;\n  }\n  if (siweMessageData.request_id) {\n    siweMessage += `Request ID: ${siweMessageData.request_id}\n`;\n  }\n  return siweMessage;\n};\nvar SAFE_CONTRACT_ABI = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"owner\",\n        type: \"address\"\n      }\n    ],\n    name: \"isOwner\",\n    outputs: [\n      {\n        internalType: \"bool\",\n        name: \"\",\n        type: \"bool\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar verifySiweMessage = async (payload, nonce, statement, requestId, userProvider) => {\n  if (typeof window !== \"undefined\") {\n    throw new Error(\"Verify can only be called in the backend\");\n  }\n  const { message, signature, address } = payload;\n  const siweMessageData = parseSiweMessage(message);\n  if (siweMessageData.expiration_time) {\n    const expirationTime = new Date(siweMessageData.expiration_time);\n    if (expirationTime < /* @__PURE__ */ new Date()) {\n      throw new Error(\"Expired message\");\n    }\n  }\n  if (siweMessageData.not_before) {\n    const notBefore = new Date(siweMessageData.not_before);\n    if (notBefore > /* @__PURE__ */ new Date()) {\n      throw new Error(\"Not Before time has not passed\");\n    }\n  }\n  if (nonce && siweMessageData.nonce !== nonce) {\n    throw new Error(\n      `Nonce mismatch. Got: ${siweMessageData.nonce}, Expected: ${nonce}`\n    );\n  }\n  if (statement && siweMessageData.statement !== statement) {\n    throw new Error(\n      `Statement mismatch. Got: ${siweMessageData.statement}, Expected: ${statement}`\n    );\n  }\n  if (requestId && siweMessageData.request_id !== requestId) {\n    throw new Error(\n      `Request ID mismatch. Got: ${siweMessageData.request_id}, Expected: ${requestId}`\n    );\n  }\n  let provider = userProvider || (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({ chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain, transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)() });\n  const signedMessage = `${ERC_191_PREFIX}${message.length}${message}`;\n  const hashedMessage = (0,viem__WEBPACK_IMPORTED_MODULE_7__.hashMessage)(signedMessage);\n  const contract = (0,viem__WEBPACK_IMPORTED_MODULE_8__.getContract)({\n    address,\n    abi: SAFE_CONTRACT_ABI,\n    client: provider\n  });\n  try {\n    const recoveredAddress = await (0,viem__WEBPACK_IMPORTED_MODULE_9__.recoverAddress)({\n      hash: hashedMessage,\n      signature: `0x${signature}`\n    });\n    const isOwner = await contract.read.isOwner([recoveredAddress]);\n    if (!isOwner) {\n      throw new Error(\"Signature verification failed, invalid owner\");\n    }\n  } catch (error) {\n    throw new Error(\"Signature verification failed\");\n  }\n  return { isValid: true, siweMessageData };\n};\n\n// helpers/siwe/validate-wallet-auth-command-input.ts\nvar validateWalletAuthCommandInput = (params) => {\n  if (!params.nonce) {\n    return { valid: false, message: \"'nonce' is required\" };\n  }\n  if (params.nonce.length < 8) {\n    return { valid: false, message: \"'nonce' must be at least 8 characters\" };\n  }\n  if (params.statement && params.statement.includes(\"\\n\")) {\n    return { valid: false, message: \"'statement' must not contain newlines\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) < /* @__PURE__ */ new Date()) {\n    return { valid: false, message: \"'expirationTime' must be in the future\" };\n  }\n  if (params.expirationTime && new Date(params.expirationTime) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'expirationTime' must be within 7 days\" };\n  }\n  if (params.notBefore && new Date(params.notBefore) > new Date(Date.now() + 7 * 24 * 60 * 60 * 1e3)) {\n    return { valid: false, message: \"'notBefore' must be within 7 days\" };\n  }\n  return { valid: true };\n};\n\n// helpers/transaction/validate-payload.ts\nvar isValidHex = (str) => {\n  return /^0x[0-9A-Fa-f]+$/.test(str);\n};\nvar processPayload = (payload) => {\n  if (typeof payload === \"boolean\" || typeof payload === \"string\" || payload === null || payload === void 0) {\n    return payload;\n  }\n  if (typeof payload === \"number\" || typeof payload === \"bigint\") {\n    return String(payload);\n  }\n  if (Array.isArray(payload)) {\n    return payload.map((value) => processPayload(value));\n  }\n  if (typeof payload === \"object\") {\n    const result = { ...payload };\n    if (\"value\" in result && result.value !== void 0) {\n      if (typeof result.value !== \"string\") {\n        result.value = String(result.value);\n      }\n      if (!isValidHex(result.value)) {\n        console.error(\n          \"Transaction value must be a valid hex string\",\n          result.value\n        );\n        throw new Error(\n          `Transaction value must be a valid hex string: ${result.value}`\n        );\n      }\n    }\n    for (const key in result) {\n      if (Object.prototype.hasOwnProperty.call(result, key)) {\n        result[key] = processPayload(result[key]);\n      }\n    }\n    return result;\n  }\n  return payload;\n};\nvar validateSendTransactionPayload = (payload) => {\n  return processPayload(payload);\n};\n\n// helpers/usernames/index.ts\nvar getUserProfile = async (address) => {\n  const res = await fetch(\"https://usernames.worldcoin.org/api/v1/query\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      addresses: [address]\n    })\n  });\n  const usernames = await res.json();\n  return usernames?.[0] ?? { username: null, profilePictureUrl: null };\n};\n\n// types/commands.ts\nvar Command = /* @__PURE__ */ ((Command2) => {\n  Command2[\"Verify\"] = \"verify\";\n  Command2[\"Pay\"] = \"pay\";\n  Command2[\"WalletAuth\"] = \"wallet-auth\";\n  Command2[\"SendTransaction\"] = \"send-transaction\";\n  Command2[\"SignMessage\"] = \"sign-message\";\n  Command2[\"SignTypedData\"] = \"sign-typed-data\";\n  Command2[\"ShareContacts\"] = \"share-contacts\";\n  Command2[\"RequestPermission\"] = \"request-permission\";\n  Command2[\"GetPermissions\"] = \"get-permissions\";\n  Command2[\"SendHapticFeedback\"] = \"send-haptic-feedback\";\n  return Command2;\n})(Command || {});\nvar Permission = /* @__PURE__ */ ((Permission2) => {\n  Permission2[\"Notifications\"] = \"notifications\";\n  Permission2[\"Contacts\"] = \"contacts\";\n  return Permission2;\n})(Permission || {});\n\n// types/errors.ts\n\n\nvar VerificationErrorMessage = {\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.VerificationRejected]: \"You've cancelled the request in World App.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MaxVerificationsReached]: \"You have already verified the maximum number of times for this action.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.CredentialUnavailable]: \"It seems you do not have the verification level required by this app.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.MalformedRequest]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InvalidNetwork]: \"Invalid network. If you are the app owner, visit docs.worldcoin.org/test for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofFailed]: \"There was an issue fetching your credential. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.InclusionProofPending]: \"Your identity is still being registered. Please wait a few minutes and try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.UnexpectedResponse]: \"Unexpected response from your wallet. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.FailedByHostApp]: \"Verification failed by the app. Please contact the app owner for details.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.GenericError]: \"Something unexpected went wrong. Please try again.\",\n  [_worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.AppErrorCodes.ConnectionFailed]: \"Connection to your wallet failed. Please try again.\"\n};\nvar PaymentErrorCodes = /* @__PURE__ */ ((PaymentErrorCodes2) => {\n  PaymentErrorCodes2[\"InputError\"] = \"input_error\";\n  PaymentErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  PaymentErrorCodes2[\"PaymentRejected\"] = \"payment_rejected\";\n  PaymentErrorCodes2[\"InvalidReceiver\"] = \"invalid_receiver\";\n  PaymentErrorCodes2[\"InsufficientBalance\"] = \"insufficient_balance\";\n  PaymentErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  PaymentErrorCodes2[\"GenericError\"] = \"generic_error\";\n  PaymentErrorCodes2[\"UserBlocked\"] = \"user_blocked\";\n  return PaymentErrorCodes2;\n})(PaymentErrorCodes || {});\nvar PaymentErrorMessage = {\n  [\"input_error\" /* InputError */]: \"There was a problem with this request. Please try again or contact the app owner.\",\n  [\"user_rejected\" /* UserRejected */]: \"You have cancelled the payment in World App.\",\n  [\"payment_rejected\" /* PaymentRejected */]: \"You've cancelled the payment in World App.\",\n  [\"invalid_receiver\" /* InvalidReceiver */]: \"The receiver address is invalid. Please contact the app owner.\",\n  [\"insufficient_balance\" /* InsufficientBalance */]: \"You do not have enough balance to complete this transaction.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"user_blocked\" /* UserBlocked */]: \"User's region is blocked from making payments.\"\n};\nvar PaymentValidationErrors = /* @__PURE__ */ ((PaymentValidationErrors2) => {\n  PaymentValidationErrors2[\"MalformedRequest\"] = \"There was a problem with this request. Please try again or contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidTokenAddress\"] = \"The token address is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"InvalidAppId\"] = \"The app ID is invalid. Please contact the app owner.\";\n  PaymentValidationErrors2[\"DuplicateReference\"] = \"This reference ID already exists please generate a new one and try again.\";\n  return PaymentValidationErrors2;\n})(PaymentValidationErrors || {});\nvar WalletAuthErrorCodes = /* @__PURE__ */ ((WalletAuthErrorCodes2) => {\n  WalletAuthErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  WalletAuthErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  WalletAuthErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return WalletAuthErrorCodes2;\n})(WalletAuthErrorCodes || {});\nvar WalletAuthErrorMessage = {\n  [\"malformed_request\" /* MalformedRequest */]: \"Provided parameters in the request are invalid.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SendTransactionErrorCodes = /* @__PURE__ */ ((SendTransactionErrorCodes2) => {\n  SendTransactionErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SendTransactionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SendTransactionErrorCodes2[\"InputError\"] = \"input_error\";\n  SendTransactionErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SendTransactionErrorCodes2[\"TransactionFailed\"] = \"transaction_failed\";\n  SendTransactionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendTransactionErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SendTransactionErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SendTransactionErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  SendTransactionErrorCodes2[\"DailyTxLimitReached\"] = \"daily_tx_limit_reached\";\n  SendTransactionErrorCodes2[\"PermittedAmountExceedsSlippage\"] = \"permitted_amount_exceeds_slippage\";\n  SendTransactionErrorCodes2[\"PermittedAmountNotFound\"] = \"permitted_amount_not_found\";\n  return SendTransactionErrorCodes2;\n})(SendTransactionErrorCodes || {});\nvar SendTransactionErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"transaction_failed\" /* TransactionFailed */]: \"The transaction failed. Please try again later.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\",\n  [\"daily_tx_limit_reached\" /* DailyTxLimitReached */]: \"Daily transaction limit reached. Max 100 transactions per day. Wait until the next day.\",\n  [\"permitted_amount_exceeds_slippage\" /* PermittedAmountExceedsSlippage */]: \"Permitted amount exceeds slippage. You must spend at least 90% of the permitted amount.\",\n  [\"permitted_amount_not_found\" /* PermittedAmountNotFound */]: \"Permitted amount not found in permit2 payload.\"\n};\nvar SignMessageErrorCodes = /* @__PURE__ */ ((SignMessageErrorCodes2) => {\n  SignMessageErrorCodes2[\"InvalidMessage\"] = \"invalid_message\";\n  SignMessageErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignMessageErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return SignMessageErrorCodes2;\n})(SignMessageErrorCodes || {});\nvar SignMessageErrorMessage = {\n  [\"invalid_message\" /* InvalidMessage */]: \"Invalid message requested\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar SignTypedDataErrorCodes = /* @__PURE__ */ ((SignTypedDataErrorCodes2) => {\n  SignTypedDataErrorCodes2[\"InvalidOperation\"] = \"invalid_operation\";\n  SignTypedDataErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  SignTypedDataErrorCodes2[\"InputError\"] = \"input_error\";\n  SignTypedDataErrorCodes2[\"SimulationFailed\"] = \"simulation_failed\";\n  SignTypedDataErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SignTypedDataErrorCodes2[\"DisallowedOperation\"] = \"disallowed_operation\";\n  SignTypedDataErrorCodes2[\"InvalidContract\"] = \"invalid_contract\";\n  SignTypedDataErrorCodes2[\"MaliciousOperation\"] = \"malicious_operation\";\n  return SignTypedDataErrorCodes2;\n})(SignTypedDataErrorCodes || {});\nvar SignTypedDataErrorMessage = {\n  [\"invalid_operation\" /* InvalidOperation */]: \"Transaction included an operation that was invalid\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"input_error\" /* InputError */]: \"Invalid payload.\",\n  [\"simulation_failed\" /* SimulationFailed */]: \"The transaction simulation failed.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\",\n  [\"disallowed_operation\" /* DisallowedOperation */]: \"The operation requested is not allowed. Please refer to the docs.\",\n  [\"invalid_contract\" /* InvalidContract */]: \"The contract address is not allowed for your application. Please check your developer portal configurations\",\n  [\"malicious_operation\" /* MaliciousOperation */]: \"The operation requested is considered malicious.\"\n};\nvar MiniKitInstallErrorCodes = /* @__PURE__ */ ((MiniKitInstallErrorCodes2) => {\n  MiniKitInstallErrorCodes2[\"Unknown\"] = \"unknown\";\n  MiniKitInstallErrorCodes2[\"AlreadyInstalled\"] = \"already_installed\";\n  MiniKitInstallErrorCodes2[\"OutsideOfWorldApp\"] = \"outside_of_worldapp\";\n  MiniKitInstallErrorCodes2[\"NotOnClient\"] = \"not_on_client\";\n  MiniKitInstallErrorCodes2[\"AppOutOfDate\"] = \"app_out_of_date\";\n  return MiniKitInstallErrorCodes2;\n})(MiniKitInstallErrorCodes || {});\nvar MiniKitInstallErrorMessage = {\n  [\"unknown\" /* Unknown */]: \"Failed to install MiniKit.\",\n  [\"already_installed\" /* AlreadyInstalled */]: \"MiniKit is already installed.\",\n  [\"outside_of_worldapp\" /* OutsideOfWorldApp */]: \"MiniApp launched outside of WorldApp.\",\n  [\"not_on_client\" /* NotOnClient */]: \"Window object is not available.\",\n  [\"app_out_of_date\" /* AppOutOfDate */]: \"WorldApp is out of date. Please update the app.\"\n};\nvar ShareContactsErrorCodes = /* @__PURE__ */ ((ShareContactsErrorCodes2) => {\n  ShareContactsErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  ShareContactsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return ShareContactsErrorCodes2;\n})(ShareContactsErrorCodes || {});\nvar ShareContactsErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\",\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\"\n};\nvar RequestPermissionErrorCodes = /* @__PURE__ */ ((RequestPermissionErrorCodes2) => {\n  RequestPermissionErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  RequestPermissionErrorCodes2[\"GenericError\"] = \"generic_error\";\n  RequestPermissionErrorCodes2[\"AlreadyRequested\"] = \"already_requested\";\n  RequestPermissionErrorCodes2[\"PermissionDisabled\"] = \"permission_disabled\";\n  RequestPermissionErrorCodes2[\"AlreadyGranted\"] = \"already_granted\";\n  RequestPermissionErrorCodes2[\"UnsupportedPermission\"] = \"unsupported_permission\";\n  return RequestPermissionErrorCodes2;\n})(RequestPermissionErrorCodes || {});\nvar RequestPermissionErrorMessage = {\n  [\"user_rejected\" /* UserRejected */]: \"User declined sharing contacts\",\n  [\"generic_error\" /* GenericError */]: \"Request failed for unknown reason.\",\n  [\"already_requested\" /* AlreadyRequested */]: \"User has already declined turning on notifications once\",\n  [\"permission_disabled\" /* PermissionDisabled */]: \"User does not have this permission enabled in World App\",\n  [\"already_granted\" /* AlreadyGranted */]: \"If the user has already granted this mini app permission\",\n  [\"unsupported_permission\" /* UnsupportedPermission */]: \"The permission requested is not supported by this mini app\"\n};\nvar GetPermissionsErrorCodes = /* @__PURE__ */ ((GetPermissionsErrorCodes2) => {\n  GetPermissionsErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return GetPermissionsErrorCodes2;\n})(GetPermissionsErrorCodes || {});\nvar GetPermissionsErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong. Please try again.\"\n};\nvar SendHapticFeedbackErrorCodes = /* @__PURE__ */ ((SendHapticFeedbackErrorCodes2) => {\n  SendHapticFeedbackErrorCodes2[\"GenericError\"] = \"generic_error\";\n  SendHapticFeedbackErrorCodes2[\"UserRejected\"] = \"user_rejected\";\n  return SendHapticFeedbackErrorCodes2;\n})(SendHapticFeedbackErrorCodes || {});\nvar SendHapticFeedbackErrorMessage = {\n  [\"generic_error\" /* GenericError */]: \"Something unexpected went wrong.\",\n  [\"user_rejected\" /* UserRejected */]: \"User rejected the request.\"\n};\n\n// helpers/send-webview-event.ts\nvar sendWebviewEvent = (payload) => {\n  if (window.webkit) {\n    window.webkit?.messageHandlers?.minikit?.postMessage?.(payload);\n  } else if (window.Android) {\n    window.Android.postMessage?.(JSON.stringify(payload));\n  }\n};\n\n// types/responses.ts\nvar ResponseEvent = /* @__PURE__ */ ((ResponseEvent2) => {\n  ResponseEvent2[\"MiniAppVerifyAction\"] = \"miniapp-verify-action\";\n  ResponseEvent2[\"MiniAppPayment\"] = \"miniapp-payment\";\n  ResponseEvent2[\"MiniAppWalletAuth\"] = \"miniapp-wallet-auth\";\n  ResponseEvent2[\"MiniAppSendTransaction\"] = \"miniapp-send-transaction\";\n  ResponseEvent2[\"MiniAppSignMessage\"] = \"miniapp-sign-message\";\n  ResponseEvent2[\"MiniAppSignTypedData\"] = \"miniapp-sign-typed-data\";\n  ResponseEvent2[\"MiniAppShareContacts\"] = \"miniapp-share-contacts\";\n  ResponseEvent2[\"MiniAppRequestPermission\"] = \"miniapp-request-permission\";\n  ResponseEvent2[\"MiniAppGetPermissions\"] = \"miniapp-get-permissions\";\n  ResponseEvent2[\"MiniAppSendHapticFeedback\"] = \"miniapp-send-haptic-feedback\";\n  return ResponseEvent2;\n})(ResponseEvent || {});\n\n// minikit.ts\nvar sendMiniKitEvent = (payload) => {\n  sendWebviewEvent(payload);\n};\nvar _MiniKit = class _MiniKit {\n  static sendInit() {\n    sendWebviewEvent({\n      command: \"init\",\n      payload: { version: this.MINIKIT_VERSION }\n    });\n  }\n  static subscribe(event, handler) {\n    if (event === \"miniapp-wallet-auth\" /* MiniAppWalletAuth */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"success\") {\n          _MiniKit.walletAddress = payload.address;\n          _MiniKit.getUserByAddress(payload.address).then((user) => {\n            _MiniKit.user = user;\n          });\n        }\n        originalHandler(payload);\n      };\n      this.listeners[event] = wrappedHandler;\n    } else if (event === \"miniapp-verify-action\" /* MiniAppVerifyAction */) {\n      const originalHandler = handler;\n      const wrappedHandler = (payload) => {\n        if (payload.status === \"success\" && payload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          compressAndPadProof(payload.proof).then(\n            (compressedProof) => {\n              payload.proof = compressedProof;\n              originalHandler(payload);\n            }\n          );\n        } else {\n          originalHandler(payload);\n        }\n      };\n      this.listeners[event] = wrappedHandler;\n    } else {\n      this.listeners[event] = handler;\n    }\n  }\n  static unsubscribe(event) {\n    delete this.listeners[event];\n  }\n  static trigger(event, payload) {\n    if (!this.listeners[event]) {\n      console.error(`No handler for event ${event}`);\n      return;\n    }\n    this.listeners[event](payload);\n  }\n  static async awaitCommand(event, command, executor) {\n    return new Promise((resolve) => {\n      let commandPayload = null;\n      const handleAndUnsubscribe = (payload) => {\n        this.unsubscribe(event);\n        resolve({ commandPayload, finalPayload: payload });\n      };\n      this.subscribe(event, handleAndUnsubscribe);\n      commandPayload = executor();\n    });\n  }\n  static commandsValid(worldAppSupportedCommands) {\n    return Object.entries(this.miniKitCommandVersion).every(\n      ([minikitCommandName, version]) => {\n        const commandInput = worldAppSupportedCommands.find(\n          (command) => command.name === minikitCommandName\n        );\n        if (!commandInput) {\n          console.error(\n            `Command ${minikitCommandName} is not supported by the app. Try updating the app version`\n          );\n        } else {\n          _MiniKit.isCommandAvailable[minikitCommandName] = true;\n        }\n        return commandInput ? commandInput.supported_versions.includes(version) : false;\n      }\n    );\n  }\n  static install(appId) {\n    if (typeof window === \"undefined\" || Boolean(window.MiniKit)) {\n      return {\n        success: false,\n        errorCode: \"already_installed\" /* AlreadyInstalled */,\n        errorMessage: MiniKitInstallErrorMessage[\"already_installed\" /* AlreadyInstalled */]\n      };\n    }\n    if (!appId) {\n      console.warn(\"App ID not provided during install\");\n    } else {\n      _MiniKit.appId = appId;\n    }\n    if (!window.WorldApp) {\n      return {\n        success: false,\n        errorCode: \"outside_of_worldapp\" /* OutsideOfWorldApp */,\n        errorMessage: MiniKitInstallErrorMessage[\"outside_of_worldapp\" /* OutsideOfWorldApp */]\n      };\n    }\n    try {\n      window.MiniKit = _MiniKit;\n      this.sendInit();\n    } catch (error) {\n      console.error(\n        MiniKitInstallErrorMessage[\"unknown\" /* Unknown */],\n        error\n      );\n      return {\n        success: false,\n        errorCode: \"unknown\" /* Unknown */,\n        errorMessage: MiniKitInstallErrorMessage[\"unknown\" /* Unknown */]\n      };\n    }\n    if (!this.commandsValid(window.WorldApp.supported_commands)) {\n      return {\n        success: false,\n        errorCode: \"app_out_of_date\" /* AppOutOfDate */,\n        errorMessage: MiniKitInstallErrorMessage[\"app_out_of_date\" /* AppOutOfDate */]\n      };\n    }\n    return { success: true };\n  }\n  static isInstalled(debug) {\n    if (debug) console.log(\"MiniKit is alive!\");\n    const isInstalled = Boolean(window.MiniKit);\n    if (!isInstalled)\n      console.error(\n        \"MiniKit is not installed. Make sure you're running the application inside of World App\"\n      );\n    return isInstalled;\n  }\n};\n_MiniKit.MINIKIT_VERSION = 1;\n_MiniKit.miniKitCommandVersion = {\n  [\"verify\" /* Verify */]: 1,\n  [\"pay\" /* Pay */]: 1,\n  [\"wallet-auth\" /* WalletAuth */]: 1,\n  [\"send-transaction\" /* SendTransaction */]: 1,\n  [\"sign-message\" /* SignMessage */]: 1,\n  [\"sign-typed-data\" /* SignTypedData */]: 1,\n  [\"share-contacts\" /* ShareContacts */]: 1,\n  [\"request-permission\" /* RequestPermission */]: 1,\n  [\"get-permissions\" /* GetPermissions */]: 1,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: 1\n};\n_MiniKit.isCommandAvailable = {\n  [\"verify\" /* Verify */]: false,\n  [\"pay\" /* Pay */]: false,\n  [\"wallet-auth\" /* WalletAuth */]: false,\n  [\"send-transaction\" /* SendTransaction */]: false,\n  [\"sign-message\" /* SignMessage */]: false,\n  [\"sign-typed-data\" /* SignTypedData */]: false,\n  [\"share-contacts\" /* ShareContacts */]: false,\n  [\"request-permission\" /* RequestPermission */]: false,\n  [\"get-permissions\" /* GetPermissions */]: false,\n  [\"send-haptic-feedback\" /* SendHapticFeedback */]: false\n};\n_MiniKit.listeners = {\n  [\"miniapp-verify-action\" /* MiniAppVerifyAction */]: () => {\n  },\n  [\"miniapp-payment\" /* MiniAppPayment */]: () => {\n  },\n  [\"miniapp-wallet-auth\" /* MiniAppWalletAuth */]: () => {\n  },\n  [\"miniapp-send-transaction\" /* MiniAppSendTransaction */]: () => {\n  },\n  [\"miniapp-sign-message\" /* MiniAppSignMessage */]: () => {\n  },\n  [\"miniapp-sign-typed-data\" /* MiniAppSignTypedData */]: () => {\n  },\n  [\"miniapp-share-contacts\" /* MiniAppShareContacts */]: () => {\n  },\n  [\"miniapp-request-permission\" /* MiniAppRequestPermission */]: () => {\n  },\n  [\"miniapp-get-permissions\" /* MiniAppGetPermissions */]: () => {\n  },\n  [\"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */]: () => {\n  }\n};\n_MiniKit.appId = null;\n/**\n * @deprecated you should use MiniKit.user.walletAddress instead\n */\n_MiniKit.walletAddress = null;\n_MiniKit.user = null;\n_MiniKit.getUserByAddress = async (address) => {\n  const userProfile = await getUserProfile(address);\n  return {\n    walletAddress: address,\n    username: userProfile.username,\n    profilePictureUrl: userProfile.profilePictureUrl\n  };\n};\n_MiniKit.commands = {\n  verify: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"verify\" /* Verify */]) {\n      console.error(\n        \"'verify' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n    const eventPayload = {\n      action: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__.encodeAction)(payload.action),\n      signal: (0,_worldcoin_idkit_core_hashing__WEBPACK_IMPORTED_MODULE_1__.generateSignal)(payload.signal).digest,\n      verification_level: payload.verification_level || _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb,\n      timestamp\n    };\n    sendMiniKitEvent({\n      command: \"verify\" /* Verify */,\n      version: _MiniKit.miniKitCommandVersion[\"verify\" /* Verify */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  pay: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"pay\" /* Pay */]) {\n      console.error(\n        \"'pay' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    if (!validatePaymentPayload(payload)) {\n      return null;\n    }\n    const network = \"worldchain\" /* WorldChain */;\n    const eventPayload = {\n      ...payload,\n      network\n    };\n    sendMiniKitEvent({\n      command: \"pay\" /* Pay */,\n      version: _MiniKit.miniKitCommandVersion[\"pay\" /* Pay */],\n      payload: eventPayload\n    });\n    return eventPayload;\n  },\n  walletAuth: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"wallet-auth\" /* WalletAuth */]) {\n      console.error(\n        \"'walletAuth' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validationResult = validateWalletAuthCommandInput(payload);\n    if (!validationResult.valid) {\n      console.error(\n        \"Failed to validate wallet auth input:\\n\\n -->\",\n        validationResult.message\n      );\n      return null;\n    }\n    let protocol = null;\n    try {\n      const currentUrl = new URL(window.location.href);\n      protocol = currentUrl.protocol.split(\":\")[0];\n    } catch (error) {\n      console.error(\"Failed to get current URL\", error);\n      return null;\n    }\n    const siweMessage = generateSiweMessage({\n      scheme: protocol,\n      domain: window.location.host,\n      statement: payload.statement ?? void 0,\n      uri: window.location.href,\n      version: 1,\n      chain_id: 480,\n      nonce: payload.nonce,\n      issued_at: (/* @__PURE__ */ new Date()).toISOString(),\n      expiration_time: payload.expirationTime?.toISOString() ?? void 0,\n      not_before: payload.notBefore?.toISOString() ?? void 0,\n      request_id: payload.requestId ?? void 0\n    });\n    const walletAuthPayload = { siweMessage };\n    sendMiniKitEvent({\n      command: \"wallet-auth\" /* WalletAuth */,\n      version: _MiniKit.miniKitCommandVersion[\"wallet-auth\" /* WalletAuth */],\n      payload: walletAuthPayload\n    });\n    return walletAuthPayload;\n  },\n  sendTransaction: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-transaction\" /* SendTransaction */]) {\n      console.error(\n        \"'sendTransaction' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    const validatedPayload = validateSendTransactionPayload(payload);\n    sendMiniKitEvent({\n      command: \"send-transaction\" /* SendTransaction */,\n      version: _MiniKit.miniKitCommandVersion[\"send-transaction\" /* SendTransaction */],\n      payload: validatedPayload\n    });\n    return validatedPayload;\n  },\n  signMessage: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-message\" /* SignMessage */]) {\n      console.error(\n        \"'signMessage' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-message\" /* SignMessage */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-message\" /* SignMessage */],\n      payload\n    });\n    return payload;\n  },\n  signTypedData: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'signTypedData' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"sign-typed-data\" /* SignTypedData */,\n      version: _MiniKit.miniKitCommandVersion[\"sign-typed-data\" /* SignTypedData */],\n      payload\n    });\n    return payload;\n  },\n  shareContacts: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"sign-typed-data\" /* SignTypedData */]) {\n      console.error(\n        \"'shareContacts' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"share-contacts\" /* ShareContacts */,\n      version: _MiniKit.miniKitCommandVersion[\"share-contacts\" /* ShareContacts */],\n      payload\n    });\n    return payload;\n  },\n  requestPermission: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"request-permission\" /* RequestPermission */]) {\n      console.error(\n        \"'requestPermission' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"request-permission\" /* RequestPermission */,\n      version: _MiniKit.miniKitCommandVersion[\"request-permission\" /* RequestPermission */],\n      payload\n    });\n    return payload;\n  },\n  getPermissions: () => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"get-permissions\" /* GetPermissions */]) {\n      console.error(\n        \"'getPermissions' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"get-permissions\" /* GetPermissions */,\n      version: _MiniKit.miniKitCommandVersion[\"get-permissions\" /* GetPermissions */],\n      payload: {}\n    });\n    return {\n      status: \"sent\"\n    };\n  },\n  sendHapticFeedback: (payload) => {\n    if (typeof window === \"undefined\" || !_MiniKit.isCommandAvailable[\"send-haptic-feedback\" /* SendHapticFeedback */]) {\n      console.error(\n        \"'sendHapticFeedback' command is unavailable. Check MiniKit.install() or update the app version\"\n      );\n      return null;\n    }\n    sendMiniKitEvent({\n      command: \"send-haptic-feedback\" /* SendHapticFeedback */,\n      version: _MiniKit.miniKitCommandVersion[\"send-haptic-feedback\" /* SendHapticFeedback */],\n      payload\n    });\n    return payload;\n  }\n};\n/**\n * This object contains async versions of all the commands.\n * Instead of using event listeners, you can just `await` these.\n *\n * They return a standardized object\n *\n * commandPayload - object returned by the command function\n *\n * finalPayload - object returned by the event listener, or in other words, WorldApp response\n */\n_MiniKit.commandsAsync = {\n  verify: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-verify-action\" /* MiniAppVerifyAction */,\n          \"verify\" /* Verify */,\n          () => _MiniKit.commands.verify(payload)\n        );\n        if (response.finalPayload.status === \"success\" && response.finalPayload.verification_level === _worldcoin_idkit_core__WEBPACK_IMPORTED_MODULE_0__.VerificationLevel.Orb) {\n          response.finalPayload.proof = await compressAndPadProof(\n            response.finalPayload.proof\n          );\n        }\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  pay: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-payment\" /* MiniAppPayment */,\n          \"pay\" /* Pay */,\n          () => _MiniKit.commands.pay(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  walletAuth: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-wallet-auth\" /* MiniAppWalletAuth */,\n          \"wallet-auth\" /* WalletAuth */,\n          () => _MiniKit.commands.walletAuth(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendTransaction: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-transaction\" /* MiniAppSendTransaction */,\n          \"send-transaction\" /* SendTransaction */,\n          () => _MiniKit.commands.sendTransaction(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signMessage: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-message\" /* MiniAppSignMessage */,\n          \"sign-message\" /* SignMessage */,\n          () => _MiniKit.commands.signMessage(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  signTypedData: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-sign-typed-data\" /* MiniAppSignTypedData */,\n          \"sign-typed-data\" /* SignTypedData */,\n          () => _MiniKit.commands.signTypedData(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  shareContacts: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-share-contacts\" /* MiniAppShareContacts */,\n          \"share-contacts\" /* ShareContacts */,\n          () => _MiniKit.commands.shareContacts(payload)\n        );\n        return resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  requestPermission: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-request-permission\" /* MiniAppRequestPermission */,\n          \"request-permission\" /* RequestPermission */,\n          () => _MiniKit.commands.requestPermission(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  getPermissions: async () => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-get-permissions\" /* MiniAppGetPermissions */,\n          \"get-permissions\" /* GetPermissions */,\n          () => _MiniKit.commands.getPermissions()\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  },\n  sendHapticFeedback: async (payload) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const response = await _MiniKit.awaitCommand(\n          \"miniapp-send-haptic-feedback\" /* MiniAppSendHapticFeedback */,\n          \"send-haptic-feedback\" /* SendHapticFeedback */,\n          () => _MiniKit.commands.sendHapticFeedback(payload)\n        );\n        resolve(response);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n};\nvar MiniKit = _MiniKit;\n\n// index.ts\n\n\n\n// helpers/address-book/index.ts\n\n\nvar worldIdAddressBookContractAddress = \"0x57b930D551e677CC36e2fA036Ae2fe8FdaE0330D\";\nvar addressVerifiedUntilAbi = [\n  {\n    inputs: [\n      {\n        internalType: \"address\",\n        name: \"\",\n        type: \"address\"\n      }\n    ],\n    name: \"addressVerifiedUntil\",\n    outputs: [\n      {\n        internalType: \"uint256\",\n        name: \"\",\n        type: \"uint256\"\n      }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n];\nvar getIsUserVerified = async (walletAddress, rpcUrl) => {\n  const publicClient = (0,viem__WEBPACK_IMPORTED_MODULE_2__.createPublicClient)({\n    chain: viem_chains__WEBPACK_IMPORTED_MODULE_3__.worldchain,\n    transport: (0,viem__WEBPACK_IMPORTED_MODULE_4__.http)(\n      rpcUrl || \"https://worldchain-mainnet.g.alchemy.com/public\"\n    )\n  });\n  try {\n    const verifiedUntilResponse = await publicClient.readContract({\n      address: worldIdAddressBookContractAddress,\n      abi: addressVerifiedUntilAbi,\n      functionName: \"addressVerifiedUntil\",\n      args: [walletAddress]\n    });\n    const verifiedUntil = Number(verifiedUntilResponse.toString());\n    if (!Number.isFinite(verifiedUntil)) {\n      console.warn(\"Invalid verifiedUntil value:\", verifiedUntil);\n      return false;\n    }\n    const currentTime = Math.floor(Date.now() / 1e3);\n    return verifiedUntil > currentTime;\n  } catch (error) {\n    console.error(\"Error verifying user:\", error);\n    return false;\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LWpzL2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQzBEO0FBQ21COztBQUU3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxjQUFjO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZUFBZTs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsTUFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxPQUFPO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBTWM7QUFDMkI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHdEQUFrQjtBQUMzQyxhQUFhLG1EQUFVO0FBQ3ZCLGlCQUFpQiwwQ0FBSTtBQUNyQjtBQUNBO0FBQ0EsS0FBSztBQUNMLHlCQUF5Qix5REFBbUI7QUFDNUMsU0FBUyxvQkFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxXQUFXLHlEQUFtQixJQUFJLG9CQUFvQjtBQUN0RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQU9jO0FBQzBDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGdDQUFnQyxJQUFJO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1QkFBdUIsS0FBSyx3QkFBd0I7QUFDMUU7QUFDQSxJQUFJO0FBQ0osc0JBQXNCLHdCQUF3QjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxJQUFJO0FBQ0oscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsOEJBQThCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzQkFBc0IsY0FBYyxNQUFNO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDBCQUEwQixjQUFjLFVBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkJBQTJCLGNBQWMsVUFBVTtBQUN0RjtBQUNBO0FBQ0EsaUNBQWlDLHdEQUFtQixHQUFHLE9BQU8sbURBQVcsYUFBYSwwQ0FBSyxJQUFJO0FBQy9GLDJCQUEyQixlQUFlLEVBQUUsZUFBZSxFQUFFLFFBQVE7QUFDckUsd0JBQXdCLGlEQUFXO0FBQ25DLG1CQUFtQixpREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxtQ0FBbUMsb0RBQWM7QUFDakQ7QUFDQSxzQkFBc0IsVUFBVTtBQUNoQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSw2QkFBNkI7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGVBQWU7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtCQUFrQjs7QUFFbkI7QUFDc0Q7QUFDa0I7QUFDeEU7QUFDQSxHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEIsR0FBRyxnRUFBYTtBQUNoQixHQUFHLGdFQUFhO0FBQ2hCLEdBQUcsZ0VBQWE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywrQkFBK0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxpQ0FBaUM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDZCQUE2QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLCtCQUErQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsK0JBQStCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsbUNBQW1DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0NBQW9DO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMscUJBQXFCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLDJFQUEyRSxvRUFBaUI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsTUFBTTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUNBQXVDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyRUFBWTtBQUMxQixjQUFjLDZFQUFjO0FBQzVCLHdEQUF3RCxvRUFBaUI7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RyxvRUFBaUI7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRjtBQUd6Qzs7QUFFdkM7QUFDZ0Y7QUFDeEI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBbUI7QUFDMUMsV0FBVyxtREFBVztBQUN0QixlQUFlLDBDQUFLO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBdUNFIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL21pbmlraXQtanMvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbWluaWtpdC50c1xuaW1wb3J0IHsgVmVyaWZpY2F0aW9uTGV2ZWwgfSBmcm9tIFwiQHdvcmxkY29pbi9pZGtpdC1jb3JlXCI7XG5pbXBvcnQgeyBlbmNvZGVBY3Rpb24sIGdlbmVyYXRlU2lnbmFsIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZS9oYXNoaW5nXCI7XG5cbi8vIHR5cGVzL3BheW1lbnQudHNcbnZhciBUb2tlbnMgPSAvKiBAX19QVVJFX18gKi8gKChUb2tlbnMzKSA9PiB7XG4gIFRva2VuczNbXCJVU0RDRVwiXSA9IFwiVVNEQ0VcIjtcbiAgVG9rZW5zM1tcIldMRFwiXSA9IFwiV0xEXCI7XG4gIHJldHVybiBUb2tlbnMzO1xufSkoVG9rZW5zIHx8IHt9KTtcbnZhciBUb2tlbkRlY2ltYWxzID0ge1xuICBbXCJVU0RDRVwiIC8qIFVTRENFICovXTogNixcbiAgW1wiV0xEXCIgLyogV0xEICovXTogMThcbn07XG52YXIgTmV0d29yayA9IC8qIEBfX1BVUkVfXyAqLyAoKE5ldHdvcmsyKSA9PiB7XG4gIE5ldHdvcmsyW1wiT3B0aW1pc21cIl0gPSBcIm9wdGltaXNtXCI7XG4gIE5ldHdvcmsyW1wiV29ybGRDaGFpblwiXSA9IFwid29ybGRjaGFpblwiO1xuICByZXR1cm4gTmV0d29yazI7XG59KShOZXR3b3JrIHx8IHt9KTtcblxuLy8gaGVscGVycy9wYXltZW50L2NsaWVudC50c1xudmFyIHRva2VuVG9EZWNpbWFscyA9IChhbW91bnQsIHRva2VuKSA9PiB7XG4gIGNvbnN0IGRlY2ltYWxzID0gVG9rZW5EZWNpbWFsc1t0b2tlbl07XG4gIGlmIChkZWNpbWFscyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRva2VuOiAke3Rva2VufWApO1xuICB9XG4gIGNvbnN0IGZhY3RvciA9IDEwICoqIGRlY2ltYWxzO1xuICBjb25zdCByZXN1bHQgPSBhbW91bnQgKiBmYWN0b3I7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihyZXN1bHQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgcmVzdWx0aW5nIGFtb3VudCBpcyBub3QgYSB3aG9sZSBudW1iZXI6ICR7cmVzdWx0fWApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xudmFyIHZhbGlkYXRlUGF5bWVudFBheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAocGF5bG9hZC50b2tlbnMuc29tZShcbiAgICAodG9rZW4pID0+IHRva2VuLnN5bWJvbCA9PSBcIlVTRENFXCIgJiYgcGFyc2VGbG9hdCh0b2tlbi50b2tlbl9hbW91bnQpIDwgMC4xXG4gICkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVVNEQ0UgYW1vdW50IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gJDAuMVwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHBheWxvYWQucmVmZXJlbmNlLmxlbmd0aCA+IDM2KSB7XG4gICAgY29uc29sZS5lcnJvcihcIlJlZmVyZW5jZSBtdXN0IG5vdCBleGNlZWQgMzYgY2hhcmFjdGVyc1wiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkLnJlZmVyZW5jZSAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlJlZmVyZW5jZSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8gaGVscGVycy9wcm9vZi9pbmRleC50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50LFxuICBkZWNvZGVBYmlQYXJhbWV0ZXJzLFxuICBlbmNvZGVBYmlQYXJhbWV0ZXJzLFxuICBodHRwXG59IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgc2VtYXBob3JlVmVyaWZpZXJBZGRyZXNzID0gXCIweDc5ZjQ2Yjk0ZDEzNDEwOUViY2JiZGRCQWVEMEU4ODc5MDQwOUEwZTRcIjtcbnZhciBzZW1hcGhvcmVWZXJpZmllckFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwidWludDI1Nls4XVwiLFxuICAgICAgICBuYW1lOiBcInByb29mXCIsXG4gICAgICAgIHR5cGU6IFwidWludDI1Nls4XVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBuYW1lOiBcImNvbXByZXNzUHJvb2ZcIixcbiAgICBvdXRwdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJ1aW50MjU2WzRdXCIsXG4gICAgICAgIG5hbWU6IFwiY29tcHJlc3NlZFwiLFxuICAgICAgICB0eXBlOiBcInVpbnQyNTZbNF1cIlxuICAgICAgfVxuICAgIF0sXG4gICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgfVxuXTtcbnZhciBjb21wcmVzc0FuZFBhZFByb29mID0gYXN5bmMgKHByb29mLCBycGNVcmwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwdWJsaWNDbGllbnQgPSBjcmVhdGVQdWJsaWNDbGllbnQoe1xuICAgICAgY2hhaW46IHdvcmxkY2hhaW4sXG4gICAgICB0cmFuc3BvcnQ6IGh0dHAoXG4gICAgICAgIHJwY1VybCB8fCBcImh0dHBzOi8vd29ybGRjaGFpbi1tYWlubmV0LmcuYWxjaGVteS5jb20vcHVibGljXCJcbiAgICAgIClcbiAgICB9KTtcbiAgICBjb25zdCBkZWNvZGVkUHJvb2YgPSBkZWNvZGVBYmlQYXJhbWV0ZXJzKFxuICAgICAgW3sgdHlwZTogXCJ1aW50MjU2WzhdXCIgfV0sXG4gICAgICBwcm9vZlxuICAgIClbMF07XG4gICAgY29uc3QgY29tcHJlc3NlZFByb29mID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiBzZW1hcGhvcmVWZXJpZmllckFkZHJlc3MsXG4gICAgICBhYmk6IHNlbWFwaG9yZVZlcmlmaWVyQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImNvbXByZXNzUHJvb2ZcIixcbiAgICAgIGFyZ3M6IFtkZWNvZGVkUHJvb2ZdXG4gICAgfSk7XG4gICAgY29uc3QgcGFkZGVkUHJvb2YgPSBbLi4uY29tcHJlc3NlZFByb29mLCAwbiwgMG4sIDBuLCAwbl07XG4gICAgcmV0dXJuIGVuY29kZUFiaVBhcmFtZXRlcnMoW3sgdHlwZTogXCJ1aW50MjU2WzhdXCIgfV0sIFtwYWRkZWRQcm9vZl0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coXCJGYWlsZWQgdG8gY29tcHJlc3MgcHJvb2ZcIiwge1xuICAgICAgZSxcbiAgICAgIHByb29mXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb29mO1xuICB9XG59O1xuXG4vLyBoZWxwZXJzL3Npd2Uvc2l3ZS50c1xuaW1wb3J0IHtcbiAgY3JlYXRlUHVibGljQ2xpZW50IGFzIGNyZWF0ZVB1YmxpY0NsaWVudDIsXG4gIGdldENvbnRyYWN0LFxuICBoYXNoTWVzc2FnZSxcbiAgaHR0cCBhcyBodHRwMixcbiAgcmVjb3ZlckFkZHJlc3Ncbn0gZnJvbSBcInZpZW1cIjtcbmltcG9ydCB7IHdvcmxkY2hhaW4gYXMgd29ybGRjaGFpbjIgfSBmcm9tIFwidmllbS9jaGFpbnNcIjtcbnZhciBQUkVBTUJMRSA9IFwiIHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlwiO1xudmFyIFVSSV9UQUcgPSBcIlVSSTogXCI7XG52YXIgVkVSU0lPTl9UQUcgPSBcIlZlcnNpb246IFwiO1xudmFyIENIQUlOX1RBRyA9IFwiQ2hhaW4gSUQ6IFwiO1xudmFyIE5PTkNFX1RBRyA9IFwiTm9uY2U6IFwiO1xudmFyIElBVF9UQUcgPSBcIklzc3VlZCBBdDogXCI7XG52YXIgRVhQX1RBRyA9IFwiRXhwaXJhdGlvbiBUaW1lOiBcIjtcbnZhciBOQkZfVEFHID0gXCJOb3QgQmVmb3JlOiBcIjtcbnZhciBSSURfVEFHID0gXCJSZXF1ZXN0IElEOiBcIjtcbnZhciBFUkNfMTkxX1BSRUZJWCA9IFwiXHUwMDE5RXRoZXJldW0gU2lnbmVkIE1lc3NhZ2U6XFxuXCI7XG52YXIgdGFnZ2VkID0gKGxpbmUsIHRhZykgPT4ge1xuICBpZiAobGluZSAmJiBsaW5lLmluY2x1ZGVzKHRhZykpIHtcbiAgICByZXR1cm4gbGluZS5yZXBsYWNlKHRhZywgXCJcIik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nICcke3RhZ30nYCk7XG4gIH1cbn07XG52YXIgcGFyc2VTaXdlTWVzc2FnZSA9IChpbnB1dFN0cmluZykgPT4ge1xuICBjb25zdCBsaW5lcyA9IGlucHV0U3RyaW5nLnNwbGl0KFwiXFxuXCIpW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgY29uc3QgZG9tYWluID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFBSRUFNQkxFKTtcbiAgY29uc3QgYWRkcmVzcyA9IGxpbmVzLm5leHQoKT8udmFsdWU7XG4gIGxpbmVzLm5leHQoKTtcbiAgY29uc3QgbmV4dFZhbHVlID0gbGluZXMubmV4dCgpPy52YWx1ZTtcbiAgbGV0IHN0YXRlbWVudDtcbiAgaWYgKG5leHRWYWx1ZSkge1xuICAgIHN0YXRlbWVudCA9IG5leHRWYWx1ZTtcbiAgICBsaW5lcy5uZXh0KCk7XG4gIH1cbiAgY29uc3QgdXJpID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFVSSV9UQUcpO1xuICBjb25zdCB2ZXJzaW9uID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIFZFUlNJT05fVEFHKTtcbiAgY29uc3QgY2hhaW5faWQgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgQ0hBSU5fVEFHKTtcbiAgY29uc3Qgbm9uY2UgPSB0YWdnZWQobGluZXMubmV4dCgpPy52YWx1ZSwgTk9OQ0VfVEFHKTtcbiAgY29uc3QgaXNzdWVkX2F0ID0gdGFnZ2VkKGxpbmVzLm5leHQoKT8udmFsdWUsIElBVF9UQUcpO1xuICBsZXQgZXhwaXJhdGlvbl90aW1lLCBub3RfYmVmb3JlLCByZXF1ZXN0X2lkO1xuICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aChFWFBfVEFHKSkge1xuICAgICAgZXhwaXJhdGlvbl90aW1lID0gdGFnZ2VkKGxpbmUsIEVYUF9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKE5CRl9UQUcpKSB7XG4gICAgICBub3RfYmVmb3JlID0gdGFnZ2VkKGxpbmUsIE5CRl9UQUcpO1xuICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKFJJRF9UQUcpKSB7XG4gICAgICByZXF1ZXN0X2lkID0gdGFnZ2VkKGxpbmUsIFJJRF9UQUcpO1xuICAgIH1cbiAgfVxuICBpZiAobGluZXMubmV4dCgpLmRvbmUgPT09IGZhbHNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXh0cmEgbGluZXMgaW4gdGhlIGlucHV0XCIpO1xuICB9XG4gIGNvbnN0IHNpd2VNZXNzYWdlRGF0YSA9IHtcbiAgICBkb21haW4sXG4gICAgYWRkcmVzcyxcbiAgICBzdGF0ZW1lbnQsXG4gICAgdXJpLFxuICAgIHZlcnNpb24sXG4gICAgY2hhaW5faWQsXG4gICAgbm9uY2UsXG4gICAgaXNzdWVkX2F0LFxuICAgIGV4cGlyYXRpb25fdGltZSxcbiAgICBub3RfYmVmb3JlLFxuICAgIHJlcXVlc3RfaWRcbiAgfTtcbiAgcmV0dXJuIHNpd2VNZXNzYWdlRGF0YTtcbn07XG52YXIgZ2VuZXJhdGVTaXdlTWVzc2FnZSA9IChzaXdlTWVzc2FnZURhdGEpID0+IHtcbiAgbGV0IHNpd2VNZXNzYWdlID0gXCJcIjtcbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5zY2hlbWUpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuc2NoZW1lfTovLyR7c2l3ZU1lc3NhZ2VEYXRhLmRvbWFpbn0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6XG5gO1xuICB9IGVsc2Uge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OlxuYDtcbiAgfVxuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmFkZHJlc3MpIHtcbiAgICBzaXdlTWVzc2FnZSArPSBgJHtzaXdlTWVzc2FnZURhdGEuYWRkcmVzc31cbmA7XG4gIH0gZWxzZSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gXCJ7YWRkcmVzc31cXG5cIjtcbiAgfVxuICBzaXdlTWVzc2FnZSArPSBcIlxcblwiO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9XG5gO1xuICB9XG4gIHNpd2VNZXNzYWdlICs9IFwiXFxuXCI7XG4gIHNpd2VNZXNzYWdlICs9IGBVUkk6ICR7c2l3ZU1lc3NhZ2VEYXRhLnVyaX1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBWZXJzaW9uOiAke3Npd2VNZXNzYWdlRGF0YS52ZXJzaW9ufVxuYDtcbiAgc2l3ZU1lc3NhZ2UgKz0gYENoYWluIElEOiAke3Npd2VNZXNzYWdlRGF0YS5jaGFpbl9pZH1cbmA7XG4gIHNpd2VNZXNzYWdlICs9IGBOb25jZTogJHtzaXdlTWVzc2FnZURhdGEubm9uY2V9XG5gO1xuICBzaXdlTWVzc2FnZSArPSBgSXNzdWVkIEF0OiAke3Npd2VNZXNzYWdlRGF0YS5pc3N1ZWRfYXR9XG5gO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBFeHBpcmF0aW9uIFRpbWU6ICR7c2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZX1cbmA7XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgc2l3ZU1lc3NhZ2UgKz0gYE5vdCBCZWZvcmU6ICR7c2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmV9XG5gO1xuICB9XG4gIGlmIChzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCkge1xuICAgIHNpd2VNZXNzYWdlICs9IGBSZXF1ZXN0IElEOiAke3Npd2VNZXNzYWdlRGF0YS5yZXF1ZXN0X2lkfVxuYDtcbiAgfVxuICByZXR1cm4gc2l3ZU1lc3NhZ2U7XG59O1xudmFyIFNBRkVfQ09OVFJBQ1RfQUJJID0gW1xuICB7XG4gICAgaW5wdXRzOiBbXG4gICAgICB7XG4gICAgICAgIGludGVybmFsVHlwZTogXCJhZGRyZXNzXCIsXG4gICAgICAgIG5hbWU6IFwib3duZXJcIixcbiAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIG5hbWU6IFwiaXNPd25lclwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcImJvb2xcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJib29sXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgdmVyaWZ5U2l3ZU1lc3NhZ2UgPSBhc3luYyAocGF5bG9hZCwgbm9uY2UsIHN0YXRlbWVudCwgcmVxdWVzdElkLCB1c2VyUHJvdmlkZXIpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJWZXJpZnkgY2FuIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBiYWNrZW5kXCIpO1xuICB9XG4gIGNvbnN0IHsgbWVzc2FnZSwgc2lnbmF0dXJlLCBhZGRyZXNzIH0gPSBwYXlsb2FkO1xuICBjb25zdCBzaXdlTWVzc2FnZURhdGEgPSBwYXJzZVNpd2VNZXNzYWdlKG1lc3NhZ2UpO1xuICBpZiAoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSkge1xuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLmV4cGlyYXRpb25fdGltZSk7XG4gICAgaWYgKGV4cGlyYXRpb25UaW1lIDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGlyZWQgbWVzc2FnZVwiKTtcbiAgICB9XG4gIH1cbiAgaWYgKHNpd2VNZXNzYWdlRGF0YS5ub3RfYmVmb3JlKSB7XG4gICAgY29uc3Qgbm90QmVmb3JlID0gbmV3IERhdGUoc2l3ZU1lc3NhZ2VEYXRhLm5vdF9iZWZvcmUpO1xuICAgIGlmIChub3RCZWZvcmUgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IEJlZm9yZSB0aW1lIGhhcyBub3QgcGFzc2VkXCIpO1xuICAgIH1cbiAgfVxuICBpZiAobm9uY2UgJiYgc2l3ZU1lc3NhZ2VEYXRhLm5vbmNlICE9PSBub25jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBOb25jZSBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5ub25jZX0sIEV4cGVjdGVkOiAke25vbmNlfWBcbiAgICApO1xuICB9XG4gIGlmIChzdGF0ZW1lbnQgJiYgc2l3ZU1lc3NhZ2VEYXRhLnN0YXRlbWVudCAhPT0gc3RhdGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFN0YXRlbWVudCBtaXNtYXRjaC4gR290OiAke3Npd2VNZXNzYWdlRGF0YS5zdGF0ZW1lbnR9LCBFeHBlY3RlZDogJHtzdGF0ZW1lbnR9YFxuICAgICk7XG4gIH1cbiAgaWYgKHJlcXVlc3RJZCAmJiBzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZCAhPT0gcmVxdWVzdElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFJlcXVlc3QgSUQgbWlzbWF0Y2guIEdvdDogJHtzaXdlTWVzc2FnZURhdGEucmVxdWVzdF9pZH0sIEV4cGVjdGVkOiAke3JlcXVlc3RJZH1gXG4gICAgKTtcbiAgfVxuICBsZXQgcHJvdmlkZXIgPSB1c2VyUHJvdmlkZXIgfHwgY3JlYXRlUHVibGljQ2xpZW50Mih7IGNoYWluOiB3b3JsZGNoYWluMiwgdHJhbnNwb3J0OiBodHRwMigpIH0pO1xuICBjb25zdCBzaWduZWRNZXNzYWdlID0gYCR7RVJDXzE5MV9QUkVGSVh9JHttZXNzYWdlLmxlbmd0aH0ke21lc3NhZ2V9YDtcbiAgY29uc3QgaGFzaGVkTWVzc2FnZSA9IGhhc2hNZXNzYWdlKHNpZ25lZE1lc3NhZ2UpO1xuICBjb25zdCBjb250cmFjdCA9IGdldENvbnRyYWN0KHtcbiAgICBhZGRyZXNzLFxuICAgIGFiaTogU0FGRV9DT05UUkFDVF9BQkksXG4gICAgY2xpZW50OiBwcm92aWRlclxuICB9KTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZWNvdmVyZWRBZGRyZXNzID0gYXdhaXQgcmVjb3ZlckFkZHJlc3Moe1xuICAgICAgaGFzaDogaGFzaGVkTWVzc2FnZSxcbiAgICAgIHNpZ25hdHVyZTogYDB4JHtzaWduYXR1cmV9YFxuICAgIH0pO1xuICAgIGNvbnN0IGlzT3duZXIgPSBhd2FpdCBjb250cmFjdC5yZWFkLmlzT3duZXIoW3JlY292ZXJlZEFkZHJlc3NdKTtcbiAgICBpZiAoIWlzT3duZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkLCBpbnZhbGlkIG93bmVyXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKTtcbiAgfVxuICByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBzaXdlTWVzc2FnZURhdGEgfTtcbn07XG5cbi8vIGhlbHBlcnMvc2l3ZS92YWxpZGF0ZS13YWxsZXQtYXV0aC1jb21tYW5kLWlucHV0LnRzXG52YXIgdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0ID0gKHBhcmFtcykgPT4ge1xuICBpZiAoIXBhcmFtcy5ub25jZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm9uY2UnIGlzIHJlcXVpcmVkXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vbmNlLmxlbmd0aCA8IDgpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lc3NhZ2U6IFwiJ25vbmNlJyBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5zdGF0ZW1lbnQgJiYgcGFyYW1zLnN0YXRlbWVudC5pbmNsdWRlcyhcIlxcblwiKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInc3RhdGVtZW50JyBtdXN0IG5vdCBjb250YWluIG5ld2xpbmVzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLmV4cGlyYXRpb25UaW1lICYmIG5ldyBEYXRlKHBhcmFtcy5leHBpcmF0aW9uVGltZSkgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInZXhwaXJhdGlvblRpbWUnIG11c3QgYmUgaW4gdGhlIGZ1dHVyZVwiIH07XG4gIH1cbiAgaWYgKHBhcmFtcy5leHBpcmF0aW9uVGltZSAmJiBuZXcgRGF0ZShwYXJhbXMuZXhwaXJhdGlvblRpbWUpID4gbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxZTMpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBtZXNzYWdlOiBcIidleHBpcmF0aW9uVGltZScgbXVzdCBiZSB3aXRoaW4gNyBkYXlzXCIgfTtcbiAgfVxuICBpZiAocGFyYW1zLm5vdEJlZm9yZSAmJiBuZXcgRGF0ZShwYXJhbXMubm90QmVmb3JlKSA+IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMWUzKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVzc2FnZTogXCInbm90QmVmb3JlJyBtdXN0IGJlIHdpdGhpbiA3IGRheXNcIiB9O1xuICB9XG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59O1xuXG4vLyBoZWxwZXJzL3RyYW5zYWN0aW9uL3ZhbGlkYXRlLXBheWxvYWQudHNcbnZhciBpc1ZhbGlkSGV4ID0gKHN0cikgPT4ge1xuICByZXR1cm4gL14weFswLTlBLUZhLWZdKyQvLnRlc3Qoc3RyKTtcbn07XG52YXIgcHJvY2Vzc1BheWxvYWQgPSAocGF5bG9hZCkgPT4ge1xuICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwiYm9vbGVhblwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiIHx8IHBheWxvYWQgPT09IG51bGwgfHwgcGF5bG9hZCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiBwYXlsb2FkID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIFN0cmluZyhwYXlsb2FkKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgIHJldHVybiBwYXlsb2FkLm1hcCgodmFsdWUpID0+IHByb2Nlc3NQYXlsb2FkKHZhbHVlKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5wYXlsb2FkIH07XG4gICAgaWYgKFwidmFsdWVcIiBpbiByZXN1bHQgJiYgcmVzdWx0LnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0LnZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlc3VsdC52YWx1ZSA9IFN0cmluZyhyZXN1bHQudmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKCFpc1ZhbGlkSGV4KHJlc3VsdC52YWx1ZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcIlRyYW5zYWN0aW9uIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBoZXggc3RyaW5nXCIsXG4gICAgICAgICAgcmVzdWx0LnZhbHVlXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgVHJhbnNhY3Rpb24gdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGhleCBzdHJpbmc6ICR7cmVzdWx0LnZhbHVlfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcmVzdWx0KSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwga2V5KSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IHByb2Nlc3NQYXlsb2FkKHJlc3VsdFtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcGF5bG9hZDtcbn07XG52YXIgdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkID0gKHBheWxvYWQpID0+IHtcbiAgcmV0dXJuIHByb2Nlc3NQYXlsb2FkKHBheWxvYWQpO1xufTtcblxuLy8gaGVscGVycy91c2VybmFtZXMvaW5kZXgudHNcbnZhciBnZXRVc2VyUHJvZmlsZSA9IGFzeW5jIChhZGRyZXNzKSA9PiB7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly91c2VybmFtZXMud29ybGRjb2luLm9yZy9hcGkvdjEvcXVlcnlcIiwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFkZHJlc3NlczogW2FkZHJlc3NdXG4gICAgfSlcbiAgfSk7XG4gIGNvbnN0IHVzZXJuYW1lcyA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB1c2VybmFtZXM/LlswXSA/PyB7IHVzZXJuYW1lOiBudWxsLCBwcm9maWxlUGljdHVyZVVybDogbnVsbCB9O1xufTtcblxuLy8gdHlwZXMvY29tbWFuZHMudHNcbnZhciBDb21tYW5kID0gLyogQF9fUFVSRV9fICovICgoQ29tbWFuZDIpID0+IHtcbiAgQ29tbWFuZDJbXCJWZXJpZnlcIl0gPSBcInZlcmlmeVwiO1xuICBDb21tYW5kMltcIlBheVwiXSA9IFwicGF5XCI7XG4gIENvbW1hbmQyW1wiV2FsbGV0QXV0aFwiXSA9IFwid2FsbGV0LWF1dGhcIjtcbiAgQ29tbWFuZDJbXCJTZW5kVHJhbnNhY3Rpb25cIl0gPSBcInNlbmQtdHJhbnNhY3Rpb25cIjtcbiAgQ29tbWFuZDJbXCJTaWduTWVzc2FnZVwiXSA9IFwic2lnbi1tZXNzYWdlXCI7XG4gIENvbW1hbmQyW1wiU2lnblR5cGVkRGF0YVwiXSA9IFwic2lnbi10eXBlZC1kYXRhXCI7XG4gIENvbW1hbmQyW1wiU2hhcmVDb250YWN0c1wiXSA9IFwic2hhcmUtY29udGFjdHNcIjtcbiAgQ29tbWFuZDJbXCJSZXF1ZXN0UGVybWlzc2lvblwiXSA9IFwicmVxdWVzdC1wZXJtaXNzaW9uXCI7XG4gIENvbW1hbmQyW1wiR2V0UGVybWlzc2lvbnNcIl0gPSBcImdldC1wZXJtaXNzaW9uc1wiO1xuICBDb21tYW5kMltcIlNlbmRIYXB0aWNGZWVkYmFja1wiXSA9IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIjtcbiAgcmV0dXJuIENvbW1hbmQyO1xufSkoQ29tbWFuZCB8fCB7fSk7XG52YXIgUGVybWlzc2lvbiA9IC8qIEBfX1BVUkVfXyAqLyAoKFBlcm1pc3Npb24yKSA9PiB7XG4gIFBlcm1pc3Npb24yW1wiTm90aWZpY2F0aW9uc1wiXSA9IFwibm90aWZpY2F0aW9uc1wiO1xuICBQZXJtaXNzaW9uMltcIkNvbnRhY3RzXCJdID0gXCJjb250YWN0c1wiO1xuICByZXR1cm4gUGVybWlzc2lvbjI7XG59KShQZXJtaXNzaW9uIHx8IHt9KTtcblxuLy8gdHlwZXMvZXJyb3JzLnRzXG5pbXBvcnQgeyBBcHBFcnJvckNvZGVzIH0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZVwiO1xuaW1wb3J0IHsgQXBwRXJyb3JDb2RlcyBhcyBBcHBFcnJvckNvZGVzMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbnZhciBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UgPSB7XG4gIFtBcHBFcnJvckNvZGVzLlZlcmlmaWNhdGlvblJlamVjdGVkXTogXCJZb3UndmUgY2FuY2VsbGVkIHRoZSByZXF1ZXN0IGluIFdvcmxkIEFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWF4VmVyaWZpY2F0aW9uc1JlYWNoZWRdOiBcIllvdSBoYXZlIGFscmVhZHkgdmVyaWZpZWQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIGZvciB0aGlzIGFjdGlvbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ3JlZGVudGlhbFVuYXZhaWxhYmxlXTogXCJJdCBzZWVtcyB5b3UgZG8gbm90IGhhdmUgdGhlIHZlcmlmaWNhdGlvbiBsZXZlbCByZXF1aXJlZCBieSB0aGlzIGFwcC5cIixcbiAgW0FwcEVycm9yQ29kZXMuTWFsZm9ybWVkUmVxdWVzdF06IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkludmFsaWROZXR3b3JrXTogXCJJbnZhbGlkIG5ldHdvcmsuIElmIHlvdSBhcmUgdGhlIGFwcCBvd25lciwgdmlzaXQgZG9jcy53b3JsZGNvaW4ub3JnL3Rlc3QgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkluY2x1c2lvblByb29mRmFpbGVkXTogXCJUaGVyZSB3YXMgYW4gaXNzdWUgZmV0Y2hpbmcgeW91ciBjcmVkZW50aWFsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5JbmNsdXNpb25Qcm9vZlBlbmRpbmddOiBcIllvdXIgaWRlbnRpdHkgaXMgc3RpbGwgYmVpbmcgcmVnaXN0ZXJlZC4gUGxlYXNlIHdhaXQgYSBmZXcgbWludXRlcyBhbmQgdHJ5IGFnYWluLlwiLFxuICBbQXBwRXJyb3JDb2Rlcy5VbmV4cGVjdGVkUmVzcG9uc2VdOiBcIlVuZXhwZWN0ZWQgcmVzcG9uc2UgZnJvbSB5b3VyIHdhbGxldC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuRmFpbGVkQnlIb3N0QXBwXTogXCJWZXJpZmljYXRpb24gZmFpbGVkIGJ5IHRoZSBhcHAuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIgZm9yIGRldGFpbHMuXCIsXG4gIFtBcHBFcnJvckNvZGVzLkdlbmVyaWNFcnJvcl06IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW0FwcEVycm9yQ29kZXMuQ29ubmVjdGlvbkZhaWxlZF06IFwiQ29ubmVjdGlvbiB0byB5b3VyIHdhbGxldCBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCJcbn07XG52YXIgUGF5bWVudEVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChQYXltZW50RXJyb3JDb2RlczIpID0+IHtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5wdXRFcnJvclwiXSA9IFwiaW5wdXRfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFBheW1lbnRFcnJvckNvZGVzMltcIlBheW1lbnRSZWplY3RlZFwiXSA9IFwicGF5bWVudF9yZWplY3RlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJJbnZhbGlkUmVjZWl2ZXJcIl0gPSBcImludmFsaWRfcmVjZWl2ZXJcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiSW5zdWZmaWNpZW50QmFsYW5jZVwiXSA9IFwiaW5zdWZmaWNpZW50X2JhbGFuY2VcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBQYXltZW50RXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgUGF5bWVudEVycm9yQ29kZXMyW1wiVXNlckJsb2NrZWRcIl0gPSBcInVzZXJfYmxvY2tlZFwiO1xuICByZXR1cm4gUGF5bWVudEVycm9yQ29kZXMyO1xufSkoUGF5bWVudEVycm9yQ29kZXMgfHwge30pO1xudmFyIFBheW1lbnRFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImlucHV0X2Vycm9yXCIgLyogSW5wdXRFcnJvciAqL106IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoaXMgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBhcHAgb3duZXIuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIllvdSBoYXZlIGNhbmNlbGxlZCB0aGUgcGF5bWVudCBpbiBXb3JsZCBBcHAuXCIsXG4gIFtcInBheW1lbnRfcmVqZWN0ZWRcIiAvKiBQYXltZW50UmVqZWN0ZWQgKi9dOiBcIllvdSd2ZSBjYW5jZWxsZWQgdGhlIHBheW1lbnQgaW4gV29ybGQgQXBwLlwiLFxuICBbXCJpbnZhbGlkX3JlY2VpdmVyXCIgLyogSW52YWxpZFJlY2VpdmVyICovXTogXCJUaGUgcmVjZWl2ZXIgYWRkcmVzcyBpcyBpbnZhbGlkLiBQbGVhc2UgY29udGFjdCB0aGUgYXBwIG93bmVyLlwiLFxuICBbXCJpbnN1ZmZpY2llbnRfYmFsYW5jZVwiIC8qIEluc3VmZmljaWVudEJhbGFuY2UgKi9dOiBcIllvdSBkbyBub3QgaGF2ZSBlbm91Z2ggYmFsYW5jZSB0byBjb21wbGV0ZSB0aGlzIHRyYW5zYWN0aW9uLlwiLFxuICBbXCJ0cmFuc2FjdGlvbl9mYWlsZWRcIiAvKiBUcmFuc2FjdGlvbkZhaWxlZCAqL106IFwiVGhlIHRyYW5zYWN0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgW1widXNlcl9ibG9ja2VkXCIgLyogVXNlckJsb2NrZWQgKi9dOiBcIlVzZXIncyByZWdpb24gaXMgYmxvY2tlZCBmcm9tIG1ha2luZyBwYXltZW50cy5cIlxufTtcbnZhciBQYXltZW50VmFsaWRhdGlvbkVycm9ycyA9IC8qIEBfX1BVUkVfXyAqLyAoKFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMikgPT4ge1xuICBQYXltZW50VmFsaWRhdGlvbkVycm9yczJbXCJNYWxmb3JtZWRSZXF1ZXN0XCJdID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHdpdGggdGhpcyByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZFRva2VuQWRkcmVzc1wiXSA9IFwiVGhlIHRva2VuIGFkZHJlc3MgaXMgaW52YWxpZC4gUGxlYXNlIGNvbnRhY3QgdGhlIGFwcCBvd25lci5cIjtcbiAgUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyW1wiSW52YWxpZEFwcElkXCJdID0gXCJUaGUgYXBwIElEIGlzIGludmFsaWQuIFBsZWFzZSBjb250YWN0IHRoZSBhcHAgb3duZXIuXCI7XG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzMltcIkR1cGxpY2F0ZVJlZmVyZW5jZVwiXSA9IFwiVGhpcyByZWZlcmVuY2UgSUQgYWxyZWFkeSBleGlzdHMgcGxlYXNlIGdlbmVyYXRlIGEgbmV3IG9uZSBhbmQgdHJ5IGFnYWluLlwiO1xuICByZXR1cm4gUGF5bWVudFZhbGlkYXRpb25FcnJvcnMyO1xufSkoUGF5bWVudFZhbGlkYXRpb25FcnJvcnMgfHwge30pO1xudmFyIFdhbGxldEF1dGhFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoV2FsbGV0QXV0aEVycm9yQ29kZXMyKSA9PiB7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIk1hbGZvcm1lZFJlcXVlc3RcIl0gPSBcIm1hbGZvcm1lZF9yZXF1ZXN0XCI7XG4gIFdhbGxldEF1dGhFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICBXYWxsZXRBdXRoRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIFdhbGxldEF1dGhFcnJvckNvZGVzMjtcbn0pKFdhbGxldEF1dGhFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBXYWxsZXRBdXRoRXJyb3JNZXNzYWdlID0ge1xuICBbXCJtYWxmb3JtZWRfcmVxdWVzdFwiIC8qIE1hbGZvcm1lZFJlcXVlc3QgKi9dOiBcIlByb3ZpZGVkIHBhcmFtZXRlcnMgaW4gdGhlIHJlcXVlc3QgYXJlIGludmFsaWQuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2VuZFRyYW5zYWN0aW9uRXJyb3JDb2RlczJbXCJJbnB1dEVycm9yXCJdID0gXCJpbnB1dF9lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiVHJhbnNhY3Rpb25GYWlsZWRcIl0gPSBcInRyYW5zYWN0aW9uX2ZhaWxlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIkRpc2FsbG93ZWRPcGVyYXRpb25cIl0gPSBcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiSW52YWxpZENvbnRyYWN0XCJdID0gXCJpbnZhbGlkX2NvbnRyYWN0XCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiRGFpbHlUeExpbWl0UmVhY2hlZFwiXSA9IFwiZGFpbHlfdHhfbGltaXRfcmVhY2hlZFwiO1xuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMltcIlBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZVwiXSA9IFwicGVybWl0dGVkX2Ftb3VudF9leGNlZWRzX3NsaXBwYWdlXCI7XG4gIFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMyW1wiUGVybWl0dGVkQW1vdW50Tm90Rm91bmRcIl0gPSBcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCI7XG4gIHJldHVybiBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzMjtcbn0pKFNlbmRUcmFuc2FjdGlvbkVycm9yQ29kZXMgfHwge30pO1xudmFyIFNlbmRUcmFuc2FjdGlvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcInRyYW5zYWN0aW9uX2ZhaWxlZFwiIC8qIFRyYW5zYWN0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLFxuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICBbXCJkaXNhbGxvd2VkX29wZXJhdGlvblwiIC8qIERpc2FsbG93ZWRPcGVyYXRpb24gKi9dOiBcIlRoZSBvcGVyYXRpb24gcmVxdWVzdGVkIGlzIG5vdCBhbGxvd2VkLiBQbGVhc2UgcmVmZXIgdG8gdGhlIGRvY3MuXCIsXG4gIFtcImludmFsaWRfY29udHJhY3RcIiAvKiBJbnZhbGlkQ29udHJhY3QgKi9dOiBcIlRoZSBjb250cmFjdCBhZGRyZXNzIGlzIG5vdCBhbGxvd2VkIGZvciB5b3VyIGFwcGxpY2F0aW9uLiBQbGVhc2UgY2hlY2sgeW91ciBkZXZlbG9wZXIgcG9ydGFsIGNvbmZpZ3VyYXRpb25zXCIsXG4gIFtcIm1hbGljaW91c19vcGVyYXRpb25cIiAvKiBNYWxpY2lvdXNPcGVyYXRpb24gKi9dOiBcIlRoZSBvcGVyYXRpb24gcmVxdWVzdGVkIGlzIGNvbnNpZGVyZWQgbWFsaWNpb3VzLlwiLFxuICBbXCJkYWlseV90eF9saW1pdF9yZWFjaGVkXCIgLyogRGFpbHlUeExpbWl0UmVhY2hlZCAqL106IFwiRGFpbHkgdHJhbnNhY3Rpb24gbGltaXQgcmVhY2hlZC4gTWF4IDEwMCB0cmFuc2FjdGlvbnMgcGVyIGRheS4gV2FpdCB1bnRpbCB0aGUgbmV4dCBkYXkuXCIsXG4gIFtcInBlcm1pdHRlZF9hbW91bnRfZXhjZWVkc19zbGlwcGFnZVwiIC8qIFBlcm1pdHRlZEFtb3VudEV4Y2VlZHNTbGlwcGFnZSAqL106IFwiUGVybWl0dGVkIGFtb3VudCBleGNlZWRzIHNsaXBwYWdlLiBZb3UgbXVzdCBzcGVuZCBhdCBsZWFzdCA5MCUgb2YgdGhlIHBlcm1pdHRlZCBhbW91bnQuXCIsXG4gIFtcInBlcm1pdHRlZF9hbW91bnRfbm90X2ZvdW5kXCIgLyogUGVybWl0dGVkQW1vdW50Tm90Rm91bmQgKi9dOiBcIlBlcm1pdHRlZCBhbW91bnQgbm90IGZvdW5kIGluIHBlcm1pdDIgcGF5bG9hZC5cIlxufTtcbnZhciBTaWduTWVzc2FnZUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTaWduTWVzc2FnZUVycm9yQ29kZXMyKSA9PiB7XG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlczJbXCJJbnZhbGlkTWVzc2FnZVwiXSA9IFwiaW52YWxpZF9tZXNzYWdlXCI7XG4gIFNpZ25NZXNzYWdlRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2lnbk1lc3NhZ2VFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICByZXR1cm4gU2lnbk1lc3NhZ2VFcnJvckNvZGVzMjtcbn0pKFNpZ25NZXNzYWdlRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2lnbk1lc3NhZ2VFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImludmFsaWRfbWVzc2FnZVwiIC8qIEludmFsaWRNZXNzYWdlICovXTogXCJJbnZhbGlkIG1lc3NhZ2UgcmVxdWVzdGVkXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCJcbn07XG52YXIgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTaWduVHlwZWREYXRhRXJyb3JDb2RlczIpID0+IHtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiSW52YWxpZE9wZXJhdGlvblwiXSA9IFwiaW52YWxpZF9vcGVyYXRpb25cIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiVXNlclJlamVjdGVkXCJdID0gXCJ1c2VyX3JlamVjdGVkXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIklucHV0RXJyb3JcIl0gPSBcImlucHV0X2Vycm9yXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIlNpbXVsYXRpb25GYWlsZWRcIl0gPSBcInNpbXVsYXRpb25fZmFpbGVkXCI7XG4gIFNpZ25UeXBlZERhdGFFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJEaXNhbGxvd2VkT3BlcmF0aW9uXCJdID0gXCJkaXNhbGxvd2VkX29wZXJhdGlvblwiO1xuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlczJbXCJJbnZhbGlkQ29udHJhY3RcIl0gPSBcImludmFsaWRfY29udHJhY3RcIjtcbiAgU2lnblR5cGVkRGF0YUVycm9yQ29kZXMyW1wiTWFsaWNpb3VzT3BlcmF0aW9uXCJdID0gXCJtYWxpY2lvdXNfb3BlcmF0aW9uXCI7XG4gIHJldHVybiBTaWduVHlwZWREYXRhRXJyb3JDb2RlczI7XG59KShTaWduVHlwZWREYXRhRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2lnblR5cGVkRGF0YUVycm9yTWVzc2FnZSA9IHtcbiAgW1wiaW52YWxpZF9vcGVyYXRpb25cIiAvKiBJbnZhbGlkT3BlcmF0aW9uICovXTogXCJUcmFuc2FjdGlvbiBpbmNsdWRlZCBhbiBvcGVyYXRpb24gdGhhdCB3YXMgaW52YWxpZFwiLFxuICBbXCJ1c2VyX3JlamVjdGVkXCIgLyogVXNlclJlamVjdGVkICovXTogXCJVc2VyIHJlamVjdGVkIHRoZSByZXF1ZXN0LlwiLFxuICBbXCJpbnB1dF9lcnJvclwiIC8qIElucHV0RXJyb3IgKi9dOiBcIkludmFsaWQgcGF5bG9hZC5cIixcbiAgW1wic2ltdWxhdGlvbl9mYWlsZWRcIiAvKiBTaW11bGF0aW9uRmFpbGVkICovXTogXCJUaGUgdHJhbnNhY3Rpb24gc2ltdWxhdGlvbiBmYWlsZWQuXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gIFtcImRpc2FsbG93ZWRfb3BlcmF0aW9uXCIgLyogRGlzYWxsb3dlZE9wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGFsbG93ZWQuIFBsZWFzZSByZWZlciB0byB0aGUgZG9jcy5cIixcbiAgW1wiaW52YWxpZF9jb250cmFjdFwiIC8qIEludmFsaWRDb250cmFjdCAqL106IFwiVGhlIGNvbnRyYWN0IGFkZHJlc3MgaXMgbm90IGFsbG93ZWQgZm9yIHlvdXIgYXBwbGljYXRpb24uIFBsZWFzZSBjaGVjayB5b3VyIGRldmVsb3BlciBwb3J0YWwgY29uZmlndXJhdGlvbnNcIixcbiAgW1wibWFsaWNpb3VzX29wZXJhdGlvblwiIC8qIE1hbGljaW91c09wZXJhdGlvbiAqL106IFwiVGhlIG9wZXJhdGlvbiByZXF1ZXN0ZWQgaXMgY29uc2lkZXJlZCBtYWxpY2lvdXMuXCJcbn07XG52YXIgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMikgPT4ge1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiVW5rbm93blwiXSA9IFwidW5rbm93blwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiQWxyZWFkeUluc3RhbGxlZFwiXSA9IFwiYWxyZWFkeV9pbnN0YWxsZWRcIjtcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzMltcIk91dHNpZGVPZldvcmxkQXBwXCJdID0gXCJvdXRzaWRlX29mX3dvcmxkYXBwXCI7XG4gIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczJbXCJOb3RPbkNsaWVudFwiXSA9IFwibm90X29uX2NsaWVudFwiO1xuICBNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMyW1wiQXBwT3V0T2ZEYXRlXCJdID0gXCJhcHBfb3V0X29mX2RhdGVcIjtcbiAgcmV0dXJuIE1pbmlLaXRJbnN0YWxsRXJyb3JDb2RlczI7XG59KShNaW5pS2l0SW5zdGFsbEVycm9yQ29kZXMgfHwge30pO1xudmFyIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlID0ge1xuICBbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL106IFwiRmFpbGVkIHRvIGluc3RhbGwgTWluaUtpdC5cIixcbiAgW1wiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovXTogXCJNaW5pS2l0IGlzIGFscmVhZHkgaW5zdGFsbGVkLlwiLFxuICBbXCJvdXRzaWRlX29mX3dvcmxkYXBwXCIgLyogT3V0c2lkZU9mV29ybGRBcHAgKi9dOiBcIk1pbmlBcHAgbGF1bmNoZWQgb3V0c2lkZSBvZiBXb3JsZEFwcC5cIixcbiAgW1wibm90X29uX2NsaWVudFwiIC8qIE5vdE9uQ2xpZW50ICovXTogXCJXaW5kb3cgb2JqZWN0IGlzIG5vdCBhdmFpbGFibGUuXCIsXG4gIFtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL106IFwiV29ybGRBcHAgaXMgb3V0IG9mIGRhdGUuIFBsZWFzZSB1cGRhdGUgdGhlIGFwcC5cIlxufTtcbnZhciBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNoYXJlQ29udGFjdHNFcnJvckNvZGVzMikgPT4ge1xuICBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgU2hhcmVDb250YWN0c0Vycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIHJldHVybiBTaGFyZUNvbnRhY3RzRXJyb3JDb2RlczI7XG59KShTaGFyZUNvbnRhY3RzRXJyb3JDb2RlcyB8fCB7fSk7XG52YXIgU2hhcmVDb250YWN0c0Vycm9yTWVzc2FnZSA9IHtcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciByZWplY3RlZCB0aGUgcmVxdWVzdC5cIixcbiAgW1wiZ2VuZXJpY19lcnJvclwiIC8qIEdlbmVyaWNFcnJvciAqL106IFwiU29tZXRoaW5nIHVuZXhwZWN0ZWQgd2VudCB3cm9uZy5cIlxufTtcbnZhciBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyKSA9PiB7XG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JDb2RlczJbXCJVc2VyUmVqZWN0ZWRcIl0gPSBcInVzZXJfcmVqZWN0ZWRcIjtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiQWxyZWFkeVJlcXVlc3RlZFwiXSA9IFwiYWxyZWFkeV9yZXF1ZXN0ZWRcIjtcbiAgUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzMltcIlBlcm1pc3Npb25EaXNhYmxlZFwiXSA9IFwicGVybWlzc2lvbl9kaXNhYmxlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiQWxyZWFkeUdyYW50ZWRcIl0gPSBcImFscmVhZHlfZ3JhbnRlZFwiO1xuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyW1wiVW5zdXBwb3J0ZWRQZXJtaXNzaW9uXCJdID0gXCJ1bnN1cHBvcnRlZF9wZXJtaXNzaW9uXCI7XG4gIHJldHVybiBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMyO1xufSkoUmVxdWVzdFBlcm1pc3Npb25FcnJvckNvZGVzIHx8IHt9KTtcbnZhciBSZXF1ZXN0UGVybWlzc2lvbkVycm9yTWVzc2FnZSA9IHtcbiAgW1widXNlcl9yZWplY3RlZFwiIC8qIFVzZXJSZWplY3RlZCAqL106IFwiVXNlciBkZWNsaW5lZCBzaGFyaW5nIGNvbnRhY3RzXCIsXG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlJlcXVlc3QgZmFpbGVkIGZvciB1bmtub3duIHJlYXNvbi5cIixcbiAgW1wiYWxyZWFkeV9yZXF1ZXN0ZWRcIiAvKiBBbHJlYWR5UmVxdWVzdGVkICovXTogXCJVc2VyIGhhcyBhbHJlYWR5IGRlY2xpbmVkIHR1cm5pbmcgb24gbm90aWZpY2F0aW9ucyBvbmNlXCIsXG4gIFtcInBlcm1pc3Npb25fZGlzYWJsZWRcIiAvKiBQZXJtaXNzaW9uRGlzYWJsZWQgKi9dOiBcIlVzZXIgZG9lcyBub3QgaGF2ZSB0aGlzIHBlcm1pc3Npb24gZW5hYmxlZCBpbiBXb3JsZCBBcHBcIixcbiAgW1wiYWxyZWFkeV9ncmFudGVkXCIgLyogQWxyZWFkeUdyYW50ZWQgKi9dOiBcIklmIHRoZSB1c2VyIGhhcyBhbHJlYWR5IGdyYW50ZWQgdGhpcyBtaW5pIGFwcCBwZXJtaXNzaW9uXCIsXG4gIFtcInVuc3VwcG9ydGVkX3Blcm1pc3Npb25cIiAvKiBVbnN1cHBvcnRlZFBlcm1pc3Npb24gKi9dOiBcIlRoZSBwZXJtaXNzaW9uIHJlcXVlc3RlZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgbWluaSBhcHBcIlxufTtcbnZhciBHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMyKSA9PiB7XG4gIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczJbXCJHZW5lcmljRXJyb3JcIl0gPSBcImdlbmVyaWNfZXJyb3JcIjtcbiAgcmV0dXJuIEdldFBlcm1pc3Npb25zRXJyb3JDb2RlczI7XG59KShHZXRQZXJtaXNzaW9uc0Vycm9yQ29kZXMgfHwge30pO1xudmFyIEdldFBlcm1pc3Npb25zRXJyb3JNZXNzYWdlID0ge1xuICBbXCJnZW5lcmljX2Vycm9yXCIgLyogR2VuZXJpY0Vycm9yICovXTogXCJTb21ldGhpbmcgdW5leHBlY3RlZCB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLlwiXG59O1xudmFyIFNlbmRIYXB0aWNGZWVkYmFja0Vycm9yQ29kZXMgPSAvKiBAX19QVVJFX18gKi8gKChTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMikgPT4ge1xuICBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMltcIkdlbmVyaWNFcnJvclwiXSA9IFwiZ2VuZXJpY19lcnJvclwiO1xuICBTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzMltcIlVzZXJSZWplY3RlZFwiXSA9IFwidXNlcl9yZWplY3RlZFwiO1xuICByZXR1cm4gU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlczI7XG59KShTZW5kSGFwdGljRmVlZGJhY2tFcnJvckNvZGVzIHx8IHt9KTtcbnZhciBTZW5kSGFwdGljRmVlZGJhY2tFcnJvck1lc3NhZ2UgPSB7XG4gIFtcImdlbmVyaWNfZXJyb3JcIiAvKiBHZW5lcmljRXJyb3IgKi9dOiBcIlNvbWV0aGluZyB1bmV4cGVjdGVkIHdlbnQgd3JvbmcuXCIsXG4gIFtcInVzZXJfcmVqZWN0ZWRcIiAvKiBVc2VyUmVqZWN0ZWQgKi9dOiBcIlVzZXIgcmVqZWN0ZWQgdGhlIHJlcXVlc3QuXCJcbn07XG5cbi8vIGhlbHBlcnMvc2VuZC13ZWJ2aWV3LWV2ZW50LnRzXG52YXIgc2VuZFdlYnZpZXdFdmVudCA9IChwYXlsb2FkKSA9PiB7XG4gIGlmICh3aW5kb3cud2Via2l0KSB7XG4gICAgd2luZG93LndlYmtpdD8ubWVzc2FnZUhhbmRsZXJzPy5taW5pa2l0Py5wb3N0TWVzc2FnZT8uKHBheWxvYWQpO1xuICB9IGVsc2UgaWYgKHdpbmRvdy5BbmRyb2lkKSB7XG4gICAgd2luZG93LkFuZHJvaWQucG9zdE1lc3NhZ2U/LihKU09OLnN0cmluZ2lmeShwYXlsb2FkKSk7XG4gIH1cbn07XG5cbi8vIHR5cGVzL3Jlc3BvbnNlcy50c1xudmFyIFJlc3BvbnNlRXZlbnQgPSAvKiBAX19QVVJFX18gKi8gKChSZXNwb25zZUV2ZW50MikgPT4ge1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBWZXJpZnlBY3Rpb25cIl0gPSBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBQYXltZW50XCJdID0gXCJtaW5pYXBwLXBheW1lbnRcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwV2FsbGV0QXV0aFwiXSA9IFwibWluaWFwcC13YWxsZXQtYXV0aFwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTZW5kVHJhbnNhY3Rpb25cIl0gPSBcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBTaWduTWVzc2FnZVwiXSA9IFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2lnblR5cGVkRGF0YVwiXSA9IFwibWluaWFwcC1zaWduLXR5cGVkLWRhdGFcIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwU2hhcmVDb250YWN0c1wiXSA9IFwibWluaWFwcC1zaGFyZS1jb250YWN0c1wiO1xuICBSZXNwb25zZUV2ZW50MltcIk1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvblwiXSA9IFwibWluaWFwcC1yZXF1ZXN0LXBlcm1pc3Npb25cIjtcbiAgUmVzcG9uc2VFdmVudDJbXCJNaW5pQXBwR2V0UGVybWlzc2lvbnNcIl0gPSBcIm1pbmlhcHAtZ2V0LXBlcm1pc3Npb25zXCI7XG4gIFJlc3BvbnNlRXZlbnQyW1wiTWluaUFwcFNlbmRIYXB0aWNGZWVkYmFja1wiXSA9IFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiO1xuICByZXR1cm4gUmVzcG9uc2VFdmVudDI7XG59KShSZXNwb25zZUV2ZW50IHx8IHt9KTtcblxuLy8gbWluaWtpdC50c1xudmFyIHNlbmRNaW5pS2l0RXZlbnQgPSAocGF5bG9hZCkgPT4ge1xuICBzZW5kV2Vidmlld0V2ZW50KHBheWxvYWQpO1xufTtcbnZhciBfTWluaUtpdCA9IGNsYXNzIF9NaW5pS2l0IHtcbiAgc3RhdGljIHNlbmRJbml0KCkge1xuICAgIHNlbmRXZWJ2aWV3RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJpbml0XCIsXG4gICAgICBwYXlsb2FkOiB7IHZlcnNpb246IHRoaXMuTUlOSUtJVF9WRVJTSU9OIH1cbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgc3Vic2NyaWJlKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLykge1xuICAgICAgY29uc3Qgb3JpZ2luYWxIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgIGNvbnN0IHdyYXBwZWRIYW5kbGVyID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgIF9NaW5pS2l0LndhbGxldEFkZHJlc3MgPSBwYXlsb2FkLmFkZHJlc3M7XG4gICAgICAgICAgX01pbmlLaXQuZ2V0VXNlckJ5QWRkcmVzcyhwYXlsb2FkLmFkZHJlc3MpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgIF9NaW5pS2l0LnVzZXIgPSB1c2VyO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG9yaWdpbmFsSGFuZGxlcihwYXlsb2FkKTtcbiAgICAgIH07XG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB3cmFwcGVkSGFuZGxlcjtcbiAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8pIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsSGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICBjb25zdCB3cmFwcGVkSGFuZGxlciA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIgJiYgcGF5bG9hZC52ZXJpZmljYXRpb25fbGV2ZWwgPT09IFZlcmlmaWNhdGlvbkxldmVsLk9yYikge1xuICAgICAgICAgIGNvbXByZXNzQW5kUGFkUHJvb2YocGF5bG9hZC5wcm9vZikudGhlbihcbiAgICAgICAgICAgIChjb21wcmVzc2VkUHJvb2YpID0+IHtcbiAgICAgICAgICAgICAgcGF5bG9hZC5wcm9vZiA9IGNvbXByZXNzZWRQcm9vZjtcbiAgICAgICAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3JpZ2luYWxIYW5kbGVyKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gd3JhcHBlZEhhbmRsZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XSA9IGhhbmRsZXI7XG4gICAgfVxuICB9XG4gIHN0YXRpYyB1bnN1YnNjcmliZShldmVudCkge1xuICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1tldmVudF07XG4gIH1cbiAgc3RhdGljIHRyaWdnZXIoZXZlbnQsIHBheWxvYWQpIHtcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgY29uc29sZS5lcnJvcihgTm8gaGFuZGxlciBmb3IgZXZlbnQgJHtldmVudH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdKHBheWxvYWQpO1xuICB9XG4gIHN0YXRpYyBhc3luYyBhd2FpdENvbW1hbmQoZXZlbnQsIGNvbW1hbmQsIGV4ZWN1dG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBsZXQgY29tbWFuZFBheWxvYWQgPSBudWxsO1xuICAgICAgY29uc3QgaGFuZGxlQW5kVW5zdWJzY3JpYmUgPSAocGF5bG9hZCkgPT4ge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKGV2ZW50KTtcbiAgICAgICAgcmVzb2x2ZSh7IGNvbW1hbmRQYXlsb2FkLCBmaW5hbFBheWxvYWQ6IHBheWxvYWQgfSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5zdWJzY3JpYmUoZXZlbnQsIGhhbmRsZUFuZFVuc3Vic2NyaWJlKTtcbiAgICAgIGNvbW1hbmRQYXlsb2FkID0gZXhlY3V0b3IoKTtcbiAgICB9KTtcbiAgfVxuICBzdGF0aWMgY29tbWFuZHNWYWxpZCh3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMubWluaUtpdENvbW1hbmRWZXJzaW9uKS5ldmVyeShcbiAgICAgIChbbWluaWtpdENvbW1hbmROYW1lLCB2ZXJzaW9uXSkgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kSW5wdXQgPSB3b3JsZEFwcFN1cHBvcnRlZENvbW1hbmRzLmZpbmQoXG4gICAgICAgICAgKGNvbW1hbmQpID0+IGNvbW1hbmQubmFtZSA9PT0gbWluaWtpdENvbW1hbmROYW1lXG4gICAgICAgICk7XG4gICAgICAgIGlmICghY29tbWFuZElucHV0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGBDb21tYW5kICR7bWluaWtpdENvbW1hbmROYW1lfSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBhcHAuIFRyeSB1cGRhdGluZyB0aGUgYXBwIHZlcnNpb25gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbbWluaWtpdENvbW1hbmROYW1lXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRJbnB1dCA/IGNvbW1hbmRJbnB1dC5zdXBwb3J0ZWRfdmVyc2lvbnMuaW5jbHVkZXModmVyc2lvbikgOiBmYWxzZTtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIHN0YXRpYyBpbnN0YWxsKGFwcElkKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgQm9vbGVhbih3aW5kb3cuTWluaUtpdCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1wiYWxyZWFkeV9pbnN0YWxsZWRcIiAvKiBBbHJlYWR5SW5zdGFsbGVkICovXVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFhcHBJZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiQXBwIElEIG5vdCBwcm92aWRlZCBkdXJpbmcgaW5zdGFsbFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX01pbmlLaXQuYXBwSWQgPSBhcHBJZDtcbiAgICB9XG4gICAgaWYgKCF3aW5kb3cuV29ybGRBcHApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwib3V0c2lkZV9vZl93b3JsZGFwcFwiIC8qIE91dHNpZGVPZldvcmxkQXBwICovLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1wib3V0c2lkZV9vZl93b3JsZGFwcFwiIC8qIE91dHNpZGVPZldvcmxkQXBwICovXVxuICAgICAgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHdpbmRvdy5NaW5pS2l0ID0gX01pbmlLaXQ7XG4gICAgICB0aGlzLnNlbmRJbml0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIE1pbmlLaXRJbnN0YWxsRXJyb3JNZXNzYWdlW1widW5rbm93blwiIC8qIFVua25vd24gKi9dLFxuICAgICAgICBlcnJvclxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvckNvZGU6IFwidW5rbm93blwiIC8qIFVua25vd24gKi8sXG4gICAgICAgIGVycm9yTWVzc2FnZTogTWluaUtpdEluc3RhbGxFcnJvck1lc3NhZ2VbXCJ1bmtub3duXCIgLyogVW5rbm93biAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghdGhpcy5jb21tYW5kc1ZhbGlkKHdpbmRvdy5Xb3JsZEFwcC5zdXBwb3J0ZWRfY29tbWFuZHMpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3JDb2RlOiBcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqLyxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZVtcImFwcF9vdXRfb2ZfZGF0ZVwiIC8qIEFwcE91dE9mRGF0ZSAqL11cbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfVxuICBzdGF0aWMgaXNJbnN0YWxsZWQoZGVidWcpIHtcbiAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKFwiTWluaUtpdCBpcyBhbGl2ZSFcIik7XG4gICAgY29uc3QgaXNJbnN0YWxsZWQgPSBCb29sZWFuKHdpbmRvdy5NaW5pS2l0KTtcbiAgICBpZiAoIWlzSW5zdGFsbGVkKVxuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJNaW5pS2l0IGlzIG5vdCBpbnN0YWxsZWQuIE1ha2Ugc3VyZSB5b3UncmUgcnVubmluZyB0aGUgYXBwbGljYXRpb24gaW5zaWRlIG9mIFdvcmxkIEFwcFwiXG4gICAgICApO1xuICAgIHJldHVybiBpc0luc3RhbGxlZDtcbiAgfVxufTtcbl9NaW5pS2l0Lk1JTklLSVRfVkVSU0lPTiA9IDE7XG5fTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb24gPSB7XG4gIFtcInZlcmlmeVwiIC8qIFZlcmlmeSAqL106IDEsXG4gIFtcInBheVwiIC8qIFBheSAqL106IDEsXG4gIFtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL106IDEsXG4gIFtcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dOiAxLFxuICBbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL106IDEsXG4gIFtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dOiAxLFxuICBbXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi9dOiAxLFxuICBbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL106IDEsXG4gIFtcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovXTogMSxcbiAgW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAxXG59O1xuX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlID0ge1xuICBbXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi9dOiBmYWxzZSxcbiAgW1wicGF5XCIgLyogUGF5ICovXTogZmFsc2UsXG4gIFtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL106IGZhbHNlLFxuICBbXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovXTogZmFsc2UsXG4gIFtcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovXTogZmFsc2UsXG4gIFtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dOiBmYWxzZSxcbiAgW1wic2hhcmUtY29udGFjdHNcIiAvKiBTaGFyZUNvbnRhY3RzICovXTogZmFsc2UsXG4gIFtcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovXTogZmFsc2UsXG4gIFtcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovXTogZmFsc2UsXG4gIFtcInNlbmQtaGFwdGljLWZlZWRiYWNrXCIgLyogU2VuZEhhcHRpY0ZlZWRiYWNrICovXTogZmFsc2Vcbn07XG5fTWluaUtpdC5saXN0ZW5lcnMgPSB7XG4gIFtcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcGF5bWVudFwiIC8qIE1pbmlBcHBQYXltZW50ICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXdhbGxldC1hdXRoXCIgLyogTWluaUFwcFdhbGxldEF1dGggKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2VuZC10cmFuc2FjdGlvblwiIC8qIE1pbmlBcHBTZW5kVHJhbnNhY3Rpb24gKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtc2lnbi1tZXNzYWdlXCIgLyogTWluaUFwcFNpZ25NZXNzYWdlICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNpZ24tdHlwZWQtZGF0YVwiIC8qIE1pbmlBcHBTaWduVHlwZWREYXRhICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi9dOiAoKSA9PiB7XG4gIH0sXG4gIFtcIm1pbmlhcHAtcmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogTWluaUFwcFJlcXVlc3RQZXJtaXNzaW9uICovXTogKCkgPT4ge1xuICB9LFxuICBbXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqL106ICgpID0+IHtcbiAgfSxcbiAgW1wibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi9dOiAoKSA9PiB7XG4gIH1cbn07XG5fTWluaUtpdC5hcHBJZCA9IG51bGw7XG4vKipcbiAqIEBkZXByZWNhdGVkIHlvdSBzaG91bGQgdXNlIE1pbmlLaXQudXNlci53YWxsZXRBZGRyZXNzIGluc3RlYWRcbiAqL1xuX01pbmlLaXQud2FsbGV0QWRkcmVzcyA9IG51bGw7XG5fTWluaUtpdC51c2VyID0gbnVsbDtcbl9NaW5pS2l0LmdldFVzZXJCeUFkZHJlc3MgPSBhc3luYyAoYWRkcmVzcykgPT4ge1xuICBjb25zdCB1c2VyUHJvZmlsZSA9IGF3YWl0IGdldFVzZXJQcm9maWxlKGFkZHJlc3MpO1xuICByZXR1cm4ge1xuICAgIHdhbGxldEFkZHJlc3M6IGFkZHJlc3MsXG4gICAgdXNlcm5hbWU6IHVzZXJQcm9maWxlLnVzZXJuYW1lLFxuICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB1c2VyUHJvZmlsZS5wcm9maWxlUGljdHVyZVVybFxuICB9O1xufTtcbl9NaW5pS2l0LmNvbW1hbmRzID0ge1xuICB2ZXJpZnk6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInZlcmlmeVwiIC8qIFZlcmlmeSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3ZlcmlmeScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBldmVudFBheWxvYWQgPSB7XG4gICAgICBhY3Rpb246IGVuY29kZUFjdGlvbihwYXlsb2FkLmFjdGlvbiksXG4gICAgICBzaWduYWw6IGdlbmVyYXRlU2lnbmFsKHBheWxvYWQuc2lnbmFsKS5kaWdlc3QsXG4gICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6IHBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsIHx8IFZlcmlmaWNhdGlvbkxldmVsLk9yYixcbiAgICAgIHRpbWVzdGFtcFxuICAgIH07XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInZlcmlmeVwiIC8qIFZlcmlmeSAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInZlcmlmeVwiIC8qIFZlcmlmeSAqL10sXG4gICAgICBwYXlsb2FkOiBldmVudFBheWxvYWRcbiAgICB9KTtcbiAgICByZXR1cm4gZXZlbnRQYXlsb2FkO1xuICB9LFxuICBwYXk6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInBheVwiIC8qIFBheSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3BheScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICghdmFsaWRhdGVQYXltZW50UGF5bG9hZChwYXlsb2FkKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5ldHdvcmsgPSBcIndvcmxkY2hhaW5cIiAvKiBXb3JsZENoYWluICovO1xuICAgIGNvbnN0IGV2ZW50UGF5bG9hZCA9IHtcbiAgICAgIC4uLnBheWxvYWQsXG4gICAgICBuZXR3b3JrXG4gICAgfTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwicGF5XCIgLyogUGF5ICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicGF5XCIgLyogUGF5ICovXSxcbiAgICAgIHBheWxvYWQ6IGV2ZW50UGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBldmVudFBheWxvYWQ7XG4gIH0sXG4gIHdhbGxldEF1dGg6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3dhbGxldEF1dGgnIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGVXYWxsZXRBdXRoQ29tbWFuZElucHV0KHBheWxvYWQpO1xuICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC52YWxpZCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJGYWlsZWQgdG8gdmFsaWRhdGUgd2FsbGV0IGF1dGggaW5wdXQ6XFxuXFxuIC0tPlwiLFxuICAgICAgICB2YWxpZGF0aW9uUmVzdWx0Lm1lc3NhZ2VcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IHByb3RvY29sID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgcHJvdG9jb2wgPSBjdXJyZW50VXJsLnByb3RvY29sLnNwbGl0KFwiOlwiKVswXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgY3VycmVudCBVUkxcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNpd2VNZXNzYWdlID0gZ2VuZXJhdGVTaXdlTWVzc2FnZSh7XG4gICAgICBzY2hlbWU6IHByb3RvY29sLFxuICAgICAgZG9tYWluOiB3aW5kb3cubG9jYXRpb24uaG9zdCxcbiAgICAgIHN0YXRlbWVudDogcGF5bG9hZC5zdGF0ZW1lbnQgPz8gdm9pZCAwLFxuICAgICAgdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgIHZlcnNpb246IDEsXG4gICAgICBjaGFpbl9pZDogNDgwLFxuICAgICAgbm9uY2U6IHBheWxvYWQubm9uY2UsXG4gICAgICBpc3N1ZWRfYXQ6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKSxcbiAgICAgIGV4cGlyYXRpb25fdGltZTogcGF5bG9hZC5leHBpcmF0aW9uVGltZT8udG9JU09TdHJpbmcoKSA/PyB2b2lkIDAsXG4gICAgICBub3RfYmVmb3JlOiBwYXlsb2FkLm5vdEJlZm9yZT8udG9JU09TdHJpbmcoKSA/PyB2b2lkIDAsXG4gICAgICByZXF1ZXN0X2lkOiBwYXlsb2FkLnJlcXVlc3RJZCA/PyB2b2lkIDBcbiAgICB9KTtcbiAgICBjb25zdCB3YWxsZXRBdXRoUGF5bG9hZCA9IHsgc2l3ZU1lc3NhZ2UgfTtcbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wid2FsbGV0LWF1dGhcIiAvKiBXYWxsZXRBdXRoICovXSxcbiAgICAgIHBheWxvYWQ6IHdhbGxldEF1dGhQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHdhbGxldEF1dGhQYXlsb2FkO1xuICB9LFxuICBzZW5kVHJhbnNhY3Rpb246IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInNlbmQtdHJhbnNhY3Rpb25cIiAvKiBTZW5kVHJhbnNhY3Rpb24gKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kVHJhbnNhY3Rpb24nIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB2YWxpZGF0ZWRQYXlsb2FkID0gdmFsaWRhdGVTZW5kVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQpO1xuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzZW5kLXRyYW5zYWN0aW9uXCIgLyogU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqL10sXG4gICAgICBwYXlsb2FkOiB2YWxpZGF0ZWRQYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbGlkYXRlZFBheWxvYWQ7XG4gIH0sXG4gIHNpZ25NZXNzYWdlOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3NpZ25NZXNzYWdlJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNpZ24tbWVzc2FnZVwiIC8qIFNpZ25NZXNzYWdlICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2lnbi1tZXNzYWdlXCIgLyogU2lnbk1lc3NhZ2UgKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovXSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCInc2lnblR5cGVkRGF0YScgY29tbWFuZCBpcyB1bmF2YWlsYWJsZS4gQ2hlY2sgTWluaUtpdC5pbnN0YWxsKCkgb3IgdXBkYXRlIHRoZSBhcHAgdmVyc2lvblwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlbmRNaW5pS2l0RXZlbnQoe1xuICAgICAgY29tbWFuZDogXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wic2lnbi10eXBlZC1kYXRhXCIgLyogU2lnblR5cGVkRGF0YSAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHNoYXJlQ29udGFjdHM6IChwYXlsb2FkKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIV9NaW5pS2l0LmlzQ29tbWFuZEF2YWlsYWJsZVtcInNpZ24tdHlwZWQtZGF0YVwiIC8qIFNpZ25UeXBlZERhdGEgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzaGFyZUNvbnRhY3RzJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqLyxcbiAgICAgIHZlcnNpb246IF9NaW5pS2l0Lm1pbmlLaXRDb21tYW5kVmVyc2lvbltcInNoYXJlLWNvbnRhY3RzXCIgLyogU2hhcmVDb250YWN0cyAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH0sXG4gIHJlcXVlc3RQZXJtaXNzaW9uOiAocGF5bG9hZCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJyZXF1ZXN0LXBlcm1pc3Npb25cIiAvKiBSZXF1ZXN0UGVybWlzc2lvbiAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ3JlcXVlc3RQZXJtaXNzaW9uJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wicmVxdWVzdC1wZXJtaXNzaW9uXCIgLyogUmVxdWVzdFBlcm1pc3Npb24gKi9dLFxuICAgICAgcGF5bG9hZFxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9LFxuICBnZXRQZXJtaXNzaW9uczogKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8ICFfTWluaUtpdC5pc0NvbW1hbmRBdmFpbGFibGVbXCJnZXQtcGVybWlzc2lvbnNcIiAvKiBHZXRQZXJtaXNzaW9ucyAqL10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIFwiJ2dldFBlcm1pc3Npb25zJyBjb21tYW5kIGlzIHVuYXZhaWxhYmxlLiBDaGVjayBNaW5pS2l0Lmluc3RhbGwoKSBvciB1cGRhdGUgdGhlIGFwcCB2ZXJzaW9uXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2VuZE1pbmlLaXRFdmVudCh7XG4gICAgICBjb21tYW5kOiBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgdmVyc2lvbjogX01pbmlLaXQubWluaUtpdENvbW1hbmRWZXJzaW9uW1wiZ2V0LXBlcm1pc3Npb25zXCIgLyogR2V0UGVybWlzc2lvbnMgKi9dLFxuICAgICAgcGF5bG9hZDoge31cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcInNlbnRcIlxuICAgIH07XG4gIH0sXG4gIHNlbmRIYXB0aWNGZWVkYmFjazogKHBheWxvYWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhX01pbmlLaXQuaXNDb21tYW5kQXZhaWxhYmxlW1wic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi9dKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIidzZW5kSGFwdGljRmVlZGJhY2snIGNvbW1hbmQgaXMgdW5hdmFpbGFibGUuIENoZWNrIE1pbmlLaXQuaW5zdGFsbCgpIG9yIHVwZGF0ZSB0aGUgYXBwIHZlcnNpb25cIlxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZW5kTWluaUtpdEV2ZW50KHtcbiAgICAgIGNvbW1hbmQ6IFwic2VuZC1oYXB0aWMtZmVlZGJhY2tcIiAvKiBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICB2ZXJzaW9uOiBfTWluaUtpdC5taW5pS2l0Q29tbWFuZFZlcnNpb25bXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqL10sXG4gICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH1cbn07XG4vKipcbiAqIFRoaXMgb2JqZWN0IGNvbnRhaW5zIGFzeW5jIHZlcnNpb25zIG9mIGFsbCB0aGUgY29tbWFuZHMuXG4gKiBJbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IGxpc3RlbmVycywgeW91IGNhbiBqdXN0IGBhd2FpdGAgdGhlc2UuXG4gKlxuICogVGhleSByZXR1cm4gYSBzdGFuZGFyZGl6ZWQgb2JqZWN0XG4gKlxuICogY29tbWFuZFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGNvbW1hbmQgZnVuY3Rpb25cbiAqXG4gKiBmaW5hbFBheWxvYWQgLSBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIGV2ZW50IGxpc3RlbmVyLCBvciBpbiBvdGhlciB3b3JkcywgV29ybGRBcHAgcmVzcG9uc2VcbiAqL1xuX01pbmlLaXQuY29tbWFuZHNBc3luYyA9IHtcbiAgdmVyaWZ5OiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtdmVyaWZ5LWFjdGlvblwiIC8qIE1pbmlBcHBWZXJpZnlBY3Rpb24gKi8sXG4gICAgICAgICAgXCJ2ZXJpZnlcIiAvKiBWZXJpZnkgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMudmVyaWZ5KHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXNwb25zZS5maW5hbFBheWxvYWQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXNwb25zZS5maW5hbFBheWxvYWQudmVyaWZpY2F0aW9uX2xldmVsID09PSBWZXJpZmljYXRpb25MZXZlbC5PcmIpIHtcbiAgICAgICAgICByZXNwb25zZS5maW5hbFBheWxvYWQucHJvb2YgPSBhd2FpdCBjb21wcmVzc0FuZFBhZFByb29mKFxuICAgICAgICAgICAgcmVzcG9uc2UuZmluYWxQYXlsb2FkLnByb29mXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHBheTogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXBheW1lbnRcIiAvKiBNaW5pQXBwUGF5bWVudCAqLyxcbiAgICAgICAgICBcInBheVwiIC8qIFBheSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5wYXkocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICB3YWxsZXRBdXRoOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtd2FsbGV0LWF1dGhcIiAvKiBNaW5pQXBwV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICBcIndhbGxldC1hdXRoXCIgLyogV2FsbGV0QXV0aCAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy53YWxsZXRBdXRoKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHNlbmRUcmFuc2FjdGlvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNlbmQtdHJhbnNhY3Rpb25cIiAvKiBNaW5pQXBwU2VuZFRyYW5zYWN0aW9uICovLFxuICAgICAgICAgIFwic2VuZC10cmFuc2FjdGlvblwiIC8qIFNlbmRUcmFuc2FjdGlvbiAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kVHJhbnNhY3Rpb24ocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2lnbk1lc3NhZ2U6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zaWduLW1lc3NhZ2VcIiAvKiBNaW5pQXBwU2lnbk1lc3NhZ2UgKi8sXG4gICAgICAgICAgXCJzaWduLW1lc3NhZ2VcIiAvKiBTaWduTWVzc2FnZSAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zaWduTWVzc2FnZShwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzaWduVHlwZWREYXRhOiBhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9NaW5pS2l0LmF3YWl0Q29tbWFuZChcbiAgICAgICAgICBcIm1pbmlhcHAtc2lnbi10eXBlZC1kYXRhXCIgLyogTWluaUFwcFNpZ25UeXBlZERhdGEgKi8sXG4gICAgICAgICAgXCJzaWduLXR5cGVkLWRhdGFcIiAvKiBTaWduVHlwZWREYXRhICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnNpZ25UeXBlZERhdGEocGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgc2hhcmVDb250YWN0czogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXNoYXJlLWNvbnRhY3RzXCIgLyogTWluaUFwcFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgXCJzaGFyZS1jb250YWN0c1wiIC8qIFNoYXJlQ29udGFjdHMgKi8sXG4gICAgICAgICAgKCkgPT4gX01pbmlLaXQuY29tbWFuZHMuc2hhcmVDb250YWN0cyhwYXlsb2FkKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICByZXF1ZXN0UGVybWlzc2lvbjogYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLXJlcXVlc3QtcGVybWlzc2lvblwiIC8qIE1pbmlBcHBSZXF1ZXN0UGVybWlzc2lvbiAqLyxcbiAgICAgICAgICBcInJlcXVlc3QtcGVybWlzc2lvblwiIC8qIFJlcXVlc3RQZXJtaXNzaW9uICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLnJlcXVlc3RQZXJtaXNzaW9uKHBheWxvYWQpXG4gICAgICAgICk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgZ2V0UGVybWlzc2lvbnM6IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfTWluaUtpdC5hd2FpdENvbW1hbmQoXG4gICAgICAgICAgXCJtaW5pYXBwLWdldC1wZXJtaXNzaW9uc1wiIC8qIE1pbmlBcHBHZXRQZXJtaXNzaW9ucyAqLyxcbiAgICAgICAgICBcImdldC1wZXJtaXNzaW9uc1wiIC8qIEdldFBlcm1pc3Npb25zICovLFxuICAgICAgICAgICgpID0+IF9NaW5pS2l0LmNvbW1hbmRzLmdldFBlcm1pc3Npb25zKClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBzZW5kSGFwdGljRmVlZGJhY2s6IGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX01pbmlLaXQuYXdhaXRDb21tYW5kKFxuICAgICAgICAgIFwibWluaWFwcC1zZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIE1pbmlBcHBTZW5kSGFwdGljRmVlZGJhY2sgKi8sXG4gICAgICAgICAgXCJzZW5kLWhhcHRpYy1mZWVkYmFja1wiIC8qIFNlbmRIYXB0aWNGZWVkYmFjayAqLyxcbiAgICAgICAgICAoKSA9PiBfTWluaUtpdC5jb21tYW5kcy5zZW5kSGFwdGljRmVlZGJhY2socGF5bG9hZClcbiAgICAgICAgKTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xudmFyIE1pbmlLaXQgPSBfTWluaUtpdDtcblxuLy8gaW5kZXgudHNcbmltcG9ydCB7IFZlcmlmaWNhdGlvbkxldmVsIGFzIFZlcmlmaWNhdGlvbkxldmVsMiB9IGZyb20gXCJAd29ybGRjb2luL2lka2l0LWNvcmVcIjtcbmltcG9ydCB7XG4gIHZlcmlmeUNsb3VkUHJvb2Zcbn0gZnJvbSBcIkB3b3JsZGNvaW4vaWRraXQtY29yZS9iYWNrZW5kXCI7XG5cbi8vIGhlbHBlcnMvYWRkcmVzcy1ib29rL2luZGV4LnRzXG5pbXBvcnQgeyBjcmVhdGVQdWJsaWNDbGllbnQgYXMgY3JlYXRlUHVibGljQ2xpZW50MywgaHR0cCBhcyBodHRwMyB9IGZyb20gXCJ2aWVtXCI7XG5pbXBvcnQgeyB3b3JsZGNoYWluIGFzIHdvcmxkY2hhaW4zIH0gZnJvbSBcInZpZW0vY2hhaW5zXCI7XG52YXIgd29ybGRJZEFkZHJlc3NCb29rQ29udHJhY3RBZGRyZXNzID0gXCIweDU3YjkzMEQ1NTFlNjc3Q0MzNmUyZkEwMzZBZTJmZThGZGFFMDMzMERcIjtcbnZhciBhZGRyZXNzVmVyaWZpZWRVbnRpbEFiaSA9IFtcbiAge1xuICAgIGlucHV0czogW1xuICAgICAge1xuICAgICAgICBpbnRlcm5hbFR5cGU6IFwiYWRkcmVzc1wiLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgfVxuICAgIF0sXG4gICAgbmFtZTogXCJhZGRyZXNzVmVyaWZpZWRVbnRpbFwiLFxuICAgIG91dHB1dHM6IFtcbiAgICAgIHtcbiAgICAgICAgaW50ZXJuYWxUeXBlOiBcInVpbnQyNTZcIixcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgIH1cbiAgICBdLFxuICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgdHlwZTogXCJmdW5jdGlvblwiXG4gIH1cbl07XG52YXIgZ2V0SXNVc2VyVmVyaWZpZWQgPSBhc3luYyAod2FsbGV0QWRkcmVzcywgcnBjVXJsKSA9PiB7XG4gIGNvbnN0IHB1YmxpY0NsaWVudCA9IGNyZWF0ZVB1YmxpY0NsaWVudDMoe1xuICAgIGNoYWluOiB3b3JsZGNoYWluMyxcbiAgICB0cmFuc3BvcnQ6IGh0dHAzKFxuICAgICAgcnBjVXJsIHx8IFwiaHR0cHM6Ly93b3JsZGNoYWluLW1haW5uZXQuZy5hbGNoZW15LmNvbS9wdWJsaWNcIlxuICAgIClcbiAgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgdmVyaWZpZWRVbnRpbFJlc3BvbnNlID0gYXdhaXQgcHVibGljQ2xpZW50LnJlYWRDb250cmFjdCh7XG4gICAgICBhZGRyZXNzOiB3b3JsZElkQWRkcmVzc0Jvb2tDb250cmFjdEFkZHJlc3MsXG4gICAgICBhYmk6IGFkZHJlc3NWZXJpZmllZFVudGlsQWJpLFxuICAgICAgZnVuY3Rpb25OYW1lOiBcImFkZHJlc3NWZXJpZmllZFVudGlsXCIsXG4gICAgICBhcmdzOiBbd2FsbGV0QWRkcmVzc11cbiAgICB9KTtcbiAgICBjb25zdCB2ZXJpZmllZFVudGlsID0gTnVtYmVyKHZlcmlmaWVkVW50aWxSZXNwb25zZS50b1N0cmluZygpKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2ZXJpZmllZFVudGlsKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB2ZXJpZmllZFVudGlsIHZhbHVlOlwiLCB2ZXJpZmllZFVudGlsKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuICAgIHJldHVybiB2ZXJpZmllZFVudGlsID4gY3VycmVudFRpbWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHZlcmlmeWluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQ29tbWFuZCxcbiAgR2V0UGVybWlzc2lvbnNFcnJvckNvZGVzLFxuICBHZXRQZXJtaXNzaW9uc0Vycm9yTWVzc2FnZSxcbiAgTWluaUtpdCxcbiAgTWluaUtpdEluc3RhbGxFcnJvckNvZGVzLFxuICBNaW5pS2l0SW5zdGFsbEVycm9yTWVzc2FnZSxcbiAgTmV0d29yayxcbiAgUGF5bWVudEVycm9yQ29kZXMsXG4gIFBheW1lbnRFcnJvck1lc3NhZ2UsXG4gIFBheW1lbnRWYWxpZGF0aW9uRXJyb3JzLFxuICBQZXJtaXNzaW9uLFxuICBSZXF1ZXN0UGVybWlzc2lvbkVycm9yQ29kZXMsXG4gIFJlcXVlc3RQZXJtaXNzaW9uRXJyb3JNZXNzYWdlLFxuICBSZXNwb25zZUV2ZW50LFxuICBTQUZFX0NPTlRSQUNUX0FCSSxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JDb2RlcyxcbiAgU2VuZEhhcHRpY0ZlZWRiYWNrRXJyb3JNZXNzYWdlLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvckNvZGVzLFxuICBTZW5kVHJhbnNhY3Rpb25FcnJvck1lc3NhZ2UsXG4gIFNoYXJlQ29udGFjdHNFcnJvckNvZGVzLFxuICBTaGFyZUNvbnRhY3RzRXJyb3JNZXNzYWdlLFxuICBTaWduTWVzc2FnZUVycm9yQ29kZXMsXG4gIFNpZ25NZXNzYWdlRXJyb3JNZXNzYWdlLFxuICBTaWduVHlwZWREYXRhRXJyb3JDb2RlcyxcbiAgU2lnblR5cGVkRGF0YUVycm9yTWVzc2FnZSxcbiAgVG9rZW5EZWNpbWFscyxcbiAgVG9rZW5zLFxuICBBcHBFcnJvckNvZGVzMiBhcyBWZXJpZmljYXRpb25FcnJvckNvZGVzLFxuICBWZXJpZmljYXRpb25FcnJvck1lc3NhZ2UsXG4gIFZlcmlmaWNhdGlvbkxldmVsMiBhcyBWZXJpZmljYXRpb25MZXZlbCxcbiAgV2FsbGV0QXV0aEVycm9yQ29kZXMsXG4gIFdhbGxldEF1dGhFcnJvck1lc3NhZ2UsXG4gIGdldElzVXNlclZlcmlmaWVkLFxuICBwYXJzZVNpd2VNZXNzYWdlLFxuICB0b2tlblRvRGVjaW1hbHMsXG4gIHZlcmlmeUNsb3VkUHJvb2YsXG4gIHZlcmlmeVNpd2VNZXNzYWdlXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/minikit-js/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@worldcoin/minikit-react/build/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@worldcoin/minikit-react/build/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UsernameSearch: () => (/* binding */ UsernameSearch),\n/* harmony export */   useIsUserVerified: () => (/* binding */ useIsUserVerified),\n/* harmony export */   useWaitForTransactionReceipt: () => (/* binding */ useWaitForTransactionReceipt)\n/* harmony export */ });\n/* harmony import */ var _worldcoin_minikit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @worldcoin/minikit-js */ \"(ssr)/./node_modules/@worldcoin/minikit-js/build/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n// src/address-book/is-verified.tsx\n\n\nvar useIsUserVerified = (walletAddress, rpcUrl) => {\n  const [isUserVerified, setIsUserVerified] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n  const [isError, setIsError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    const fetchIsUserVerified = async () => {\n      try {\n        const data = await (0,_worldcoin_minikit_js__WEBPACK_IMPORTED_MODULE_0__.getIsUserVerified)(walletAddress);\n        setIsUserVerified(data);\n      } catch (err) {\n        setIsError(err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchIsUserVerified();\n  }, [walletAddress]);\n  return { isUserVerified, isLoading, isError };\n};\n\n// src/components/username-search.tsx\n\nvar createDebounce = () => {\n  let timeoutId;\n  return (fn, delay) => {\n    return (...args) => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n      timeoutId = setTimeout(() => {\n        fn(...args);\n      }, delay);\n    };\n  };\n};\nvar DEBOUNCE_DELAY_MS = 300;\nvar debounce = createDebounce();\nvar getSearchedUsername = async (username) => {\n  const response = await fetch(\n    `https://usernames.worldcoin.org/api/v1/search/${username}`\n  );\n  if (response.status === 200) {\n    const json = await response.json();\n    return { status: response.status, data: json };\n  }\n  return { status: response.status, error: \"Error fetching data\" };\n};\nvar UsernameSearch = ({\n  value,\n  handleChange,\n  setSearchedUsernames,\n  className,\n  inputProps\n}) => {\n  const debouncedSearch = debounce(\n    async (e) => {\n      const username = e.target.value;\n      const data = await getSearchedUsername(username);\n      setSearchedUsernames(data);\n    },\n    DEBOUNCE_DELAY_MS\n  );\n  const onChange = (e) => {\n    debouncedSearch(e);\n    handleChange(e);\n  };\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\n    \"input\",\n    {\n      type: \"text\",\n      value,\n      onChange,\n      className: className || \"rounded-md border-black border-2\",\n      ...inputProps\n    }\n  );\n};\n\n// src/transaction/hooks.ts\n\n\n// src/transaction/index.ts\nasync function fetchTransactionHash(appConfig, transactionId) {\n  try {\n    const response = await fetch(\n      `https://developer.worldcoin.org/api/v2/minikit/transaction/${transactionId}?app_id=${appConfig.app_id}&type=transaction`,\n      {\n        method: \"GET\"\n      }\n    );\n    console.log(\"Received response:\", response.url);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch transaction status\");\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(\"Error fetching transaction status\", error);\n    throw new Error(\"Failed to fetch transaction status\");\n  }\n}\n\n// src/transaction/hooks.ts\nfunction useWaitForTransactionReceipt(options) {\n  const {\n    client,\n    appConfig: _appConfig,\n    transactionId,\n    confirmations = 1,\n    timeout,\n    pollingInterval = 4e3\n  } = options;\n  const appConfig = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => _appConfig, [_appConfig]);\n  const [transactionHash, setTransactionHash] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);\n  const [receipt, setReceipt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\n    void 0\n  );\n  const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [isError, setIsError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0);\n  const [pollCount, setPollCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n  const retrigger = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    reset();\n    setIsLoading(false);\n    setPollCount((count) => count + 1);\n  }, []);\n  const reset = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    setTransactionHash(void 0);\n    setReceipt(void 0);\n    setIsError(false);\n    setError(void 0);\n  }, []);\n  const fetchStatus = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {\n    return await fetchTransactionHash(appConfig, transactionId);\n  }, [appConfig, transactionId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!transactionId) {\n      setIsLoading(false);\n      return;\n    }\n    reset();\n    setIsLoading(true);\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n    let timeoutId = null;\n    const pollHash = async () => {\n      if (signal.aborted) return;\n      try {\n        const status = await fetchStatus();\n        if (signal.aborted) return;\n        if (!status.transactionHash) {\n          timeoutId = setTimeout(pollHash, pollingInterval);\n        } else if (status.transactionHash) {\n          setTransactionHash(status.transactionHash);\n          setIsLoading(false);\n        } else {\n          timeoutId = setTimeout(pollHash, pollingInterval);\n        }\n      } catch (err) {\n        if (signal.aborted) return;\n        setIsError(true);\n        setError(err instanceof Error ? err : new Error(String(err)));\n        setIsLoading(false);\n      }\n    };\n    pollHash();\n    return () => {\n      abortController.abort();\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [transactionId, pollCount]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!transactionHash) return;\n    if (receipt) return;\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n    const fetchReceipt = async () => {\n      try {\n        const txnReceipt = await client.waitForTransactionReceipt({\n          hash: transactionHash,\n          confirmations,\n          timeout\n        });\n        if (signal.aborted) return;\n        setReceipt(txnReceipt);\n      } catch (err) {\n        if (signal.aborted) return;\n        setIsError(true);\n        setError(err instanceof Error ? err : new Error(String(err)));\n      }\n    };\n    fetchReceipt();\n    return () => {\n      abortController.abort();\n    };\n  }, [transactionHash, confirmations, timeout, client]);\n  const isSuccess = receipt !== void 0 && receipt.status === \"success\";\n  return {\n    transactionHash,\n    receipt,\n    isError,\n    isLoading,\n    isSuccess,\n    error,\n    retrigger\n  };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9taW5pa2l0LXJlYWN0L2J1aWxkL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQzBEO0FBQ2Q7QUFDNUM7QUFDQSw4Q0FBOEMsK0NBQVE7QUFDdEQsb0NBQW9DLCtDQUFRO0FBQzVDLGdDQUFnQywrQ0FBUTtBQUN4QyxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBLDJCQUEyQix3RUFBaUI7QUFDNUM7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsV0FBVztBQUNYOztBQUVBO0FBQ3dDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxTQUFTO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2Rjs7QUFFN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsY0FBYyxVQUFVLGlCQUFpQjtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0JBQW9CLDhDQUFPO0FBQzNCLGdEQUFnRCwrQ0FBUztBQUN6RCxnQ0FBZ0MsK0NBQVM7QUFDekM7QUFDQTtBQUNBLG9DQUFvQywrQ0FBUztBQUM3QyxnQ0FBZ0MsK0NBQVM7QUFDekMsNEJBQTRCLCtDQUFTO0FBQ3JDLG9DQUFvQywrQ0FBUztBQUM3QyxvQkFBb0Isa0RBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixrREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnREFBVTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFLGdEQUFVO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtFIiwic291cmNlcyI6WyIvVXNlcnMvbWF0ZW9zYXV0b24vTWF0dGVvLVByb2plY3QvbXktYXBwL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL21pbmlraXQtcmVhY3QvYnVpbGQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FkZHJlc3MtYm9vay9pcy12ZXJpZmllZC50c3hcbmltcG9ydCB7IGdldElzVXNlclZlcmlmaWVkIH0gZnJvbSBcIkB3b3JsZGNvaW4vbWluaWtpdC1qc1wiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xudmFyIHVzZUlzVXNlclZlcmlmaWVkID0gKHdhbGxldEFkZHJlc3MsIHJwY1VybCkgPT4ge1xuICBjb25zdCBbaXNVc2VyVmVyaWZpZWQsIHNldElzVXNlclZlcmlmaWVkXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtpc0Vycm9yLCBzZXRJc0Vycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZldGNoSXNVc2VyVmVyaWZpZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0SXNVc2VyVmVyaWZpZWQod2FsbGV0QWRkcmVzcyk7XG4gICAgICAgIHNldElzVXNlclZlcmlmaWVkKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNldElzRXJyb3IoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBmZXRjaElzVXNlclZlcmlmaWVkKCk7XG4gIH0sIFt3YWxsZXRBZGRyZXNzXSk7XG4gIHJldHVybiB7IGlzVXNlclZlcmlmaWVkLCBpc0xvYWRpbmcsIGlzRXJyb3IgfTtcbn07XG5cbi8vIHNyYy9jb21wb25lbnRzL3VzZXJuYW1lLXNlYXJjaC50c3hcbmltcG9ydCB7IGpzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIGNyZWF0ZURlYm91bmNlID0gKCkgPT4ge1xuICBsZXQgdGltZW91dElkO1xuICByZXR1cm4gKGZuLCBkZWxheSkgPT4ge1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBmbiguLi5hcmdzKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9O1xuICB9O1xufTtcbnZhciBERUJPVU5DRV9ERUxBWV9NUyA9IDMwMDtcbnZhciBkZWJvdW5jZSA9IGNyZWF0ZURlYm91bmNlKCk7XG52YXIgZ2V0U2VhcmNoZWRVc2VybmFtZSA9IGFzeW5jICh1c2VybmFtZSkgPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgIGBodHRwczovL3VzZXJuYW1lcy53b3JsZGNvaW4ub3JnL2FwaS92MS9zZWFyY2gvJHt1c2VybmFtZX1gXG4gICk7XG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsIGRhdGE6IGpzb24gfTtcbiAgfVxuICByZXR1cm4geyBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywgZXJyb3I6IFwiRXJyb3IgZmV0Y2hpbmcgZGF0YVwiIH07XG59O1xudmFyIFVzZXJuYW1lU2VhcmNoID0gKHtcbiAgdmFsdWUsXG4gIGhhbmRsZUNoYW5nZSxcbiAgc2V0U2VhcmNoZWRVc2VybmFtZXMsXG4gIGNsYXNzTmFtZSxcbiAgaW5wdXRQcm9wc1xufSkgPT4ge1xuICBjb25zdCBkZWJvdW5jZWRTZWFyY2ggPSBkZWJvdW5jZShcbiAgICBhc3luYyAoZSkgPT4ge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRTZWFyY2hlZFVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgIHNldFNlYXJjaGVkVXNlcm5hbWVzKGRhdGEpO1xuICAgIH0sXG4gICAgREVCT1VOQ0VfREVMQVlfTVNcbiAgKTtcbiAgY29uc3Qgb25DaGFuZ2UgPSAoZSkgPT4ge1xuICAgIGRlYm91bmNlZFNlYXJjaChlKTtcbiAgICBoYW5kbGVDaGFuZ2UoZSk7XG4gIH07XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFwiaW5wdXRcIixcbiAgICB7XG4gICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgIHZhbHVlLFxuICAgICAgb25DaGFuZ2UsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSB8fCBcInJvdW5kZWQtbWQgYm9yZGVyLWJsYWNrIGJvcmRlci0yXCIsXG4gICAgICAuLi5pbnB1dFByb3BzXG4gICAgfVxuICApO1xufTtcblxuLy8gc3JjL3RyYW5zYWN0aW9uL2hvb2tzLnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDIsIHVzZU1lbW8sIHVzZVN0YXRlIGFzIHVzZVN0YXRlMiB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzcmMvdHJhbnNhY3Rpb24vaW5kZXgudHNcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVHJhbnNhY3Rpb25IYXNoKGFwcENvbmZpZywgdHJhbnNhY3Rpb25JZCkge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9kZXZlbG9wZXIud29ybGRjb2luLm9yZy9hcGkvdjIvbWluaWtpdC90cmFuc2FjdGlvbi8ke3RyYW5zYWN0aW9uSWR9P2FwcF9pZD0ke2FwcENvbmZpZy5hcHBfaWR9JnR5cGU9dHJhbnNhY3Rpb25gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCJcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgcmVzcG9uc2U6XCIsIHJlc3BvbnNlLnVybCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHRyYW5zYWN0aW9uIHN0YXR1c1wiKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZldGNoaW5nIHRyYW5zYWN0aW9uIHN0YXR1c1wiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHRyYW5zYWN0aW9uIHN0YXR1c1wiKTtcbiAgfVxufVxuXG4vLyBzcmMvdHJhbnNhY3Rpb24vaG9va3MudHNcbmZ1bmN0aW9uIHVzZVdhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHQob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgY2xpZW50LFxuICAgIGFwcENvbmZpZzogX2FwcENvbmZpZyxcbiAgICB0cmFuc2FjdGlvbklkLFxuICAgIGNvbmZpcm1hdGlvbnMgPSAxLFxuICAgIHRpbWVvdXQsXG4gICAgcG9sbGluZ0ludGVydmFsID0gNGUzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBhcHBDb25maWcgPSB1c2VNZW1vKCgpID0+IF9hcHBDb25maWcsIFtfYXBwQ29uZmlnXSk7XG4gIGNvbnN0IFt0cmFuc2FjdGlvbkhhc2gsIHNldFRyYW5zYWN0aW9uSGFzaF0gPSB1c2VTdGF0ZTIodm9pZCAwKTtcbiAgY29uc3QgW3JlY2VpcHQsIHNldFJlY2VpcHRdID0gdXNlU3RhdGUyKFxuICAgIHZvaWQgMFxuICApO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUyKGZhbHNlKTtcbiAgY29uc3QgW2lzRXJyb3IsIHNldElzRXJyb3JdID0gdXNlU3RhdGUyKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTIodm9pZCAwKTtcbiAgY29uc3QgW3BvbGxDb3VudCwgc2V0UG9sbENvdW50XSA9IHVzZVN0YXRlMigwKTtcbiAgY29uc3QgcmV0cmlnZ2VyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJlc2V0KCk7XG4gICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICBzZXRQb2xsQ291bnQoKGNvdW50KSA9PiBjb3VudCArIDEpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHJlc2V0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFRyYW5zYWN0aW9uSGFzaCh2b2lkIDApO1xuICAgIHNldFJlY2VpcHQodm9pZCAwKTtcbiAgICBzZXRJc0Vycm9yKGZhbHNlKTtcbiAgICBzZXRFcnJvcih2b2lkIDApO1xuICB9LCBbXSk7XG4gIGNvbnN0IGZldGNoU3RhdHVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiBhd2FpdCBmZXRjaFRyYW5zYWN0aW9uSGFzaChhcHBDb25maWcsIHRyYW5zYWN0aW9uSWQpO1xuICB9LCBbYXBwQ29uZmlnLCB0cmFuc2FjdGlvbklkXSk7XG4gIHVzZUVmZmVjdDIoKCkgPT4ge1xuICAgIGlmICghdHJhbnNhY3Rpb25JZCkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzZXQoKTtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgbGV0IHRpbWVvdXRJZCA9IG51bGw7XG4gICAgY29uc3QgcG9sbEhhc2ggPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGZldGNoU3RhdHVzKCk7XG4gICAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoIXN0YXR1cy50cmFuc2FjdGlvbkhhc2gpIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHBvbGxIYXNoLCBwb2xsaW5nSW50ZXJ2YWwpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cy50cmFuc2FjdGlvbkhhc2gpIHtcbiAgICAgICAgICBzZXRUcmFuc2FjdGlvbkhhc2goc3RhdHVzLnRyYW5zYWN0aW9uSGFzaCk7XG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHBvbGxIYXNoLCBwb2xsaW5nSW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSByZXR1cm47XG4gICAgICAgIHNldElzRXJyb3IodHJ1ZSk7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKFN0cmluZyhlcnIpKSk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBwb2xsSGFzaCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3RyYW5zYWN0aW9uSWQsIHBvbGxDb3VudF0pO1xuICB1c2VFZmZlY3QyKCgpID0+IHtcbiAgICBpZiAoIXRyYW5zYWN0aW9uSGFzaCkgcmV0dXJuO1xuICAgIGlmIChyZWNlaXB0KSByZXR1cm47XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XG4gICAgY29uc3QgZmV0Y2hSZWNlaXB0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdHhuUmVjZWlwdCA9IGF3YWl0IGNsaWVudC53YWl0Rm9yVHJhbnNhY3Rpb25SZWNlaXB0KHtcbiAgICAgICAgICBoYXNoOiB0cmFuc2FjdGlvbkhhc2gsXG4gICAgICAgICAgY29uZmlybWF0aW9ucyxcbiAgICAgICAgICB0aW1lb3V0XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcbiAgICAgICAgc2V0UmVjZWlwdCh0eG5SZWNlaXB0KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcbiAgICAgICAgc2V0SXNFcnJvcih0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoU3RyaW5nKGVycikpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZldGNoUmVjZWlwdCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9O1xuICB9LCBbdHJhbnNhY3Rpb25IYXNoLCBjb25maXJtYXRpb25zLCB0aW1lb3V0LCBjbGllbnRdKTtcbiAgY29uc3QgaXNTdWNjZXNzID0gcmVjZWlwdCAhPT0gdm9pZCAwICYmIHJlY2VpcHQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIjtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2FjdGlvbkhhc2gsXG4gICAgcmVjZWlwdCxcbiAgICBpc0Vycm9yLFxuICAgIGlzTG9hZGluZyxcbiAgICBpc1N1Y2Nlc3MsXG4gICAgZXJyb3IsXG4gICAgcmV0cmlnZ2VyXG4gIH07XG59XG5leHBvcnQge1xuICBVc2VybmFtZVNlYXJjaCxcbiAgdXNlSXNVc2VyVmVyaWZpZWQsXG4gIHVzZVdhaXRGb3JUcmFuc2FjdGlvblJlY2VpcHRcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@worldcoin/minikit-react/build/index.js\n");

/***/ })

};
;